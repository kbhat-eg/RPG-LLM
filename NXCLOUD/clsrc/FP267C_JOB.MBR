             PGM   parm(&filg)

/* Initiering av parametere                                          */

             DCL        VAR(&IN03)     TYPE(*CHAR) LEN(1)
             DCL        VAR(&clib)     TYPE(*CHAR) LEN(6) value('ADBxxx')
             dcl        var(&filg)     type(*char) len(3)
             DCLF       file(aelhpf)

             monmsg     msgid(CPF2103)
             ADDLIBLE   LIB(NXCLOUD)
             ADDLIBLE   LIB(NXKORR)
             ADDLIBLE   LIB(ADB)

/*                                                                   */
/* Call av program for å lese gjennom alle som skal overføres        */
/*                                                                   */
 NYETIK:     rcvf

             monmsg     msgid(CPF0864) exec(do)
                        goto cmdlbl(end)
              enddo

/* Sjekk om det er aktiv forbindelse                                 */

             if   cond(&aeakti *eq '0') then(goto cmdlbl(nyetik))
             if   cond(&aefilg *ne &filg) then(goto cmdlbl(nyetik))
/*                                                                   */
/* Call av program for generere hylleetiketter                       */
/*                                                                   */

             call       pgm(aa720c) parm(&aefilg)
             chgvar     var(%sst(&clib 4 3)) value(&aefilg)
             chgcurlib  curlib(&clib)

             dlyjob dly(5)

/* Så kjører vi jobben som genererer etiketter :-)                   */

             call       pgm(fp268c) parm(&aeetik &aefide &aeovfa &aefilg +
                                         &aefirm &aelage &aempty)
             goto       cmdlbl(nyetik)

 END:        ENDPGM
