/*x                                                                */
/*    Finner versjonsnummer via DSPLIBL                            */
/*                                                                 */
PGM   parm(&text)

      dcl        var(&text)   type(*char) len(50)

      dclf       file(*libl/dspliblp) alwnull(*yes)
/*                                                                   */
/* ----------------------------------------------------------------- */
/*   Ta ut status over jobbene                    ASPSBS             */
/* ----------------------------------------------------------------- */

     clrpfm      file(*libl/dspliblp)
     dsplibl     output(*print)
     cpysplf     file(qprtlibl) tofile(*libl/dspliblp) +
                 splnbr(*last)
      dltsplf    file(qprtlibl) splnbr(*last)
/*   Les til man finner ASOKON for og sjekke versjon                */
rcv:  rcvf
      monmsg     msgid(cpf0864) exec(goto endpgm)
      if         cond(%sst(&dspliblp 4 6) *ne 'ASOKON') then(do)
        goto     cmdlbl(rcv)
      enddo
      chgvar     var(&text) value(%sst(&dspliblp 10 1) +
                                 *cat '.' *cat +
                                 %sst(&dspliblp 11 2))

endpgm:          endpgm
