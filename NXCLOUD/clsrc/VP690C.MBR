             PGM        PARM(&BUTID &FIRMA &KUNDE &KPROS &STAT)

/* Initiering av parametre.                                          */

             DCL        VAR(&BUTID) TYPE(*DEC) LEN(15 0)
             DCL        VAR(&BUTIA) TYPE(*CHAR) LEN(15)
             DCL        VAR(&FIRMA) TYPE(*DEC) LEN(3 0)
             DCL        VAR(&FIRAA) TYPE(*CHAR) LEN(3)
             DCL        VAR(&KUNDE) TYPE(*DEC) LEN(6 0)
             DCL        VAR(&KUNDA) TYPE(*CHAR) LEN(6)
             DCL        VAR(&KPROS) TYPE(*DEC) LEN(6 0)
             DCL        VAR(&KPROA) TYPE(*CHAR) LEN(6)
             DCL        VAR(&STAT) TYPE(*CHAR) LEN(1)

             CHGVAR     VAR(&BUTIA) VALUE(&BUTID)
             CHGVAR     VAR(&FIRAA) VALUE(&FIRMA)
             CHGVAR     VAR(&KUNDA) VALUE(&KUNDE)
             CHGVAR     VAR(&KPROA) VALUE(&KPROS)

/* Sjekker om parametre er lagt opp i tabell - avslutter hvis ikke  */

             CALL       PGM(VP690R) PARM(&FIRMA &KUNDE &KPROS +
                         &STAT)
             IF         COND(&STAT *EQ 'F') THEN(DO)
             GOTO       CMDLBL(END)
             ENDDO

/* Starter batch jobb for generering av prisfil og filoverf√∏ring     */

             CHGDTAARA  DTAARA(*LDA (1001 2)) VALUE('00')
             CHGDTAARA  DTAARA(*LDA (944 3)) VALUE(&FIRAA)
             SBMJOB     CMD(CALL PGM(VP691C) PARM(&BUTIA &FIRAA +
                           &KUNDA &KPROA &STAT)) +
                           JOB(PRISNBU) MSGQ(*NONE)

END: ENDPGM
