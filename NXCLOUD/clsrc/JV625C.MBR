             PGM        PARM(&LIST)

/* ----------------------------------------------------------------- */
/* 6.20 bsa Fjernet mulighet for kjøring i batch, siden dette har    */
/*          vist seg å feile.                                        */
/* 6.30 bof 16.09.16 Utvidet parameter                               */
/*PRG2  bof 15.06.22 Utvidet prisgruppe fra 1 til 2 posisjoner       */
/*                                                                   */
/*                                                                   */
/* ----------------------------------------------------------------- */
/* Initiering av parametre.                                          */

             DCL        VAR(&LIST) TYPE(*CHAR) LEN(79) /*8.01*/

             DCL        VAR(&IN03) TYPE(*CHAR) LEN(1)
             DCL        VAR(&RAPP) TYPE(*CHAR) LEN(10)
             DCL        VAR(&BTCH) TYPE(*CHAR) LEN(1)
/*6.30*/     dcl        var(&excl) type(*char) len(1)
/*6.30*/     dcl        var(&skje) type(*char) len(1)
/*6.30*/     dcl        var(&mail) type(*char) len(1)


             CHGVAR     VAR(&RAPP) VALUE('JV626P')

/* Oppdaterer LDA med navn på printfile                              */

             CHGDTAARA  DTAARA(*LDA (846 10)) VALUE(&RAPP)

/* Oppkall av utskriftsparametre.                                    */

             CALL       PGM(AP600R) PARM('JV626R' '1' '0' &IN03 &BTCH)

/* Dersom F3 skal ikke rapporten skrives                             */

             IF         COND(&IN03 *EQ '1') THEN(GOTO CMDLBL(END))

/* Henter opplysning om utskriften skal kjøres i batch fra LDA       */

/*6.30*/     rtvdtaara  dtaara(*lda (639 1)) rtnvar(&excl)
/*6.30*/     rtvdtaara  dtaara(*lda (640 1)) rtnvar(&mail)
/*6.30*/     rtvdtaara  dtaara(*lda (637 1)) rtnvar(&skje)

/*6.30*/     if         cond(&excl *eq '1') then(chgvar +
/*6.30*/                    var(&btch) value('0'))
/*6.30*/     if         cond(&mail *eq '1') then(chgvar +
/*6.30*/                    var(&btch) value('0'))
/*6.30*/     if         cond(&skje *eq '1') then(chgvar +
/*6.30*/                    var(&btch) value('0'))

/*6.30*/     strpco     pcta(*no)
/*6.30*/     monmsg msgid(iws4010)

/* Utskrift                                                          */

/*6.20       IF         COND(&BTCH *EQ '1') THEN(SBMJOB CMD(CALL +   */
/*6.20                    PGM(JV626C) PARM(&LIST)) +                 */
/*6.20                    JOB(OPPD_EVR) +                            */
/*6.20                    MSGQ(*NONE))                               */
/*6.20       ELSE       CMD(CALL PGM(*LIBL/JV626C) PARM(&LIST))      */
/*6.20*/     CALL       PGM(JV626C) PARM(&LIST)

 END:        ENDPGM
