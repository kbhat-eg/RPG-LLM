             PGM        PARM(&P_PREC &P_MAPP &P_FILN &P_BATC)

             DCL        VAR(&P_PREC) TYPE(*CHAR) LEN(55)
             DCL        VAR(&P_MAPP) TYPE(*CHAR) LEN(10)
             DCL        VAR(&P_FILN) TYPE(*CHAR) LEN(10)
             DCL        VAR(&P_BATC) TYPE(*CHAR) LEN(1)
             DCL        VAR(&WSID)   TYPE(*CHAR) LEN(10)
             DCL        VAR(&tild)  TYPE(*CHAR) LEN(25)
             DCL        VAR(&tilm)  TYPE(*CHAR) LEN(20)

/* Tømmer tabell/register                                            */

             CLRPFM     FILE(LWEXPF)

/* Kaller uttrekksprogram                                            */

             CALL PGM(*LIBL/LL852R) PARM(&P_PREC &P_MAPP       +
                                         &P_FILN &P_BATC)

/* Oppretter angitt mappe om denne finnes                            */

             CRTFLR     FLR(&P_MAPP) TEXT('Uttrekk salgsstat')
             MONMSG     MSGID(CPF8A85)
             MONMSG     MSGID(CPF8A18)

/* Kopierer fil til PC-område                                        */

/*           CPYTOPCD   FROMFILE(LWEXPF) TOFLR(&P_MAPP) +      */
/*                        TODOC(&P_FILN) REPLACE(*YES)         */
             chgvar     var(&tild) value(&p_filn)
             chgvar     var(&tilm) value(&p_mapp)
             call       pgm(asptostmf) +
                        parm('LWEXPF    ' +
                             'LWEXPF    ' +
                             &tilm +
                             &tild   +
                             'TXT')

             IF         COND(&P_BATC *EQ 'Y') THEN(DO)
             RTVDTAARA  DTAARA(*LDA (901 10)) RTNVAR(&WSID)
             SNDBRKMSG  MSG('ASLAGR: Uttrekk av salgsstat. +
                             er ferdig') TOMSGQ(&WSID)
             ENDDO

 END:        ENDPGM
