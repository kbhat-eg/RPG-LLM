
/*    Før første oppstart bygges                                    */

PGM

      dcl        var(&flib)   type(*char) len(10)  value(assaft_xxx)
      dcl        var(&lib)    type(*char) len(3)   value('ADB')
      dcl        var(&fgr)    type(*char) len(3)

             DCLF       FILE(*LIBL/AFILL1) ALWNULL(*YES)

      monmsg     msgid(cpf2105)

/* Avslutter dersom filer finnes fra før                             */

             CHKOBJ     OBJ(&LIB/RHSTPF) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(GOTO CMDLBL(ENDPGM))

/*  Kopiere filer til ADB                                            */

      dltobj     obj(&lib/rhstl1) objtype(*file)
      dltobj     obj(&lib/rhstlr) objtype(*file)
      dltobj     obj(&lib/rhstlu) objtype(*file)
      dltobj     obj(&lib/rhstpf) objtype(*file)
      dltobj     obj(&lib/ras5pf) objtype(*file)

      crtdupobj  obj(rhstpf) fromlib(&flib) objtype(*file) +
                          tolib(&lib)
      crtdupobj  obj(rhstl1) fromlib(&flib) objtype(*file) +
                          tolib(&lib)
      crtdupobj  obj(rhstlr) fromlib(&flib) objtype(*file) +
                          tolib(&lib)
      crtdupobj  obj(rhstlu) fromlib(&flib) objtype(*file) +
                          tolib(&lib)
      cpyf       fromfile(&flib/rhstpf) tofile(&lib/rhstpf) +
                          mbropt(*replace)

      crtdupobj  obj(ras5pf) fromlib(&flib) objtype(*file) +
                          tolib(&lib)
      cpyf       fromfile(&flib/ras5pf) tofile(&lib/ras5pf) +
                          mbropt(*replace)

/*  Generer filer i alle bibliotek                                   */

rcv:  rcvf
      monmsg     msgid(cpf0864) exec(goto endpgm)
      if         cond(&agback *ne '1') then(do)
       chgvar    var(&fgr)  value(%sst(&agbibl 4 3))
       call      pgm(rgrat5c)  parm(&fgr ' ')
      enddo
      goto       cmdlbl(rcv)


endpgm:          endpgm
