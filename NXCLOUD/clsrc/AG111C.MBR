
/*           Generere   Dette program kalles der hvor                */
/*                      det skal h√•ndteres :                         */
/*                      1 fysisk file   (PF)                         */
/*                     12 logiske filer (LU L1 L2 L3 L4 L5 L6 L7 L8  */
/*                                          L9 LA LB                 */

 STRPGM:     PGM        PARM(&FGRP &NULL &DBIB &SBIB &RGBF +
                             &RGPF &RGLU &RGL1 &RGL2 &RGL3 +
                             &RGL4 &RGL5 &RGL6 &RGL7 &RGL8 +
                             &RGL9 &RGLA &RGLB)

             DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3)
             DCL        VAR(&NULL) TYPE(*CHAR) LEN(1)
             DCL        VAR(&DBIB) TYPE(*CHAR) LEN(6)
             DCL        VAR(&SBIB) TYPE(*CHAR) LEN(6)

             DCL        VAR(&RGBF) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGPF) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGLU) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL1) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL2) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL3) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL4) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL5) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL6) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL7) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL8) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGL9) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGLA) TYPE(*CHAR) LEN(6)
             DCL        VAR(&RGLB) TYPE(*CHAR) LEN(6)

/*           Sjekk, Finnes back-register, JA=Slett registeret        */

             CHKOBJ     OBJ(&DBIB/&RGBF) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(GOTO TAG002)
             DLTF       FILE(&DBIB/&RGBF)

/*          Sletter indexer / Legger tilside registeret              */

 TAG002:     CHKOBJ     OBJ(&DBIB/&RGPF) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(GOTO TAG003)

             DLTF       FILE(&DBIB/&RGLU)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL1)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL2)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL3)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL4)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL5)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL6)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL7)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL8)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGL9)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGLA)
             MONMSG     MSGID(CPF2105)
             DLTF       FILE(&DBIB/&RGLB)
             MONMSG     MSGID(CPF2105)

             RNMOBJ     OBJ(&DBIB/&RGPF) OBJTYPE(*FILE) +
                          NEWOBJ(&RGBF)

/*           Start danning av registre                               */

/* PF:PF                                                             */

 TAG003:     CRTPF      FILE(&DBIB/&RGPF) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LU                                                             */

             CRTLF      FILE(&DBIB/&RGLU) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L1                                                             */

             CRTLF      FILE(&DBIB/&RGL1) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L2                                                             */

             CRTLF      FILE(&DBIB/&RGL2) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L3                                                             */

             CRTLF      FILE(&DBIB/&RGL3) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L4                                                             */

             CRTLF      FILE(&DBIB/&RGL4) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L5                                                             */

             CRTLF      FILE(&DBIB/&RGL5) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L6                                                             */

             CRTLF      FILE(&DBIB/&RGL6) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L7                                                             */

             CRTLF      FILE(&DBIB/&RGL7) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L8                                                             */

             CRTLF      FILE(&DBIB/&RGL8) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L9                                                             */

             CRTLF      FILE(&DBIB/&RGL9) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LA                                                             */

             CRTLF      FILE(&DBIB/&RGLA) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LB                                                             */

             CRTLF      FILE(&DBIB/&RGLB) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/*           Kopierer fra gammelt til nytt register                  */

             CHKOBJ     OBJ(&DBIB/&RGBF) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(GOTO TAG005)
             CPYF       FROMFILE(&DBIB/&RGBF) +
                          TOFILE(&DBIB/&RGPF) FROMMBR(*ALL) +
                          TOMBR(*FROMMBR) MBROPT(*ADD) FMTOPT(*MAP +
                          *DROP)


/*           Sjekk, Finnes back-register, J=Slett registeret         */

             CHKOBJ     OBJ(&DBIB/&RGBF) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(GOTO TAG005)
             DLTF       FILE(&DBIB/&RGBF)

/*           Sletter innholdet i registeret                          */

 TAG005:     IF         COND(&NULL *EQ 'S') THEN(CLRPFM +
                          FILE(&DBIB/&RGPF))

 ENDPGM:     ENDPGM
