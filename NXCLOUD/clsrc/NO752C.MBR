             PGM        PARM(&MAPP &FILE &FEIL)

/* Definering av parametre.                                          */

             DCL        VAR(&MAPP) TYPE(*CHAR) LEN(50)
             DCL        VAR(&FILE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&FEIL) TYPE(*CHAR) LEN(1)

/* Definering av variable                                            */

             DCL        VAR(&CLIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&IFIL) TYPE(*CHAR) LEN(50) VALUE(' ')
             DCL        VAR(&DFIL) TYPE(*CHAR) LEN(70)

             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(FEIL))

/* Henter current library                                            */

             RTVJOBA    CURLIB(&CLIB)

/* Oppretter temporær fil og kopierer motatt fil inn i denne         */

             DLTF       FILE(FTPTEMP)
             MONMSG     MSGID(CPF2105)
             CRTPF      FILE(FTPTEMP) RCDLEN(1200) TEXT('Temporær +
                          fil') SIZE(*NOMAX)
             CHGVAR     VAR(&IFIL) VALUE(&MAPP *TCAT '/' *TCAT &FILE)
             CHGVAR     VAR(&DFIL) VALUE('/qsys.lib/' *TCAT &CLIB +
                          *TCAT '.lib/FTPTEMP.file/FTPTEMP.mbr')
             CPYFRMSTMF FROMSTMF(&IFIL) TOMBR(&DFIL) MBROPT(*REPLACE)

/* Behandler mottatt fil                                             */

             CPYF       FROMFILE(FTPTEMP) TOFILE(NEOWPF) MBROPT(*ADD) +
                          FMTOPT(*NOCHK)

             GOTO       CMDLBL(END)

 FEIL:       CHGVAR     VAR(&FEIL) VALUE('1')

 END:        ENDPGM
