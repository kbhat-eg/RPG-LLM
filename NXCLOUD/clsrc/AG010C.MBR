
/*           Generere   Enhets-register                              */
/*           ----------------------------                            */
/*           Nb! I stedet for file-gruppe kommer det her             */
/*           inn en parameter for miljø.  F.eks. A01                 */
/*           A02 A03 osv.  Felles genereringsprogram kalles.         */
/*           (Enten AG101C eller AG102C avhengig av                  */
/*           antall filer som benyttes).                             */

 STRPGM:     PGM        PARM(&MILJ &NULL)

             DCL        VAR(&MLD1) TYPE(*CHAR) LEN(50)
             DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3) VALUE('   ')
             DCL        VAR(&MILJ) TYPE(*CHAR) LEN(3)
             DCL        VAR(&NULL) TYPE(*CHAR) LEN(1)
             DCL        VAR(&DBIB) TYPE(*CHAR) LEN(6) VALUE('      ')
             DCL        VAR(&SBIB) TYPE(*CHAR) LEN(6) VALUE('ASPGPL')

             DCL        VAR(&RGBF) TYPE(*CHAR) LEN(6) VALUE('AENHBF')
             DCL        VAR(&RGPF) TYPE(*CHAR) LEN(6) VALUE('AENHPF')
             DCL        VAR(&RGLU) TYPE(*CHAR) LEN(6) VALUE('AENHLU')
             DCL        VAR(&RGL1) TYPE(*CHAR) LEN(6) VALUE('AENHL1')
             DCL        VAR(&RGL2) TYPE(*CHAR) LEN(6) VALUE('AENHL2')
             DCL        VAR(&RGLR) TYPE(*CHAR) LEN(6) VALUE('AENHLR')

/*           Setter bibliotek til current                            */

             CHGVAR     VAR(%SST(&DBIB 1 3)) VALUE(&MILJ)
             CHGCURLIB  CURLIB(&DBIB)

/*           Sjekker om Miljø finnes lagt opp                        */

             CHKOBJ     OBJ(&DBIB)     OBJTYPE(*LIB)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             CHGVAR     VAR(&MLD1) VALUE('Oppgitt miljø ble ikke funnet')
             CALL       PGM(AA005R) PARM(&MLD1)
             GOTO       CMDLBL(ENDPGM)
             ENDDO

/*           Kalle opp fellesprogram                                 */

             CALL       PGM(AG103C) PARM(&FGRP &NULL &DBIB +
                       &SBIB &RGBF &RGPF &RGLU &RGL1 &RGL2 &RGLR)

 ENDPGM:     ENDPGM
