             PGM        PARM(&USER)
             DCL        VAR(&JOBB)     TYPE(*CHAR) LEN(10)
             DCL        VAR(&USER)     TYPE(*CHAR) LEN(10)
             DCL        VAR(&IPUS)     TYPE(*CHAR) LEN(10) +
                                       VALUE(IP)
             DCL        VAR(&TEXT)     TYPE(*CHAR) LEN(30) +
                                       VALUE('IP-program for')
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(ERR))
             RTVJOBA    JOB(&JOBB)

/* Bygge opp variabler                                               */

             CHGVAR     VAR(%SST(&IPUS 03 8)) VALUE(&USER)
             CHGVAR     VAR(%SST(&TEXT 16 8)) VALUE(&USER)

/* Sjekk om IP-program og kilde finnes fra f√∏r                       */

             CHKOBJ     OBJ(ASPGPLK/QCLLESRC) OBJTYPE(*FILE) +
                          MBR(&IPUS) AUT(*ALL)
             MONMSG     MSGID(CPF9815) EXEC(GOTO CMDLBL(SJK_OBJ))
             RMVM       FILE(ASPGPLK/QCLLESRC) MBR(&IPUS)

 SJK_OBJ:    CHKOBJ     OBJ(ASPGPLK/&IPUS) OBJTYPE(*PGM)
             MONMSG     MSGID(CPF9801) EXEC(GOTO CMDLBL(START))
             DLTPGM     PGM(ASPGPLK/&IPUS)
             MONMSG     MSGID(CPF2105)

/* Bygge opp Cl-member                                               */

 START:      ADDPFM     FILE(ASPGPLK/QCLLESRC) MBR(&IPUS) +
                          TEXT(&TEXT) SRCTYPE(CLLE)
             OVRDBF     FILE(QCLLESRC) TOFILE(ASPGPLK/QCLLESRC) +
                          MBR(&IPUS)

/* Call til RPG-program                                              */

             CALL       PGM(AA030R) PARM(&USER)
             DLTOVR     FILE(QCLLESRC)

/* Create program                                                    */

             CRTBNDCL   PGM(ASPGPLK/&IPUS) SRCFILE(ASPGPLK/QCLLESRC) +
                          TEXT(&TEXT)

             GOTO       CMDLBL(END)
 ERR:        SNDPGMMSG  MSG('Det oppstod en feil, se melding +
                          i jobbloggen !!!') TOMSGQ(&JOBB)

 END:        ENDPGM
