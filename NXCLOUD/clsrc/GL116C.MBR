
/* Rydder opp i returfiler.                                          */

             PGM        PARM(&LONN)

/* Initiering av parametre.                                          */

             DCL        VAR(&LONN) TYPE(*CHAR) LEN(1)
             DCL        VAR(&FILG)   TYPE(*CHAR) LEN(3)
             DCL        VAR(&S36F)   TYPE(*CHAR) LEN(8)

/* Lønnsfile skal kun slettes dersom det er mottatt 1.gangsretur     */
/* på lønn:                                                          */

             IF         COND(&LONN *NE '1') THEN(GOTO +
                          CMDLBL(OVER))

/* Henter prefiks for å bygge S/36-filnavn det skal testes på        */
/* om eksisterer.                                                    */

             RTVDTAARA  DTAARA(*LDA (931 3)) RTNVAR(&FILG)

             CHGVAR     VAR(%SST(&S36F 1 1)) VALUE('K')
             CHGVAR     VAR(%SST(&S36F 2 3)) VALUE(&FILG)
             CHGVAR     VAR(%SST(&S36F 5 4)) VALUE('.BET')

/* MDLØNN:                                                           */
/* Tester på om file finnes:                                         */

             CHKOBJ     OBJ(QS36F/&S36F) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(GOTO CMDLBL(OVER))

/* Sletter file:                                                     */

             DLTF       FILE(QS36F/&S36F)

OVER:

             CALL       PGM(GL116R)
END:
