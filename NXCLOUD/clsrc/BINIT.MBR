             PGM        PARM(&DLIB &KASS &FIRM &USER)

             DCL        VAR(&DLIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&KASS) TYPE(*CHAR) LEN(3)
             DCL        VAR(&FIRM) TYPE(*CHAR) LEN(3)
             DCL        VAR(&USER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&LAGE) TYPE(*CHAR) LEN(2)
             DCL        VAR(&AVDE) TYPE(*CHAR) LEN(4)
             DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3)

/* Setter current library                                           */

             CHGCURLIB  CURLIB(&DLIB)

/* Initierer LDA (Local Data Area)                                   */

             CHGVAR     VAR(&FGRP) VALUE(%SUBSTRING(&DLIB 4 3))

             CHGDTAARA  DTAARA(*LDA (931 3)) VALUE(&FGRP)
             CHGDTAARA  DTAARA(*LDA (901 3)) VALUE(&KASS)
             CHGDTAARA  DTAARA(*LDA (911 10)) VALUE(&USER)
             CHGDTAARA  DTAARA(*LDA (944 3)) VALUE(&FIRM)

/* Henter lagernummer fra kasseregister                             */

             CALL       PGM(BU799R) PARM(&KASS &LAGE &AVDE)
             CHGDTAARA  DTAARA(*LDA (1001 2)) VALUE(&LAGE)
             CHGDTAARA  DTAARA(*LDA (947 4)) VALUE(&AVDE)

 END:        ENDPGM
