             PGM

/* Definisjon av variabler                                           */

             DCL        VAR(&KODE) TYPE(*DEC)  LEN(2 0)
             DCL        VAR(&BIBL) TYPE(*CHAR) LEN(10)
             CHGVAR     VAR(&BIBL) VALUE(' ')

/* Backup av savefilen til tape                                      */

             SAVLIB     LIB(ADB.SAVF) DEV(TAP01) ENDOPT(*LEAVE) +
                          PRECHK(*YES)
/*                                                                   */
/* Gi melding om at savefile er kjørt ut på tape                     */
/*                                                                   */
             CHGVAR     VAR(&KODE)  VALUE(29)
             CALL       PGM(AN050R) PARM(&KODE &BIBL)

/* Tømmer savefilen igjen                                            */

             CLRLIB     LIB(ADB.SAVF)
/*                                                                   */
/* Gi melding om at ADB.SAVF er tømt igjen                           */
/*                                                                   */
             CHGVAR     VAR(&KODE)  VALUE(30)
             CALL       PGM(AN050R) PARM(&KODE &BIBL)

SLUTT:       ENDPGM
