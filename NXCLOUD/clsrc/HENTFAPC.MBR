      PGM
      DCL        VAR(&fil)  TYPE(*char) LEN(10)  value('FaPost    ')
      DCL        VAR(&lib)  TYPE(*char) LEN(10)
      DCL        VAR(&utf)  TYPE(*CHAR) LEN(60)
      DCL        VAR(&mem)  TYPE(*CHAR) LEN(10)
      DCL        VAR(&feil) TYPE(*CHAR) LEN(1)
      DCL        VAR(&svar) TYPE(*CHAR) LEN(1)
      DCL        VAR(&f3)   TYPE(*dec)  LEN(1 0)
      DCL        VAR(&m1)   TYPE(*CHAR) LEN(50)
      DCL        VAR(&m2)   TYPE(*CHAR) LEN(50)
      DCL        VAR(&dir)  TYPE(*CHAR) LEN(60)
      DCL        VAR(&in03) TYPE(*CHAR) LEN(1)
      DCL        VAR(&val)  TYPE(*CHAR) LEN(1)
/*                                                                   */

logok:
      rtvdtaara  dtaara(*lda (934 10)) rtnvar(&lib)
      rtvdtaara  dtaara(*lda (911 10)) rtnvar(&mem)
   /* goto       start   */
/*    Henter inn fil fra IFS-omr√•det                                 */
      call       pgm(hentifs)  parm(&fil &lib &mem &dir &utf)
      if         cond(&utf *eq 'Avbrudd') then(do)
        goto     cmdlbl(end)
      enddo
/*    Oppdaterere FOHE og FODT fra fapost                            */
start: ovrdbf     file(fapost)  tofile(*libl/fapost)  mbr(&mem)
      call       pgm(hentfapr)

      rtvdtaara  dtaara(*lda (1 1))  rtnvar(&feil)
      if         cond(&feil *eq 'J') then(do)
        call     pgm(uppdifsc)  parm(&dir &val &in03 &fil &lib &mem &utf)
        chgvar   var(&m1) value('En eller flere linjer inneholder feil ')
        chgvar   var(&m2) value('Se innlest regneark etter feil ')
        call     pgm(aa007r)  parm(&m1 &m2 &svar &f3)
      enddo

end:  ENDPGM
