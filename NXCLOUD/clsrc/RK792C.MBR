/* V5.40 16.2.06/HFL: Sjekk om fil FOHEPF - ordrehode i ASOFAK finnes*/
/* V7.xx 081220/bsa: Fjernet varsel om at jobb starter osv. Newlook */
/* V7.xx             liker ikke popup.                              */

/* Programmet benytte for å finne riktig program                     */
/* for å kontrollere om det finnes registrerte ordre på aktuell      */
/* kunde i registre i ASOFAK,                                        */

 STRPGM:     PGM        PARM(&FIRM &KUND &STAT)

             DCL        VAR(&FIRM) TYPE(*DEC) LEN(3 0)
             DCL        VAR(&KUND) TYPE(*DEC) LEN(6 0)
             DCL        VAR(&STAT) TYPE(*CHAR) LEN(1)

             DCL        VAR(&BTCH)  TYPE(*CHAR) LEN(1)
             DCL        VAR(&WALI)  TYPE(*DEC)  LEN(2 0)
             DCL        VAR(&WAPO)  TYPE(*DEC)  LEN(2 0)
             DCL        VAR(&MLD1)  TYPE(*CHAR) LEN(40)
             DCL        VAR(&MLD2)  TYPE(*CHAR) LEN(40)

/*           Sjekk om fil FOHEPF - ordrehode i ASOFAK finnes  E5.40 */

/*           CHKOBJ     OBJ(*LIBL/FO792R) OBJTYPE(*PGM)     S5.40   */
             CHKOBJ     OBJ(*LIBL/FOHEPF) OBJTYPE(*FILE) /* T5.40 */
             MONMSG     MSGID(CPF9801) EXEC(GOTO endpgm)

             RTVjoba    type(&btch)

             IF         COND(&BTCH *eq '1') THEN(DO)
             CHGVAR     VAR(&WALI) VALUE(4)
             CHGVAR     VAR(&WAPO) VALUE(44)
             CHGVAR     VAR(&MLD1) VALUE('Vennligst vent litt .....')
             CHGVAR     VAR(&MLD2) VALUE('Sjekker ASOFAK ..........')
/*7.xx       CALL       PGM(AA006C)  PARM(&WALI &WAPO &MLD1 &MLD2)        */
             CHGDTAARA  DTAARA(*LDA (863 1)) VALUE('1')
             ENDDO

             CALL       PGM(FO792R)    PARM(&FIRM &KUND &STAT)


 ENDPGM:     ENDPGM
