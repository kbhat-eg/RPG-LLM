
             PGM        PARM(&FGRP &FIRM)

             DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3)
             DCL        VAR(&FIRM) TYPE(*CHAR) LEN(3)
             DCL        VAR(&FREM) TYPE(*CHAR) LEN(20)
             DCL        VAR(&FMOT) TYPE(*CHAR) LEN(20)
             DCL        VAR(&FAVR) TYPE(*CHAR) LEN(20)
             DCL        VAR(&FOCR) TYPE(*CHAR) LEN(20)
             DCL        VAR(&FKTO) TYPE(*CHAR) LEN(20)
             DCL        VAR(&FINK) TYPE(*CHAR) LEN(20)
             DCL        VAR(&FTFF) TYPE(*CHAR) LEN(20)

             DCL        VAR(&FREM8) TYPE(*CHAR) LEN(8)
             DCL        VAR(&FMOT8) TYPE(*CHAR) LEN(8)
             DCL        VAR(&FAVR8) TYPE(*CHAR) LEN(8)
             DCL        VAR(&FOCR8) TYPE(*CHAR) LEN(8)
             DCL        VAR(&FKTO8) TYPE(*CHAR) LEN(8)
             DCL        VAR(&FINK8) TYPE(*CHAR) LEN(8)
             DCL        VAR(&FTFF8) TYPE(*CHAR) LEN(8)
             DCL        VAR(&tild)  TYPE(*CHAR) LEN(25)
             DCL        VAR(&fraf)  TYPE(*CHAR) LEN(10)

/* Kopierer først over til mappe PCFILER filene DIRxx, hvor          */
/* xx=bankkoden:                                                     */

/*           CPYTOPCD   FROMFILE(*LIBL/DIRREM) TOFLR(PCFILER) +  */
/*                        TODOC(DIRREM) REPLACE(*YES)            */
             chgvar     var(&tild) value('DIRREM')
             call       pgm(asptostmf) +
                        parm('DIRREM    ' +
                             'DIRREM    ' +
                             'PCFILER             ' +
                             &tild   +
                             '   ')
               MONMSG     MSGID(CPF0000)

/*           CPYTOPCD   FROMFILE(*LIBL/DIRFD) TOFLR(PCFILER) +   */
/*                        TODOC(DIRFD) REPLACE(*YES)             */
             chgvar     var(&tild) value('DIRFD ')
             call       pgm(asptostmf) +
                        parm('DIRFD     ' +
                             'DIRFD     ' +
                             'PCFILER             ' +
                             &tild   +
                             '   ')
               MONMSG     MSGID(CPF0000)

/*           CPYTOPCD   FROMFILE(*LIBL/DIRDN) TOFLR(PCFILER) +  */
/*                        TODOC(DIRDN) REPLACE(*YES)            */
             chgvar     var(&tild) value('DIRDN ')
             call       pgm(asptostmf) +
                        parm('DIRDN     ' +
                             'DIRDN     ' +
                             'PCFILER             ' +
                             &tild   +
                             '   ')
               MONMSG     MSGID(CPF0000)

/*           CPYTOPCD   FROMFILE(*LIBL/DIRKK) TOFLR(PCFILER) + */
/*                        TODOC(DIRKK) REPLACE(*YES)           */
             chgvar     var(&tild) value('DIRKK ')
             call       pgm(asptostmf) +
                        parm('DIRKK     ' +
                             'DIRKK     ' +
                             'PCFILER             ' +
                             &tild   +
                             '   ')
               MONMSG     MSGID(CPF0000)

/*           CPYTOPCD   FROMFILE(*LIBL/DIRFK) TOFLR(PCFILER) +  */
/*                        TODOC(DIRFK) REPLACE(*YES)            */
             chgvar     var(&tild) value('DIRFK ')
             call       pgm(asptostmf) +
                        parm('DIRFK     ' +
                             'DIRFK     ' +
                             'PCFILER             ' +
                             &tild   +
                             '   ')
               MONMSG     MSGID(CPF0000)

/* Kopierer deretter remitteringsfile som kan navnestyres pr.        */
/* firma, over til mappe PCFILER:                                    */

             CALL       PGM(GL320C) PARM(&FGRP &FIRM &FREM &FMOT +
                          &FAVR &FOCR &FKTO &FINK &FTFF)

/*           CPYTOPCD   FROMFILE(*LIBL/DIRREM) TOFLR(PCFILER) +    */
/*                        TODOC(&FREM) REPLACE(*YES)               */
             chgvar     var(&tild) value(&frem)
             call       pgm(asptostmf) +
                        parm('DIRREM    ' +
                             'DIRREM    ' +
                             'PCFILER             ' +
                             &tild   +
                             '   ')
               MONMSG     MSGID(CPF0000)

/* Hopper ut dersom mottaksretur IKKE er utfylt.  Dette indikerer at */
/* sammenslåing av returfiler skjer i egen bat-fil på PC'n, og at    */
/* sammenslåing her IKKE skal gjøres.                                */

             IF         COND(&FREM *EQ '        ') THEN(DO)
             GOTO       CMDLBL(IKKEBRUK)
             ENDDO

             CHGVAR     VAR(&FREM8) VALUE(%SST(&FREM 1 8))

/*           CPYTOPCD   FROMFILE(*LIBL/&FREM) TOFLR(PCFILER) +  */
/*                        TODOC(&FREM8) REPLACE(*YES)           */
             chgvar     var(&tild) value(&frem8)
             chgvar     var(&fraf) value(&frem)
             call       pgm(asptostmf) +
                        parm(&fraf +
                             &fraf +
                             'PCFILER             ' +
                             &tild   +
                             '   ')
               MONMSG     MSGID(CPF0000)
 IKKEBRUK:

 ENDPGM:     ENDPGM
