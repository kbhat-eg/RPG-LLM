      PGM
/*                                                                   */
/* 7.01 120121 bof: tatt bort kall til UPPDIFSC pga. feil parm        */
/*                                                                   */
      DCL        VAR(&fil)  TYPE(*char) LEN(10)  value('OkPost    ')
      DCL        VAR(&lib)  TYPE(*char) LEN(10)
      DCL        VAR(&utf)  TYPE(*CHAR) LEN(20)
      DCL        VAR(&mem)  TYPE(*CHAR) LEN(10)
      DCL        VAR(&feil) TYPE(*CHAR) LEN(1)
      DCL        VAR(&svar) TYPE(*CHAR) LEN(1)
      DCL        VAR(&f3)   TYPE(*dec)  LEN(1 0)
      DCL        VAR(&m1)   TYPE(*CHAR) LEN(50)
      DCL        VAR(&m2)   TYPE(*CHAR) LEN(50)
      DCL        VAR(&dir)  TYPE(*CHAR) LEN(60)
      DCL        VAR(&valg) TYPE(*CHAR) LEN(1)
/*                                                                   */

logok:
      rtvdtaara  dtaara(*lda (934 10)) rtnvar(&lib)
      rtvdtaara  dtaara(*lda (911 10)) rtnvar(&mem)
/*    Henter inn fil fra IFS-området                                 */
      call       pgm(hentifs)  parm(&fil &lib &mem &dir &utf)
      if         cond(&utf *eq 'Avbrudd') then(do)
        goto     cmdlbl(end)
      enddo
/*    Oppdaterere RTRA og RBUN fra okpost                            */
      ovrdbf     file(okpost)  tofile(*libl/okpost)  mbr(&mem)
      call       pgm(hentokpr)

      rtvdtaara  dtaara(*lda (1 1))  rtnvar(&feil)
      if         cond(&feil *eq 'J') then(do)
        chgvar   var(&m1) value('En eller flere linjer inneholder feil ')
        chgvar   var(&m2) value('Velg hvor du vil legge fila i neste bilde')
        call     pgm(aa007r)  parm(&m1 &m2 &svar &f3)
/* 7.01     call     pgm(uppdifsc)  parm(&dir &valg &f3 &fil &lib &mem &utf)*/
        chgvar   var(&m1) value('En eller flere linjer inneholder feil ')
        chgvar   var(&m2) value('Ønsker du å se feilene her så svar J')
        call     pgm(aa007r)  parm(&m1 &m2 &svar &f3)
        if       cond(&svar *eq 'J') then(do)
          wrklnk obj(&dir)
        enddo
      enddo


end:  ENDPGM
