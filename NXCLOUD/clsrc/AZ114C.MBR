             PGM        PARM(&LIN &RES)
             DCL        VAR(&LIN)      TYPE(*CHAR) LEN(10)
             DCL        VAR(&CTL)      TYPE(*CHAR) LEN(10)
             DCL        VAR(&DEV)      TYPE(*CHAR) LEN(10)
             DCL        VAR(&RES)      TYPE(*CHAR) LEN(10)
             DCL        VAR(&EXL)      TYPE(*CHAR) LEN(11)
             DCL        VAR(&EXC)      TYPE(*CHAR) LEN(11)
             DCL        VAR(&LOC)      TYPE(*CHAR) LEN(8)

             CHGVAR     VAR(&CTL)  +
                        VALUE('CTL' *CAT %SUBSTRING(&LIN 4 7))
             CHGVAR     VAR(&DEV)  +
                        VALUE('DEV' *CAT %SUBSTRING(&LIN 4 7))
             IF         COND(&LIN *EQ 'LINASP1   ') THEN(DO)
                  CHGVAR VAR(&EXL)     VALUE('05600001   ')
                  CHGVAR VAR(&EXC)     VALUE('05600000   ')
                  CHGVAR VAR(&LOC)     VALUE('KUNDE   ')
             ENDDO
             IF         COND(&LIN *EQ 'LINASP2   ') THEN(DO)
                  CHGVAR VAR(&EXL)     VALUE('05600011   ')
                  CHGVAR VAR(&EXC)     VALUE('05600010   ')
                  CHGVAR VAR(&LOC)     VALUE('KUNDE2  ')
             ENDDO
             IF         COND(&LIN *EQ 'LINASP3   ') THEN(DO)
                  CHGVAR VAR(&EXL)     VALUE('05600021   ')
                  CHGVAR VAR(&EXC)     VALUE('05600020   ')
                  CHGVAR VAR(&LOC)     VALUE('KUNDE3  ')
             ENDDO
             IF         COND(&LIN *EQ 'LINASP4   ') THEN(DO)
                  CHGVAR VAR(&EXL)     VALUE('05600031   ')
                  CHGVAR VAR(&EXC)     VALUE('05600030   ')
                  CHGVAR VAR(&LOC)     VALUE('KUNDE4  ')
             ENDDO

/*  Skaper linje                                                     */

             CRTLINSDLC LIND(&LIN) RSRCNAME(&RES) ONLINE(*YES) +
                          ROLE(*SEC) CNN(*SWTPP) EXCHID(&EXL) +
                          LINESPEED(2400) AUTODIAL(*YES) +
                          DIALCMD(*V25BIS) STNADR(01) DUPLEX(*FULL) +
                          TEXT('Oppringt linje mot ASP-Gj√∏vik')

/*  Skaper controller                                                */

             CRTCTLAPPC CTLD(&CTL) LINKTYPE(*SDLC) SWITCHED(*YES) +
                          APPN(*NO) SWTLINLST(&LIN) MAXFRAME(521) +
                          RMTNETID(*NONE) EXCHID(&EXC) +
                          INLCNN(*DIAL) CNNNBR(':61180451') +
                          ROLE(*PRI) STNADR(01) TEXT('Controller +
                          for oppringt linje til ASP')

/*  Skaper device                                                    */

             CRTDEVAPPC DEVD(&DEV) RMTLOCNAME(ASP) +
                          LCLLOCNAME(&LOC) RMTNETID(*NONE) +
                          CTL(&CTL) APPN(*NO) TEXT('Device mot +
                          ASP') AUT(*ALL)

/*  Kobler til dev,ctl og lin.                                       */

             VRYCFG     CFGOBJ(&LIN) CFGTYPE(*LIN) STATUS(*ON)
             VRYCFG     CFGOBJ(&CTL) CFGTYPE(*CTL) STATUS(*ON)

ENDPGM
