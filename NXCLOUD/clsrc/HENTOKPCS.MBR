      PGM
      DCL        VAR(&fil)  TYPE(*char) LEN(10)  value('OkPost    ')
      DCL        VAR(&lib)  TYPE(*char) LEN(10)
      DCL        VAR(&utf)  TYPE(*CHAR) LEN(20)
      DCL        VAR(&mem)  TYPE(*CHAR) LEN(10)
      DCL        VAR(&feil) TYPE(*CHAR) LEN(1)
      DCL        VAR(&svar) TYPE(*CHAR) LEN(1)
      DCL        VAR(&f3)   TYPE(*dec)  LEN(1 0)
      DCL        VAR(&m1)   TYPE(*CHAR) LEN(50)
      DCL        VAR(&m2)   TYPE(*CHAR) LEN(50)
      DCL        VAR(&dir)  TYPE(*CHAR) LEN(60)
/*                                                                   */

logok:
      rtvdtaara  dtaara(*lda (934 10)) rtnvar(&lib)
      rtvdtaara  dtaara(*lda (911 10)) rtnvar(&mem)
/*    Henter inn fil fra IFS-omr√•det                                 */
/*    call       pgm(hentifs)  parm(&fil &lib &mem &dir &utf)        */
/*    if         cond(&utf *eq 'Avbrudd') then(do)                   */
/*      goto     cmdlbl(end)                                         */
/*    enddo                                                          */
/*    Oppdaterere RTRA og RBUN fra okpost                            */
      ovrdbf     file(okpost)  tofile(*libl/okpost)  mbr(&mem)
      call       pgm(hentokpr)

      rtvdtaara  dtaara(*lda (1 1))  rtnvar(&feil)
      if         cond(&feil *eq 'J') then(do)
        call     pgm(uppdifsc)  parm(&dir &utf)
        chgvar   var(&m1) value('En eller flere linjer inneholder feil ')
        chgvar   var(&m2) value('Se innlest regneark etter feil ')
        call     pgm(aa007r)  parm(&m1 &m2 &svar &f3)
      enddo


end:  ENDPGM
