             PGM        PARM(&DIRE &FILE &ZIPF &NFIL)

/* Definering av parametre.                                          */

             DCL        VAR(&DIRE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&FILE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&NFIL) TYPE(*CHAR) LEN(50)
             DCL        VAR(&ZIPF) TYPE(*CHAR) LEN(1)

/* Definering av variable                                            */

             DCL        VAR(&DLIB) TYPE(*CHAR) LEN(10)  VALUE('ADBXXX')
             DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3)
             DCL        VAR(&VARX) TYPE(*CHAR) LEN(1)

             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(END))

/* Legger dummy-verdi bakerst i parametrene for Ã¥ forhinde           */
/* forurensning av parametrene ved submitting                        */

             CHGVAR     VAR(&DIRE) VALUE(%SUBSTRING(&DIRE 1 49) *CAT +
                          '*')
             CHGVAR     VAR(&FILE) VALUE(%SUBSTRING(&FILE 1 49) *CAT +
                          '*')
             CHGVAR     VAR(&NFIL) VALUE(%SUBSTRING(&NFIL 1 49) *CAT +
                          '*')

/* Setter biblioteksliste                                            */

             CHGVAR     VAR(&FGRP) VALUE(%SUBSTRING(&DLIB 4 3))

             CALL       PGM(AA720C) PARM(&FGRP)

/* Setter current library                                            */

             CHGCURLIB  CURLIB(&DLIB)

/* Kaller program for behandling av mottatt fil                      */

             SBMJOB     CMD(CALL PGM(CR701C) PARM(&DIRE &FILE &ZIPF +
                          &NFIL)) JOB(OPD_NIBRLX) +
                          JOBQ(QGPL/ASP_SINGEL) MSGQ(*NONE)

 END:        ENDPGM
