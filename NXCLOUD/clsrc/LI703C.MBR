             PGM

/* Initiering av parametre.                                          */

             DCL        VAR(&OVRF) TYPE(*CHAR) LEN(10) +
                          VALUE('NBSEDIHNT ')
             DCL        VAR(&FILN)  TYPE(*CHAR) LEN(20)
             DCL        VAR(&STAT)  TYPE(*CHAR) LEN(1)
             DCL        VAR(&SMSG)  TYPE(*CHAR) LEN(1) VALUE('1')

/* Bygger temporær fil for mottak - avbryter om den allerede finnes  */

             CRTPF      FILE(*CURLIB/LEDITMP) RCDLEN(80) SIZE(*NOMAX)
             MONMSG     MSGID(CPF7302) EXEC(DO)
             CLRPFM     FILE(LEDITMP)
             ENDDO
             MONMSG     MSGID(CPF5813) EXEC(DO)
             CLRPFM     FILE(LEDITMP)
             ENDDO

/* Henter meldinger via FTP fra NBS                                  */

             CALL       PGM(AF700C) PARM(&OVRF &STAT &FILN &SMSG)

/* Kopierer temporær fil til mottaksfil                              */

             CPYF       FROMFILE(*LIBL/LEDITMP) TOFILE(LWERPF) +
                          MBROPT(*ADD) FMTOPT(*NOCHK)
             MONMSG     MSGID(CPF2869)
             MONMSG     MSGID(CPF2817)

             DLTF       FILE(LEDITMP)

 END:        ENDPGM
