/*                                                                  */

              PGM

              dcl        var(&fgr)    type(*char)  len(3)
              dcl        var(&usr)    type(*char)  len(10)
              dcl        var(&end)    type(*char)  len(10)
              dcl        var(&mbrsz)  type(*dec)   len(10 0)
              dcl        var(&grp)    type(*char)  len(10)
              dcl        var(&lib)    type(*char)  len(10)

              rtvdtaara  dtaara(*lda (931 3)) rtnvar(&fgr)
              chgvar     var(&usr)  value('ASP_' *tcat &fgr)
              chgvar     var(&lib)  value('ADB' *tcat &fgr)
              rtvusrprf  usrprf(&usr)  grpprf(&grp)

              addlible   lib(nxcloud)
              monmsg     msgid(cpf2103)
              addlible   lib(nxkorr)
              monmsg     msgid(cpf2103)
              addlible   lib(nxc_bygg)
              monmsg     msgid(cpf2103)
/*   ABYGPF  skal heretter ligge i ADB  og v√¶re felles    */
              chkobj     obj(adb/abygpf) objtype(*file)
              monmsg     msgid(cpf9801)  exec(do)
                cpyf     fromfile(nxc_bygg/abygpf) +
                         tofile(adb/abygpf) +
                         crtfile(*yes)
                call     ag916c ('ABYGPF    ' &fgr &grp ' ')
              enddo
              chkobj     obj(adb/abyglu) objtype(*file)
              monmsg     msgid(cpf9801)  exec(do)
                call     ag916c ('ABYGPF    ' &fgr &grp ' ')
              enddo
/*   ABYGPF  slettes fra *curlib                          */
              dltf       file(&lib/abyg*)
              monmsg     msgid(cpf0000)
/*   ABYDPF  sklal ligge i ADBxxx                         */
              chkobj     obj(&lib/abydpf) objtype(*file)
              monmsg     msgid(cpf9801)  exec(do)
                call     ag916c ('ABYDPF    ' &fgr &grp ' ')
              enddo

/*  Hent over ev nye linjer fra NXC_BYGG til eksisterende ABYGPF i filgruppa  */
                call     pgm(opdwizc)

              chgdtaara  dtaara(*curlib/byggfgr (1 3)) value(&fgr)
              monmsg     msgid(cpf1015) exec(do)
                crtdtaara  dtaara(*curlib/byggfgr) type(*char) len(100) +
                           value(&fgr) text('Filgruppe som er under +
                           bygging')
              enddo

/*  ENDJOBWIZ                        */
              chkobj     obj(*curlib/endjobwiz) objtype(*file)
              monmsg     msgid(cpf9801)  exec(do)
                crtpf    file(*curlib/endjobwiz) rcdlen(512)
              enddo

/*  jobscdwiz                        */
              chkobj     obj(*curlib/jobscdwiz) objtype(*file)
              monmsg     msgid(cpf9801)  exec(do)
                crtpf    file(*curlib/jobscdwiz) rcdlen(512)
              enddo

/*  CMPASKUND                        */
              chkobj     obj(*curlib/cmpaskund) objtype(*file)
              monmsg     msgid(cpf9801)  exec(do)
                crtpf    file(*curlib/cmpaskund) rcdlen(512)
              enddo

/*  GENFST                           */
              chkobj     obj(*curlib/genfst) objtype(*file)
              monmsg     msgid(cpf9801)  exec(do)
                cpyf       fromfile(*libl/genfst) +
                          tofile(*curlib/genfst) crtfile(*yes)
              enddo

              ovrdbf     file(abygl1) tofile(adb/abygl1)
              ovrdbf     file(abygl2) tofile(adb/abygl2)
              ovrdbf     file(abyglr) tofile(adb/abyglr)
              ovrdbf     file(abyglu) tofile(adb/abyglu)

              call       ab100r
              rtvdtaara  dtaara(*lda (1 10)) rtnvar(&end)
              if         cond(&end *eq 'SIGNOFF') then(signoff)

  END:        ENDPGM

