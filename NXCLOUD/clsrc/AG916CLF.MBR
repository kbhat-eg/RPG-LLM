/* Oppretting av index  på en eksisterende PF-fil      */

           PGM        PARM(&FILE &FGRP &GRP &NULL)

           DCL        VAR(&FILE) TYPE(*CHAR) LEN(10)
           DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3)
           DCL        VAR(&GRP)  TYPE(*CHAR) LEN(10)
           DCL        VAR(&NULL) TYPE(*CHAR) LEN(1)
           DCL        VAR(&asp)  TYPE(*CHAR) LEN(10)  value('ASP_')
           DCL        VAR(&DLIB) TYPE(*CHAR) LEN(10)
           DCL        VAR(&sfil) TYPE(*CHAR) LEN(10)

           call       pgm(getdlib)  parm(&file &dlib &sfil &fgrp)


/* Slett index i tilfelle den skulle finnes fra før                  */
           DLTF       FILE(&dlib/&file)
           monmsg     msgid(cpf0000)

           CRTLF      FILE(&DLIB/&file) SRCFILE(&sfil) +
                        MAXMBRS(*NOMAX) SRTSEQ(*LANGIDUNQ) +
                        LANGID(NOR)
           MONMSG     MSGID(CPF7302) exec(do)
             chgvar   var(&null)  value('X')
             goto     cmdlbl(end)
           enddo

           chgvar    var(%sst(&asp 5 3)) value(&fgrp)

           rvkobjaut obj(&dlib/&file) objtype(*file) user(qdftown) aut(*all)
           rvkobjaut obj(&dlib/&file) objtype(*file) user(&asp)    aut(*all)
           rvkobjaut obj(&dlib/&file) objtype(*file) user(*all)    aut(*all)

           grtobjaut obj(&dlib/&file) objtype(*file) user(&grp)    aut(*all)
           grtobjaut obj(&dlib/&file) objtype(*file) user(*public) aut(*exclude)

 END:      ENDPGM
