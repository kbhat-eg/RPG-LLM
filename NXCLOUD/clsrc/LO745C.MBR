             pgm        parm(&filg)

             dcl        var(&filg) type(*char) len(3)
             dcl        var(&dbib) type(*char) len(6) value('ADBxxx')
             dcl        var(&tim)  type(*char) len(20)
             dcl        VAR(&gre)  type(*char) len(4) value('2300')
             dcl        VAR(&int)  type(*char) len(6) value('000060')

/* Endre i parm til rette filgruppe */
             CALL       PGM(AA720C) PARM(&filg)

/* Endre her også, AA720C gir ikke alltid riktig filgruppe */

             chgvar     var(%sst(&dbib 4 3)) value(&filg)
             chgcurlib  curlib(&dbib)

 nyles:      call       pgm(LO745R) parm('B')   /* Blueridge */
             call       pgm(LO745R) parm('S')   /* Salesdesk */
             call       pgm(LO745R) parm('P')   /* PDA       */

/* Sjekker om programmet skal avsluttes hvis ikke les på nytt      */

             rtvsysval  sysval(qtime) rtnvar(&tim)
             if         cond(%substring(&tim 1 4) *lt &gre) then(do)
                dlyjob     dly(&int)
                goto       cmdlbl(nyles)
             enddo

 end:        endpgm
