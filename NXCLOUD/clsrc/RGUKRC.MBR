
/*           Generere   kortfiler                                    */

 STRPGM:     PGM

             DCL        VAR(&DBIB) TYPE(*CHAR) LEN(6) VALUE('ADBxxx')

             DCL        VAR(&RGPF) TYPE(*CHAR) LEN(6) VALUE('RUKRPF')
             DCL        VAR(&RGLR) TYPE(*CHAR) LEN(6) VALUE('RUKRLR')
             DCL        VAR(&RGLU) TYPE(*CHAR) LEN(6) VALUE('RUKRLU')
             DCL        VAR(&RGL1) TYPE(*CHAR) LEN(6) VALUE('RUKRL1')
             DCL        VAR(&RGL2) TYPE(*CHAR) LEN(6) VALUE('RUKRL2')
             DCL        VAR(&RGL3) TYPE(*CHAR) LEN(6) VALUE('RUKRL3')
             DCL        VAR(&RGL4) TYPE(*CHAR) LEN(6) VALUE('RUKRL4')
             DCL        VAR(&RGL5) TYPE(*CHAR) LEN(6) VALUE('RUKRL5')

             DCL        VAR(&BKPF) TYPE(*CHAR) LEN(6) VALUE('BOKKPF')
             DCL        VAR(&BKLR) TYPE(*CHAR) LEN(6) VALUE('BOKKLR')
             DCL        VAR(&BKLU) TYPE(*CHAR) LEN(6) VALUE('BOKKLU')
             DCL        VAR(&BKL1) TYPE(*CHAR) LEN(6) VALUE('BOKKL1')
             DCL        VAR(&BKL2) TYPE(*CHAR) LEN(6) VALUE('BOkkL2')
             DCL        VAR(&BKL3) TYPE(*CHAR) LEN(6) VALUE('BOKKL3')
             DCL        VAR(&BKL4) TYPE(*CHAR) LEN(6) VALUE('BOKKL4')
             DCL        VAR(&BKL5) TYPE(*CHAR) LEN(6) VALUE('BOKKL5')

             DCL        VAR(&RSPF) TYPE(*CHAR) LEN(6) VALUE('RUKSPF')
             DCL        VAR(&RSLR) TYPE(*CHAR) LEN(6) VALUE('RUKSLR')
             DCL        VAR(&RSLU) TYPE(*CHAR) LEN(6) VALUE('RUKSLU')
             DCL        VAR(&RSL1) TYPE(*CHAR) LEN(6) VALUE('RUKSL1')

             DCL        VAR(&DNBP) TYPE(*CHAR) LEN(8) VALUE('XMLDNBPF')
             DCL        VAR(&LOGP) TYPE(*CHAR) LEN(8) VALUE('XMLLOGPF')
             DCL        VAR(&GRLP) TYPE(*CHAR) LEN(8) VALUE('XMLGRLPF')
             DCL        VAR(&MAXP) TYPE(*CHAR) LEN(8) VALUE('XMLMAXPF')
             DCL        VAR(&GMOP) TYPE(*CHAR) LEN(8) VALUE('GEMONBPF')

             DCL        VAR(&SFIL) TYPE(*CHAR) LEN(6) VALUE('BBKKSQ')

/*           Setter bibliotek til current                            */

             CHGCURLIB  CURLIB(&DBIB)

/*           Starter å opprette filer                                */
/* PF        Kundekort informasjon                                   */
             CRTPF      FILE(&DBIB/&RGPF) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LU                                                             */

             CRTLF      FILE(&DBIB/&RGLU) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LR                                                             */

             CRTLF      FILE(&DBIB/&RGLR) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L1                                                             */

             CRTLF      FILE(&DBIB/&RGL1) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L2                                                             */

             CRTLF      FILE(&DBIB/&RGL2) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L3                                                             */

             CRTLF      FILE(&DBIB/&RGL3) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L4                                                             */

             CRTLF      FILE(&DBIB/&RGL4) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L5                                                             */

             CRTLF      FILE(&DBIB/&RGL5) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* PF        Kvitteringsfil for salg                                 */
             CRTPF      FILE(&DBIB/&BKPF) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LU                                                             */

             CRTLF      FILE(&DBIB/&BKLU) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LR                                                             */

             CRTLF      FILE(&DBIB/&BKLR) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L1                                                             */

             CRTLF      FILE(&DBIB/&BKL1) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L2                                                             */

             CRTLF      FILE(&DBIB/&BKL2) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L3                                                             */

             CRTLF      FILE(&DBIB/&BKL3) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L4                                                             */

             CRTLF      FILE(&DBIB/&BKL4) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L5                                                             */

             CRTLF      FILE(&DBIB/&BKL5) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* PF        Kortinformasjon pr. kunde                               */
             CRTPF      FILE(&DBIB/&RSPF) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LU                                                             */

             CRTLF      FILE(&DBIB/&RSLU) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:LR                                                             */

             CRTLF      FILE(&DBIB/&RSLR) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* LF:L1                                                             */

             CRTLF      FILE(&DBIB/&RSL1) +
                          SRCFILE(*LIBL/QDDFSRC) MAXMBRS(*NOMAX) +
                          SRTSEQ(*LANGIDUNQ)     LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* PF        XML BM Kort overføringsformat                           */
             CRTPF      FILE(&DBIB/&DNBP) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* PF        XML loggfil                                             */
             CRTPF      FILE(&DBIB/&LOGP) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* PF        XML oppsamling grunnlag                                 */
             CRTPF      FILE(&DBIB/&GRLP) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* PF        XML Maxbo overføringsformat                             */
             CRTPF      FILE(&DBIB/&MAXP) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

/* PF        GE Moneybank                                            */
             CRTPF      FILE(&DBIB/&GMOP) +
                          SRCFILE(*LIBL/QDDFSRC) SRCMBR(*FILE) +
                          MAXMBRS(*NOMAX) SIZE(*NOMAX) +
                          REUSEDLT(*YES)  SRTSEQ(*LANGIDUNQ) +
                          LANGID(NOR)
             MONMSG     MSGID(CPF7302)

 /* NBBL overføringsformat                                            */
             CHKOBJ     OBJ(*LIBL/KORTITUM) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             CRTPF      FILE(KORTITUM) RCDLEN(200) +
                          TEXT('Utlegg av korttransaksjoner       +
                           inn') MAXMBRS(*NOMAX)
             ENDDO

/* Kjører SQL-statements for oppretting av tabell og indekser        */

             RUNSQLSTM  SRCFILE(ASKORT610X/QSQLSRC) SRCMBR(&SFIL) +
                          NAMING(*SYS) DECMPT(*COMMA) +
                          SRTSEQ(*LANGIDUNQ) LANGID(NOR)

/* Starter journalføring av de filene som trengs                     */

             STRJRNPF FILE(&DBIB/BOKKPF) JRN(&DBIB/BUTIJRN)    +
                          OMTJRNE(*OPNCLO)
             MONMSG   MSGID(CPF7030)

             STRJRNPF FILE(&DBIB/BBKKST) JRN(&DBIB/BUTIJRN)    +
                          OMTJRNE(*OPNCLO)
             MONMSG   MSGID(CPF7030)

             STRJRNPF FILE(&DBIB/RUKRPF) JRN(&DBIB/BUTIJRN)    +
                          OMTJRNE(*OPNCLO)
             MONMSG   MSGID(CPF7030)

 ENDPGM:     ENDPGM
