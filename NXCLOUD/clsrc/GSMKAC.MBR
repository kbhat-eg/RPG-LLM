
/*           Generere Smartkalk filer                                */

 STRPGM:     PGM        parm(&DBIB)

             DCL        VAR(&DBI2) TYPE(*CHAR) LEN(6)
             DCL        VAR(&DBIB) TYPE(*CHAR) LEN(6)

             DCL        VAR(&SFI1) TYPE(*CHAR) LEN(6) VALUE('OPEFSQ') /*Filgrp*/
             DCL        VAR(&SFI2) TYPE(*CHAR) LEN(6) VALUE('KEYSSQ') /*ADB*/

             chgvar  var(&dbi2) value('ADB')

/*           Setter bibliotek til current                            */

             CHGCURLIB  CURLIB(&DBIB)

/*           Starter å opprette filer                                */

/* Kjører SQL-statements for oppretting av tabell og indekser        */

             CHKOBJ     OBJ(&DBIB/OPEFST) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             RUNSQLSTM  SRCFILE(*libl/QSQLSRC) SRCMBR(&SFI1) +
                          NAMING(*SYS) DECMPT(*COMMA) +
                          SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             ENDDO

             CHGCURLIB  CURLIB(&DBI2)

             CHKOBJ     OBJ(&DBI2/KEYSST) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             RUNSQLSTM  SRCFILE(*libl/QSQLSRC) SRCMBR(&SFI2) +
                          NAMING(*SYS) DECMPT(*COMMA) +
                          SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             ENDDO

/* Starter journalføring av de filene som trengs                     */

             STRJRNPF FILE(&DBIB/OPEFST) JRN(&DBIB/BUTIJRN)    +
                          OMTJRNE(*OPNCLO)
             MONMSG   MSGID(CPF7030)

             STRJRNPF   FILE(&DBI2/KEYSST) JRN(&DBI2/BUTIJRN) OMTJRNE(*OPNCLO)
             MONMSG   MSGID(CPF7030)

 ENDPGM:     ENDPGM
