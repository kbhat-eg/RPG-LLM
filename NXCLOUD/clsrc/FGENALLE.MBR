
/*           Bestille   Rapporter til Altin                          */

 strpgm:     pgm

             dcl        var(&f1)    type(*char) len(10)  value('NXLOPF    ')
             dcl        var(&f2)    type(*char) len(10)  value('RMVXPF    ')
             dcl        var(&f3)    type(*char) len(10)  value('          ')
             dcl        var(&f4)    type(*char) len(10)  value('          ')
             dcl        var(&f5)    type(*char) len(10)  value('          ')
             dcl        var(&f6)    type(*char) len(10)  value('          ')
             dcl        var(&fx)    type(*char) len(10)
             dcl        var(&li)    type(*char) len(10)
             dcl        var(&sy)    type(*char) len(10)
             dcl        var(&gr)    type(*char) len(10)

             dclf       file(afgrst)

             rtvneta    sysname(&sy)

rcv:         rcvf
             monmsg     msgid(cpf0864) exec(goto end)

             if         cond(&afgsrv *eq &sy) then(do)
               if       cond(&afgver *eq '800') then(do)

               if       cond(&f1 *ne ' ') then(do)
                 chgvar   var(&fx)  value(&f1)
                 CallSubr subr(Kopier)
               enddo

               if       cond(&f2 *ne ' ') then(do)
                 chgvar   var(&fx)  value(&f2)
                 CallSubr subr(Kopier)
               enddo

               if       cond(&f3 *ne ' ') then(do)
                 chgvar   var(&fx)  value(&f3)
                 CallSubr subr(Kopier)
               enddo

               if       cond(&f4 *ne ' ') then(do)
                 chgvar   var(&fx)  value(&f4)
                 CallSubr subr(Kopier)
               enddo

               if       cond(&f5 *ne ' ') then(do)
                 chgvar   var(&fx)  value(&f5)
                 CallSubr subr(Kopier)
               enddo

               if       cond(&f6 *ne ' ') then(do)
                 chgvar   var(&fx)  value(&f6)
                 CallSubr subr(Kopier)
               enddo

              enddo
             enddo

             goto     cmdlbl(rcv)

/* ______________________________________________________________________*/
Subr         Subr(Kopier)
             chgvar   var(&li)  value('ADB' *cat &afgfgr)
             chgvar   var(&gr)  value('GRP_' *cat &afgfgr)

             call       pgm(AG916c) parm+
                        (&fx &afgfgr &gr ' ')
EndSubr
/* ______________________________________________________________________*/


end:         endpgm
