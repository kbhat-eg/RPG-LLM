/*                                                                   */
/*-------------------------------------------------------------------*/
/* Program for å opprette alt SQL, dvs trigger, index osv            */
/*                                                                   */
/* 8.01 021025 bsa Lagt inn oppdatering fra GIT HUB                  */
/*                                                                   */
/*                                                                   */
/*                                                                   */
/*                                                                   */
/* eks: CALL SQLCRT PARM('630' 'ADBLVR630' 'A40' 'VVARPF' '3')       */
/*                                                                   */
/*   hva:                                                            */
/*        0:  gjør alt: opprett SP, kjør, slett SP                   */
/*        1:  opprett SP                                             */
/*        2:  slett SP                                               */
/*        3:  kjør SP                                                */


/*              PGM        parm(&FGRP_P &LVRB_P &ENVB_P &TBLE_P &HVA_P)       */
             PGM

 /* Parametre                                                         */
             DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3)
             DCL        VAR(&LVRB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&ENVB) TYPE(*CHAR) LEN(3)
             DCL        VAR(&VERS) TYPE(*CHAR) LEN(3) value('800')
             DCL        VAR(&VER)  TYPE(*DEC)  LEN(3 0)
             DCL        VAR(&SCRIPT)      TYPE(*CHAR) LEN(100)
             DCL        VAR(&sys)         TYPE(*CHAR) LEN(12)

             RTVDTAARA  DTAARA(*LDA (931 3)) RTNVAR(&FGRP)
             RTVDTAARA  DTAARA(*LDA (1003 3)) RTNVAR(&ENVB)
 /*          RTVOBJD    OBJ(JVARPF) OBJTYPE(*FILE) RTNLIB(&LVRB)      */

             RTVNETA    SYSNAME(&SYS)
 /*          call       pgm(AR701R) parm(&sys &fgrp &VERs)            */

  /*         CHGVAR     VAR(&VERS) VALUE(%CHAR(&VER))    */

 /* Oppdaterer scriptet fra GIT HUB                                      */
 /*8.01*/    QSH CMD('/home/asp/nexstepRpgPull.sh')


             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_drop_env_' *CAT &VERS *CAT +
                          '.sql'  )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_drop_lvr_' *CAT &VERS *CAT +
                          '.sql'  )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_trg_drop_' *CAT &VERS *CAT +
                          '.sql'     )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_drop_' *CAT &VERS *CAT '.sql' +
                          )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_view_drop_' *CAT &VERS *CAT +
                          '.sql'    )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_2dp_drop_' *CAT &VERS *CAT +
                          '.sql'  )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_create_env_' *CAT &VERS *CAT +
                          '.sql')
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_2dp_create_' *CAT &VERS *CAT +
                          '.sql')
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS)  +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_create_lvr_' *CAT &VERS *CAT +
                          '.sql')
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_ix_create_' *CAT &VERS *CAT +
                          '.sql'    )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)
             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_trg_create_' *CAT &VERS *CAT +
                          '.sql'   )
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)

/*  VIEW i QSQLSRC                                                            */
/*              RUNSQLSTM  SRCFILE(QSQLSRC) SRCMBR(NXVIEWS) COMMIT(*NONE) +   */
/*                           NAMING(*SYS) DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) + */
/*                           LANGID(NOR)                                      */

             CHGVAR     VAR(&SCRIPT) VALUE('/home/asp/nx_script/' *CAT +
                          &VERS *CAT '/sp_view_create_' *CAT &VERS *CAT +
                          '.sql')
             CHGATR     OBJ(&SCRIPT) ATR(*CCSID) VALUE(1208)
             RUNSQLSTM  SRCSTMF(&SCRIPT) COMMIT(*NONE) NAMING(*SYS) +
                          DECMPT(*COMMA) SRTSEQ(*LANGIDUNQ) LANGID(NOR)

 END:        ENDPGM

