             PGM

/* Initiering av parametre.                                          */

             DCL        VAR(&OVRF) TYPE(*CHAR) LEN(10) +
                          VALUE('IBMBNKHNT ')
             DCL        VAR(&FILN)  TYPE(*CHAR) LEN(20)
             DCL        VAR(&STAT)  TYPE(*CHAR) LEN(1)
             DCL        VAR(&SMSG)  TYPE(*CHAR) LEN(1) VALUE('1')

/* Klargjør filer før mottak                                         */

             CRTPF      FILE(*CURLIB/GRETTMP) RCDLEN(80)
             MONMSG     MSGID(CPF7302) EXEC(DO)
             CLRPFM     FILE(GRETTMP)
             ENDDO

/* Henter meldinger via FTP fra IBM                                  */

             CALL       PGM(AF700C) PARM(&OVRF &STAT &FILN &SMSG)

/* Kopierer temporær fil til mottaksfil og sletter den               */

             CPYF       FROMFILE(*LIBL/GRETTMP) TOFILE(GRETPF) +
                          MBROPT(*ADD) FMTOPT(*NOCHK)
             MONMSG     MSGID(CPF2869)
             MONMSG     MSGID(CPF2817)

             DLTF       FILE(GRETTMP)

 END:
             ENDPGM
