             PGM        PARM(&LIST &BMID)

/* Initiering av parametre.                                          */

             DCL        VAR(&LIST) TYPE(*CHAR) LEN(128)
/*           DCL        VAR(&WSID) TYPE(*CHAR) LEN(10)                */
             DCL        VAR(&WALI) TYPE(*DEC)  LEN(2 0)
             DCL        VAR(&WAPO) TYPE(*DEC)  LEN(2 0)
             DCL        VAR(&MLD1) TYPE(*CHAR) LEN(40)
             DCL        VAR(&MLD2) TYPE(*CHAR) LEN(40)
             DCL        VAR(&CLIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&EMLD) TYPE(*CHAR) LEN(70)
             DCL        VAR(&POST) TYPE(*CHAR)  LEN(1)
             DCL        VAR(&STAT) TYPE(*CHAR) LEN(1)
             DCL        VAR(&BMID) TYPE(*CHAR) LEN(15)

             CHGVAR     VAR(&EMLD) VALUE('Feil har oppstått under +
                          innlesing av budsjett. Sjekk feilliste! ')

/* Test om div. register finnes                                      */

             CHKOBJ     OBJ(*LIBL/KORTITUM) OBJTYPE(*FILE)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             CRTPF      FILE(KORTITUM) RCDLEN(200) +
                          TEXT('Utlegg av korttransaksjoner       +
                           inn') MAXMBRS(*NOMAX)
             ENDDO

/* Sletter evnt gammelt innhold hvis finnes fra før                  */

             CLRPFM     FILE(KORTITUM)

             RTVJOBA    CURLIB(&CLIB)

/* Varselbilde 2                                                     */

             CHGVAR     VAR(&WALI) VALUE(4)
             CHGVAR     VAR(&WAPO) VALUE(44)
             CHGVAR     VAR(&MLD1) VALUE('Vennligst vent litt .....')
             CHGVAR     VAR(&MLD2) VALUE('Korttranser legges ut....')
/*           CALL       PGM(AA006C)  PARM(&WALI &WAPO &MLD1 &MLD2)   */

/* Kaller program                                                    */
             CHGVAR     VAR(&POST) VALUE('0')

             CALL       PGM(RF813R) PARM(&LIST &POST)
             MONMSG     MSGID(CPF0000)

/* Avslutter hvis vi ikke har funnet noen poster                    */
             IF         COND(&POST *EQ '0') THEN(GOTO CMDLBL(END))

/* Starter overføring av file til Itum                              */
             CALL       PGM(RF826C_SBM) PARM(&BMID &STAT)

/* Sender melding                                                    */

/*           RTVDTAARA  DTAARA(*LDA (901 10)) RTNVAR(&WSID)          */
/*           SNDBRKMSG  MSG('NBBL: Kortfil er ferdig generert') +    */
/*                        TOMSGQ(&WSID)                              */

 END:        ENDPGM
