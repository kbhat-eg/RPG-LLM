             PGM        parm(&fradoc &framap &tillib &tilfil &tilmbr &sts)

/* Initiering av parametre.                                          */

             DCL        VAR(&fradoc) TYPE(*char) LEN(30)
             DCL        VAR(&framap) TYPE(*char) LEN(30)
             DCL        VAR(&tillib) TYPE(*CHAR) LEN(10)
             DCL        VAR(&tilfil) TYPE(*CHAR) LEN(10)
             DCL        VAR(&tilmbr) TYPE(*CHAR) LEN(10)
             DCL        VAR(&sts)    TYPE(*CHAR) LEN(08)
             DCL        VAR(&stmf)   TYPE(*CHAR) LEN(70)
             DCL        VAR(&tilf)   TYPE(*CHAR) LEN(70)
             DCL        VAR(&antrec) TYPE(*dec)  LEN(10 0)
             dcl        var(&m1m1)   type(*char) len(50)
             dcl        var(&m1m2)   type(*char) len(50)
             dcl        var(&m1svar) type(*char) len(1)
             dcl        var(&wpin12) type(*dec)  len(1 0)

/* Kopierer fra IFS                                               */

             chgvar     var(&stmf) value(&fradoc)
             if         cond(&framap *ne ' ') then(do)
                chgvar     var(&stmf) value(&framap *tcat '/' *tcat +
                             &fradoc)
             enddo
             if         cond(&tillib *eq '*libl') then(do)
                rtvjoba    curlib(&tillib)
             enddo
             if         cond(&tillib *eq '*LIBL') then(do)
                rtvjoba    curlib(&tillib)
             enddo
             if         cond(&tillib *eq '*curlib') then(do)
                rtvjoba    curlib(&tillib)
             enddo
             if         cond(&tillib *eq '*CURLIB') then(do)
                rtvjoba    curlib(&tillib)
             enddo
             clrpfm     file(&tillib/wovftmp)
             monmsg     msgid(cpf3142) exec(do)
                crtpf      file(&tillib/wovftmp) rcdlen(1024) aut(*all)
             enddo
             chgpf      file(&tillib/wovftmp) size(*nomax)
             chgvar     var(&tilf) value('/qsys.lib/' *tcat &tillib *tcat +
                          '.lib/wovftmp.file/' *tcat 'wovftmp.mbr')

             cpyfrmstmf fromstmf(&stmf) tombr(&tilf) mbropt(*replace)
             monmsg     msgid(cpfA0A9 cpfa095) exec(do)
                chgvar     var(&m1m1) value('Følgende fil ble ikke +
                             funnet:')
                chgvar     var(&m1m2) value(&stmf)
                chgvar     var(&m1svar) value('N')
                call       pgm(AA007R)  parm(&m1m1 &m1m2 &m1svar &wpin12)
                chgvar     var(&sts)   value('F')
                goto       cmdlbl(end)
             enddo

             if         cond(&sts *ne 'A') then(do)
                cpyf       fromfile(&tillib/wovftmp) +
                             tofile(&tillib/&tilfil) tombr(&tilmbr) +
                             mbropt(*replace) fmtopt(*nochk)
             enddo
             if         cond(&sts *eq 'A') then(do)
                cpyf       fromfile(&tillib/wovftmp) +
                             tofile(&tillib/&tilfil) tombr(&tilmbr) +
                             mbropt(*add) fmtopt(*nochk)
             enddo
             chgvar     var(&sts)   value(' ')
             rtvmbrd    file(&tillib/&tilfil) mbr(&tilmbr) +
                          nbrcurrcd(&antrec)
             if         cond(&antrec *eq 0) then(do)
                chgvar     var(&sts)   value('TOM FIL')
                goto       cmdlbl(end)
             enddo

/*    Disse spes den andre må testes dersom dette skal gjøres    */
/*           mov        obj(&stmff)      */
/*           dltdlo     dlo(&xxxxx) flr(&bane) */

 END:        ENDPGM
