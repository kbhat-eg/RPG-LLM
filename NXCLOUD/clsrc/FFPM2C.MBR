/*                                                                 */
/*    Rydder opp i alle tomme membere i FPM2PF                     */
/*                                                                 */
      PGM        parm(&filg)

      dcl        var(&filg)   type(*char) len(6)
/*                                                                   */
      dclf       file(fpm2m)

/* ----------------------------------------------------------------- */
/*   Ta ut status over jobbene                    QBATCH             */
/* ----------------------------------------------------------------- */

     dltf        file(&filg/fpm2m)
      monmsg     msgid(cpf0000)
     dspfd       file(*libl/fpm2pf) type(*mbrlist) output(*outfile) +
                 fileatr(*pf) outfile(&filg/fpm2m)


/*   Les fil for å sjekk om den inneholder memeber som burde vært ryddet */
rcv:  rcvf
      monmsg     msgid(cpf0864) exec(goto endpgm)
      if         cond((&mlname *ne 'FPM2PF') *and (&mlnrcd *eq 0)) then(do)
                 rmvm file(fpm2lu) mbr(&mlname)
                 monmsg msgid(cpf5815 cpf7310)
                 rmvm file(fpm2l1) mbr(&mlname)
                 monmsg msgid(cpf5815 cpf7310)
                 rmvm file(fpm2pf) mbr(&mlname)
                 monmsg msgid(cpf5815 cpf7310)
      enddo

      goto       cmdlbl(rcv)
/* ----------------------------------------------------------------- */
endpgm:          endpgm
