             PGM        PARM(&filg &firm &vare &pgiv &pkod +
                         &skod &lety &utparms)

             DCL        VAR(&filg) TYPE(*CHAR) LEN(10)
             DCL        VAR(&firm) TYPE(*DEC) LEN(3 0)
             DCL        VAR(&vare) TYPE(*CHAR) LEN(15)
             DCL        VAR(&pgiv) TYPE(*DEC) LEN(6 0)
             DCL        VAR(&pkod) TYPE(*CHAR) LEN(1)
             DCL        VAR(&skod) TYPE(*DEC) LEN(1 0)
             DCL        VAR(&lety) TYPE(*dec) LEN(1 0)
             DCL        VAR(&utparms) TYPE(*CHAR) LEN(1000)

             DCL        VAR(&FGRP) TYPE(*CHAR) LEN(3)
             DCL        VAR(&CFIR) TYPE(*CHAR) LEN(3)
             SNDMSG     MSG('Inne i XP750C') +
                          TOUSR(TEW560)

/* Setter biblioteksliste                                            */

             CHGVAR     VAR(&FGRP) VALUE(%SUBSTRING(&filg 4 3))
             CHGVAR     VAR(&CFIR) VALUE(&FIRM)

             CALL       PGM(ASPINI/AA724C) PARM(&FGRP)

             CHGCURLIB  CURLIB(&filg)
             CHGDTAARA  DTAARA(*LDA (944 3)) VALUE(&CFIR)

/* Starter transaksjon (commitment control)                          */

             STRCMTCTL  LCKLVL(*CHG) CMTSCOPE(*JOB)

/* Legg inn alt som skal skje under her.                             */
/* Ved feil i programmet SKAL man hoppe til ERR etter å ha satt      */
/* &STAT.                                                            */
/* Alle MONMSG skal evt hoppe til ERR!!!                             */
/* ================================================================= */

             CALL       PGM(*LIBL/XP750R) PARM(&FILG &FIRM &VARE &PGIV +
                         &pkod &skod &lety &utparms)
/*           MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(ERR))       */

/* ================================================================ */
/* Kjører COMMIT på database oppdateringer.                         */

             COMMIT

 END:
/* Skrur av commitment kontroll for jobben.                          */
/* Husk at standard handling er ROLLBACK hvis ikke COMMIT er kjørt.  */

             ENDCMTCTL

             RETURN

 ERR:

             ROLLBACK

/* Status SKAL være satt ved feil. E = generell feil                */

             GOTO       CMDLBL(END)

             ENDPGM
