/*  Programmet generer linje, controller og device for               */
/*  kommunikasjon mot ASP-Gjøvik                                     */
             PGM

/*  Skaper linje  - fysisk LIN011 brukes                             */

             CRTLINSDLC LIND(ASPLIN) RSRCNAME(LIN011) ONLINE(*YES) +
                          ROLE(*SEC) CNN(*SWTPP) EXCHID(05600001) +
                          LINESPEED(2400) AUTODIAL(*YES) +
                          DIALCMD(*V25BIS) STNADR(01) DUPLEX(*FULL) +
                          TEXT('Oppringt linje mot ASP-Gjøvik')

/*  Skaper controller - ringer 61180451                              */

             CRTCTLAPPC CTLD(ASPCTL) LINKTYPE(*SDLC) SWITCHED(*YES) +
                          APPN(*NO) SWTLINLST(ASPLIN) MAXFRAME(521) +
                          RMTNETID(*NONE) EXCHID(05600000) +
                          INLCNN(*DIAL) CNNNBR(':61180451') +
                          ROLE(*PRI) STNADR(01) TEXT('Controller +
                          for oppringt linje til ASP')

/*  Skaper device                                                    */

             CRTDEVAPPC DEVD(ASPDEV) RMTLOCNAME(ASP) +
                          LCLLOCNAME(KUNDE) RMTNETID(*NONE) +
                          CTL(ASPCTL) APPN(*NO) TEXT('Device mot +
                          ASP') AUT(*ALL)

/*  Sjekker om nødvendige subsystemer er i gang                      */

             STRSBS     SBSD(QSNADS)
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(NEXT))
 NEXT:       STRSBS     SBSD(QCMN)
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(START))

/*  Setter opp linje og controller klar for kommunikasjon            */

 START:      VRYCFG     CFGOBJ(ASPLIN) CFGTYPE(*LIN) STATUS(*ON)
             VRYCFG     CFGOBJ(ASPCTL) CFGTYPE(*CTL) STATUS(*ON)

             ENDPGM
