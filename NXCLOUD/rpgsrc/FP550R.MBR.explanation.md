```markdown
## Overview

This RPG (Report Program Generator) IV source code is for a program called `FP550R` designed to display a "special price note" (spesialpris notat) in an IBM i / AS400 environment. It primarily reads data from a database (physical file), populates variables, and displays the information on a workstation screen.

---

## Key Areas Explained

### 1. Header and Options

```rpg
     h option(*nodebugio) datedit(*dmy)
```
- **option(*nodebugio)**: Turns off debug input/output.
- **datedit(*dmy)**: Sets the default date format to day/month/year.

---

### 2. File Declarations

```rpg
     ffprnl1    if   e           k disk    rename(fprnpfr:fprnl1r)
     ffp550d    cf   e             workstn
```
- **fprnl1**: Input file, externally described, keyed access. The external file `fprnpfr` is renamed to `fprnl1r` for this program.
- **fp550d**: Display file (workstation). Used for screen input/output.

---

### 3. Data Declarations

#### a. Parameters

```rpg
     d p_firm          s                   like(fpnfir)
     d p_kund          s                   like(fpnkun)
     d p_kpro          s                   like(fpnkpr)
     d p_vare          s                   like(fpnvar)
```
- Four parameters are defined, matching the types of their respective fields. They are used to pass the keys (firm, customer, campaign/product, item) into the program.

#### b. User Space

```rpg
     d                uds
     d l_user                911    920
```
- Accesses the User Data Space, with `l_user` mapped to bytes 911â€“920.

#### c. Working Variables

```rpg
     d w_firm          s                   like(fpnfir)
     d w_kund          s                   like(fpnkun)
     d w_kpro          s                   like(fpnkpr)
     d w_vare          s                   like(fpnvar)
```
- Working storage variables, similar to the parameters, for use within the program.

---

### 4. Main Logic

The main logic reads as follows:

```rpg
     c     fprnl1_key    chain     fprnl1
     c                   if        not %found
     c                   goto      avslutt
     c                   endif
     c                   eval      c2nno1 = fpnno1
     c                   eval      c2nno2 = fpnno2
     c                   eval      c2nno3 = fpnno3
     c                   eval      c2nno4 = fpnno4
     c                   eval      c2nno5 = fpnno5
     c                   exfmt     c2bld
     c     avslutt       tag
     c                   eval      *inlr = *on
     c                   return
```

#### Step-by-Step:

1. **Keyed CHAIN:**  
   Performs a keyed read (CHAIN) using `fprnl1_key` (custom key list) on the `fprnl1` file.
2. **Check if record is found:**  
   If not found, it jumps to the `avslutt` (exit) tag.
3. **Populate Display Fields:**  
   The values `fpnno1` to `fpnno5` fields from the retrieved record are assigned to the corresponding display fields `c2nno1` to `c2nno5`.
4. **Display Screen:**  
   The `exfmt c2bld` operation is used to display the screen defined in the display file.
5. **Program Exit:**  
   At `avslutt`, sets on the LR (Last Record) indicator and returns, ending the program.

---

### 5. Subroutine: Program Initialization (`*inzsr`)

```rpg
     c     *inzsr        begsr
     c     *entry        plist
     c                   parm                    p_firm
     c                   parm                    p_kund
     c                   parm                    p_kpro
     c                   parm                    p_vare
     c     fprnl1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    w_kund
     c                   kfld                    w_kpro
     c                   kfld                    w_vare
     c                   eval      w_firm = p_firm
     c                   eval      w_kund = p_kund
     c                   eval      w_kpro = p_kpro
     c                   eval      w_vare = p_vare
     c                   endsr
```

#### Step-by-Step:

1. **Entry Parameters:**  
   The program receives four parameters, which are assigned to local working variables.
2. **Key List Setup (`fprnl1_key`):**  
   Defines the key fields (firm, customer, campaign, item) for record retrieval from `fprnl1`.
3. **Copy Parameters to Work Variables:**  
   Each parameter is moved to its corresponding working variable, ensuring correct record retrieval.

---

## Summary

- The program receives four key fields as parameters.
- It builds a file key and retrieves (`CHAIN`) a record from `fprnl1`.
- If found, it copies text fields to screen fields and displays them.
- If not found, or after display, the program exits cleanly.

---

## Key Takeaways for Onboarding

- **File IO:** Uses CHAIN for keyed access.
- **Parameters:** Program expects parameters and initializes key lists accordingly.
- **Screen Display:** Data is shown using a display file and the EXFMT operation.
- **Exit Handling:** Cleanly sets LR and returns.
- **Modularity:** Initialization is handled in a subroutine, keeping main logic clear.

This approach is typical in IBM i RPG programs for displaying selected database content based on user or system input keys.
```