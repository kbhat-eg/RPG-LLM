     h option(*nodebugio)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System. . . . . : ASSTAT
      * Program . . . . : SX823R
      * Beskrivelse . . : FIX: Oppdaterer med leverandør fra sletta
      *                   ordrelinjer
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       310821 bsa  Nytt program
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fsstal1    uf   e           k disk    rename(sstapfr:sstal1r)
     ffdeslx    if   e           k disk    rename(fdespfr:fdeslxr)
      *
      * Definering av LDA
      *
     d                uds
     d l_firm                944    946  0
      *
      * Definering av variable i nøkler
      *
     d sstal1_paar     s                   like(sfpaar)
     d sstal1_binr     s                   like(sfbinr)
     d sstal1_line     s                   like(sfline)
     d sstal1_bida     s                   like(sfbida)
     d fdeslx_numm     s                   like(fsnumm)
     d fdeslx_suff     s                   like(fssuff)
     d fdeslx_line     s                   like(fsline)
     d fdeslx_vare     s                   like(fsvare)
      *
      * Definering av variable
      *
     d w_date          s               d   datfmt(*iso)
      *
     d w_date_6        s              6  0
      *
     d w_firm          s                   like(sffirm)
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Hovedprogram
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c                   eval      sstal1_paar = 2021
     c                   eval      sstal1_binr = 4277377
     c                   eval      sstal1_line = 0
     c                   eval      sstal1_bida = *loval
     c     sstal1_key    setll     sstal1
     c     sstal1_key2   reade     sstal1r
     c                   dow       not %eof
      *
     c                   if        sfldor = 0
     c                   eval      fdeslx_numm = sfornr
     c                   eval      fdeslx_suff = sforsu
     c                   eval      fdeslx_line = sforli
     c                   eval      fdeslx_vare = sfvare
     c     fdeslx_key    chain     fdeslx
     c                   if        %found and
     c                             fsldor <> 0
     c                   eval      sfldor = fsldor
     c                   update    sstal1r
     c                   else
     c                   unlock    sstal1
     c                   endif
     c                   else
     c                   unlock    sstal1
     c                   endif
      *
     c     sstal1_key2   reade     sstal1r
     c                   enddo
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c                   eval      *inlr = *on
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Key for les og oppdatering av statistikk
      *
     c     sstal1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    sstal1_paar
     c                   kfld                    sstal1_binr
     c                   kfld                    sstal1_line
     c                   kfld                    sstal1_bida
      *
      * Key for les og oppdatering av statistikk
      *
     c     sstal1_key2   klist
     c                   kfld                    w_firm
     c                   kfld                    sstal1_paar
      *
      * Key for les og oppdatering av sletta ordrelinjer
      *
     c     fdeslx_key    klist
     c                   kfld                    w_firm
     c                   kfld                    fdeslx_numm
     c                   kfld                    fdeslx_suff
     c                   kfld                    fdeslx_line
     c                   kfld                    fdeslx_vare
      *
      * Henter firma fra LDA
      *
     c                   eval      w_firm = l_firm
      *
     c                   endsr
