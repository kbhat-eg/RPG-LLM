# RC720R - Program Documentation

## Overview

**System:** ASOKON  
**Program:** RC720R  
**Description:**  
This program is part of the "Inkasso" (debt collection) suite and is responsible for retrieving the company (selskap) information based on a provided status code. The main function is to look up a company identifier in the `RCA0L1` file using a firm number obtained from the local data area (LDA) and return the associated company info or indicate if it is unknown.

---

## Structure and Flow

### File Declarations

- **RCA0L1 (Physical File)**  
  - Declared as an externally described keyed file (`if   e           k disk`)  
  - Renamed record format from `rca0pfr` to `rca0l1r` for local reference  
  - Holds company-related information, likely indexed by firm number (`rc0fir`).

### Local Data Area (LDA) Usage

- The program expects certain values to be preloaded into the LDA:
    - `l_user` (positions 911–920): User ID (not used in this program)
    - `l_firm` (positions 944–946): Firm number (main key for lookup)
    - `l_fnav` (positions 951–980): Company name (not used in this program)

### Variables

- `rca0l1_firm`: Local variable for the firm number, defined to match the file's key field.
- `p_selsk`: Output parameter (10A), will contain the company information or 'Ukjent' (Unknown).

### Main Logic

1. **Initialize Key**  
   The firm number (`l_firm`) is read from LDA and assigned to `rca0l1_firm`.

2. **File Lookup**  
   The program performs a keyed chain operation on `RCA0L1` using `rca0l1_key` (which is a KLIST containing `rca0l1_firm`).  
   - If a record is found, `p_selsk` is set to the value of `rc0inf` (likely the company info/name field in `RCA0L1`).
   - If not found, `p_selsk` is set to `'Ukjent'`.

3. **Return**  
   The program sets LR (`*INLR`) to `*ON` and returns, indicating end of processing.

### Subroutines

#### *INZSR (Initialization Subroutine)

- **Parameter Handling:**  
  The program receives `p_selsk` as a parameter (by reference), which will be populated with the result of the lookup.
- **Key List Setup:**  
  Defines the key list (`rca0l1_key`) for file positioning, consisting of `rca0l1_firm`.

---

## Business and Domain-Specific Logic

- **Inkasso Context:**  
  The primary business logic is to map a firm number (representing a company involved in debt collection) to its corresponding information for further processing or reporting.
- **Unknown Handling:**  
  If the firm number is not present in the master file, the output is explicitly set to `'Ukjent'` to signal this status to the caller.

---

## Design Decisions and Conventions

- **LDA as Input Source:**  
  The program relies on the LDA for input, a common convention in legacy applications for passing context between programs. This requires the calling environment to properly populate the LDA before invoking this program.
- **Parameter Passing:**  
  Only the company info (`p_selsk`) is passed as a parameter, and is intended as an output parameter.
- **Error Handling:**  
  Minimalistic—no logging or exception handling; simply returns `'Ukjent'` if not found.
- **Naming Conventions:**  
  - File and field names follow a `rca0l1`/`rc0fir`/`rc0inf` pattern, which is consistent with other modules in the ASOKON system.
  - Comments and variable names are in Norwegian, reflecting the business domain and user base.

---

## External Relationships

- **RCA0L1 File:**  
  Central to this program; expected to be maintained and updated by other parts of the system.
- **LDA:**  
  Typically set by a calling program or job control prior to execution.

---

## Integration Points

- **Called by:**  
  Other Inkasso programs or batch jobs that require company information based on a status code.
- **Returns:**  
  The company information string (or `'Ukjent'`) in the `p_selsk` parameter.

---

## Summary

RC720R is a utility program in the Inkasso system that retrieves company information based on a firm number from the LDA. It is designed for integration into larger batch or interactive processes, with minimal error handling and a straightforward lookup mechanism. Its use of LDA and parameter passing is consistent with other legacy components in ASOKON.