     h option(*nodebugio) datedit(*dmy)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System. . . . . : ASOFAK
      * Program . . . . : VV112R
      * Beskrivelse . . : Sjekk om nytt varenummer allerede finnes
      *
      *               NB! Dersom det legges inn bytting av varenummer i
      *                   flere tabeller må også jobben for kopiering fra
      *                   filgruppe til filgruppe endres m.h.p. overriding
      *                   av tabeller mot databibliotek !!!
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       040116 bsa  Nytt program
6.30  *       071216 bof  Fjerner test mot statistikk.
6.31  *       081216 bof  Fjerner test mot historisk lager
7.01  *       200820 bof  Lagt til VVLEPF
8.01  *       080422 bof  Fjerner test mot bongregister
8.01  *PRG2   220622 bof  Utvidet prisgruppe fra 1 til 2 posisjoner
      *
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fvvenl1    if   e           k disk    rename(vvenpfr:vvenl1r)
     fvvepl1    if   e           k disk    rename(vveppfr:vvepl1r)
     fvvprl1    if   e           k disk    rename(vvprpfr:vvprl1r)
     fvvsol1    if   e           k disk    rename(vvsopfr:vvsol1r)
     fvsokl1    if   e           k disk    rename(vsokpfr:vsokl1r)
     fvtill9    if   e           k disk    rename(vtilpfr:vtill9r)
     fvetil1    if   e           k disk    rename(vetipfr:vetil1r)
     fveanl2    if   e           k disk    rename(veanpfr:veanl2r)
     fvsdtl7    if   e           k disk    rename(vsdtpfr:vsdtl7r)
     fvpdtla    if   e           k disk    rename(vpdtpfr:vpdtlar)
     fvbrkl6    if   e           k disk    rename(vbrkpfr:vbrkl6r)
     fvvaal2    if   e           k disk    rename(vvaapfr:vvaal2r)
     fvverl1    if   e           k disk    rename(vverpfr:vverl1r)
     fvverl2    if   e           k disk    rename(vverpfr:vverl2r)
7.01 fvvlel1    if   e           k disk    rename(vvlepfr:vvlel1r)
      *
     fvlagl1    if   e           k disk    rename(vlagpfr:vlagl1r)
     fvhisl3    if   e           k disk    rename(vhispfr:vhisl3r)
      *
     ffrabla    if   e           k disk    rename(frabpfr:frablar)
     ffpril5    if   e           k disk    rename(fpripfr:fpril5r)
     ffprnl2    if   e           k disk    rename(fprnpfr:fprnl2r)
     ffgeblv    if   e           k disk    rename(fgebpfr:fgeblvr)
     ffodtlv    if   e           k disk    rename(fodtpfr:fodtlvr)
      *
     fnodtl4    if   e           k disk    rename(nodtpfr:nodtl4r)
      *
     fsodtlv    if   e           k disk    rename(sodtpfr:sodtlvr)
     fbodtl2    if   e           k disk    rename(bodtpfr:bodtl2r)
     fsstal2    if   e           k disk    rename(sstapfr:sstal2r)
      *
     fanotl1    if   e           k disk    rename(anotpfr:anotl1r)
      *
     fjpfal6    if   e           k disk    rename(jpfapfr:jpfal6r)
      *
     fltell3    if   e           k disk    rename(ltelpfr:ltell3r)
     flodtlv    if   e           k disk    rename(lodtpfr:lodtlvr)
     flfdtl3    if   e           k disk    rename(lfdtpfr:lfdtl3r)
     flldtl3    if   e           k disk    rename(lldtpfr:lldtl3r)
     flbdtl3    if   e           k disk    rename(lbdtpfr:lbdtl3r)
      *
     fhodtl2    if   e           k disk    rename(hodtpfr:hodtl2r)
      *
     fmabdl9    if   e           k disk    rename(mabdpfr:mabdl9r)
     fmprol1    if   e           k disk    rename(mpropfr:mprol1r)
     fmmatl5    if   e           k disk    rename(mmatpfr:mmatl5r)
     fmprul1    if   e           k disk    rename(mprupfr:mprul1r)
     fmltil2    if   e           k disk    rename(mltipfr:mltil2r)
      *
     fsidtlv    if   e           k disk    rename(sidtpfr:sidtlvr)
     fsistl2    if   e           k disk    rename(sistpfr:sistl2r)
      *
      * Local data area
      *
     d                uds
     d l_user                911    920
      *
      * Definering av parametre
      *
     d p_firm          s              3  0
     d p_gvar          s             15
     d p_vare          s             15
     d p_inlr          s              1
      *
      * Definering av variable i nøkler
      *
     d anotl1_syst     s                   like(ausyst)
     d anotl1_noid     s                   like(aunoid)
     d hodtl2_vare     s                   like(hdvare)
      *
      * Definering av variable
      *
     d w_firm          s              3  0
     d w_vare          s             15
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Hovedprogram
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c                   eval      w_firm = p_firm
     c                   eval      w_vare = p_vare
      *
      *
      *  O R D R E    -  TABELLER
      *
      *
      * Sjekk til-varenummer i vare-enhets-register
      *
     c     key01         chain     vvenl1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i vare-enhets-prisgiver-register
      *
     c     key01         chain     vvepl1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i vare-pris-register
      *
     c     key01         chain     vvprl1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i vare-søketekst-register
      *
     c     key01         chain     vvsol1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i søketekst-register
      *
     c     key01         chain     vsokl1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i tilbuds-register
      *
     c     key01         chain     vtill9
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i etikett-register
      *
     c     key01         chain     vetil1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i EAN-register
      *
     c     key01         chain     veanl2
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i sortiment-linje-register
      *
     c     key01         chain     vsdtl7
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i påslag-linje-register
      *
     c     key01         chain     vpdtla
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i bruksrett-knytning
      *
     c     key01         chain     vbrkl6
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i alternativ vare
      *
     c     key01         chain     vvaal2
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i vare-erstatningsvare
      *
     c     key01         chain     vverl1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
     c     key01         chain     vverl2
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i lager-register
      *
     c     key01         chain     vlagl1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
7.01  *
7.01  * Sjekk til-varenummer i vare-lev
7.01  *
7.01 c     key01         chain     vvlel1
7.01 c                   if        %found
7.01 c                   eval      p_inlr = '1'
7.01 c                   goto      avslutt
7.01 c                   endif
      *
      * Sjekk til-varenummer i historisk lagerbok-register
      *
6.31 c*    key01         chain     vhisl3
6.31 c*                  if        %found
6.31 c*                  eval      p_inlr = '1'
6.31 c*                  goto      avslutt
6.31 c*                  endif
      *
      * Sjekk til-varenummer i rabattmatrise-register
      *
     c     key01         chain     frabla
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i spesialpris-register
      *
     c     key01         chain     fpril5
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i spesialpris-notat-register
      *
     c     key01         chain     fprnl2
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i gebyr-register
      *
     c     key01         chain     fgeblv
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i ordre-linje-register
      *
     c     key01         chain     fodtlv
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i ekstern ordre-linje-register
      *
     c     key01         chain     nodtl4
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i faktura-linje-register
      *
6.30 c*    key01         chain     sodtlv
6.30 c*                  if        %found
6.30 c*                  eval      p_inlr = '1'
6.30 c*                  goto      avslutt
6.30 c*                  endif
      *
      * Sjekk til-varenummer i Bong-linje-register
      *
8.01 c*     key01         chain     bodtl2
8.01 c*                   if        %found
8.01 c*                   eval      p_inlr = '1'
8.01 c*                   goto      avslutt
8.01 c*                   endif
      *
      * Sjekk til-varenummer i Salgsstatistikk-register
      *
6.30 c*    key01         chain     sstal2
6.30 c*                  if        %found
6.30 c*                  eval      p_inlr = '1'
6.30 c*                  goto      avslutt
6.30 c*                  endif
      *
      * Sjekk til notat-id i notat
      *
     c                   eval      anotl1_syst = 'VVAR'
     c                   eval      anotl1_noid = w_vare
     c     anotl1_key    chain     anotl1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i påslagsregister i VA
      *
     c     key01         chain     jpfal6
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      *  L A G E R    -  TABELLER
      *
      * Sjekk til-varenummer i lagertelling-telle-register
      *
     c     key01         chain     ltell3
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i bestilling-linje-register
      *
     c     key01         chain     lodtlv
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i best.forsl-linje-register
      *
     c     key01         chain     lfdtl3
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i lager-trans-linje-register
      *
     c     key01         chain     lldtl3
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i lagertelling-bunt-linje-register
      *
     c     key01         chain     lbdtl3
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i håndterminal-ordre-linje-register
      *
     c                   movel     w_vare        hodtl2_vare
     c     hodtl2_key    chain     hodtl2
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i prognose- og abcxyz-tabeller
      *
     c     key01         chain     mabdl9
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
     c     key01         chain     mprol1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
     c     key01         chain     mmatl5
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
     c     key01         chain     mprul1
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
     c     key01         chain     mltil2
     c                   if        %found
     c                   eval      p_inlr = '1'
     c                   goto      avslutt
     c                   endif
      *
      * Sjekk til-varenummer i inng.faktura-linje-register
      *
6.30 c*    key01         chain     sidtlv
6.30 c*                  if        %found
6.30 c*                  eval      p_inlr = '1'
6.30 c*                  goto      avslutt
6.30 c*                  endif
      *
      * Sjekk til-varenummer i Innkjøpsstatistikk-register
      *
6.30 c*    key01         chain     sistl2
6.30 c*                  if        %found
6.30 c*                  eval      p_inlr = '1'
6.30 c*                  goto      avslutt
6.30 c*                  endif
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     avslutt       tag
      *
     c                   eval      *inlr = *on
      *
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Parametre
      *
     c     *entry        plist
     c                   parm                    p_firm
     c                   parm                    p_gvar
     c                   parm                    p_vare
     c                   parm                    p_inlr
      *
      * Key for oppslag/les på vare
      *
     c     key01         klist
     c                   kfld                    w_firm
     c                   kfld                    w_vare
      *
      * Key for oppdatering av notat
      *
     c     anotl1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    anotl1_syst
     c                   kfld                    anotl1_noid
      *
      * Key for oppdatering av håndterminal-ordre-linje
      *
     c     hodtl2_key    klist
     c                   kfld                    w_firm
     c                   kfld                    hodtl2_vare
      *
     c                   eval      p_inlr = '0'
      *
     c                   endsr
