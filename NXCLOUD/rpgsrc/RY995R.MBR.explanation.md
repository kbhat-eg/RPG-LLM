```markdown
## High-Level Program Purpose

This RPG (Report Program Generator) program, named `RY995R`, is designed to **update search texts for all items** (varer) in a batch process. It reads every record from an item master file, then calls another program (`RY996R`) to perform the update for each item. The program is intended to be run in batch mode (not interactively).

---

## Program Structure Overview

### Header Specifications

```rpg
     h option(*nodebugio) datedit(*dmy)
```
- `option(*nodebugio)` disables certain debugging I/O operations for improved performance in batch.
- `dateedit(*dmy)` specifies the date format (Day-Month-Year).

### File Declaration

```rpg
     fjvarl1    if   e           k disk    rename(jvarpfr:jvarl1r)
```
- Declares a file `jvarl1` (physical or logical file), used for reading item records.
- The external file (on disk) is `jvarpfr`, and it's referenced locally as `jvarl1r`.
- Keyed access (`k`), Input/File (`if`), externally described (`e`).

### Data Area and Variable Declarations

#### Data Area (`LDA`)

```rpg
     d                uds
     d l_firm                944    946  0
```
- The `uds` keyword indicates *User Data Space*, i.e., the local data area (`LDA`).
- A 3-digit firm number (`l_firm`) is extracted from positions 944 to 946 of the LDA.

#### Variables

```rpg
     d b_inlr          s              1    inz(*off)
     d w_firm          s              3  0
```
- `b_inlr`: 1-character flag, initialized to *off. Used as a parameter for called program.
- `w_firm`: 3-digit numeric variable to hold the firm number.

---

## Main Program Logic

### Initialization

- On program start, the automatically called `*inzsr` subroutine runs:
    - Sets `w_firm` = `l_firm` (copies the firm number from `LDA` into working storage).

### Main Loop (Processing Items)

```rpg
     c                   eval      b_inlr = *on
     c                   read      jvarl1
     c                   dow       not %eof
       c                   call      'RY996R'
       c                   parm                    w_firm
       c                   parm                    jvvare
       c                   parm                    b_inlr
       c                   read      jvarl1
     c                   enddo
```

**Steps:**
1. Sets `b_inlr = *on` (likely signals last record/cleanup to the called program).
2. Reads the first record from the `jvarl1` file.
3. Loops over all item records:
    - Calls `RY996R` for each record, passing:
        - `w_firm` (firm number)
        - `jvvare` (item number from the record, assumed field in `jvarl1`)
        - `b_inlr` (flag, always `*on` here)
    - Reads next item record.
4. Loop ends when end-of-file is reached.

### Program Termination

```rpg
     c     avslutt       tag
     c                   eval      *inlr = *on
     c                   return
```
- The label `avslutt` marks the end/cleanup section.
- `*inlr = *on` signals RPG to release all file locks and resources.
- `return` exits the program.

---

## Initialization Subroutine

```rpg
     c     *inzsr        begsr
       c                   eval      w_firm = l_firm
     c                   endsr
```
- On program start, retrieves the firm number from the `LDA` into working variable `w_firm`.

---

## Comments and Documentation

- The comments are in Norwegian.
- Example: `Oppdaterer vare-søketekst - alle varer` = Updates item search text - all items.
- "Jobben skal kjøres i batch" = "The job should be run in batch."
- Change history and description are also included at the top for traceability.

---

## Summary

- **Reads all item records** from `jvarl1` for a given firm.
- **Calls an external program** (`RY996R`) to update search texts, passing the firm, item number, and a flag.
- **Designed for batch execution**.
- Uses the Local Data Area to determine the firm to process.

---

## Key Fields/Variables

| Variable    | Description                                |
|-------------|--------------------------------------------|
| `w_firm`    | Firm number being processed                |
| `jvvare`    | Item number from each item record          |
| `b_inlr`    | Flag, always *on, passed to called program |
| `l_firm`    | Firm number from the LDA (positions 944-946)|

---

## Onboarding Tips

- The heart of the program is the **read-process-call-next loop**.
- Study the external program (`RY996R`) for details on how search text is updated.
- The file `jvarl1` must have, at a minimum, an item number field (`jvvare`).
- Check LDA setup – ensure positions 944-946 contain the correct firm number before running.
```
