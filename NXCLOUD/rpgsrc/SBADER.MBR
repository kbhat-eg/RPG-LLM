      /title  Oppdatering av akkumulerings-register, Sletting
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : ASSTAT
      * Program . . . . : SBADER
      * Beskrivelse . . : Oppdatering av akkumulerings-register, Sletting
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fsknil1    if   e           k disk    rename(sknipfr:sknil1r)
     fskakl1    if   e           k disk    rename(skakpfr:skakl1r)
     fskaklu    uf a e           k disk    rename(skakpfr:skaklur)
      *
      * Definering av parameter (inn)
      *
     d                 ds
     d wkparm                       128
     d  wkfirm                        3  0 overlay(wkparm:01)
     d  wkhhaa                        4  0 overlay(wkparm:04)
     d  wkkode                       12    overlay(wkparm:08)
      *
      * Definering av variable i nøkler
      *
     d w_firm          s                   like(safirm)
     d w_hhaa          s                   like(sahhaa)
     d w_kode          s                   like(sakode)
      *
     d skaklu_avde     s                   like(saavde)
     d skaklu_lage     s                   like(salage)
     d skaklu_otyp     s                   like(saotyp)
     d skaklu_land     s                   like(saland)
     d skaklu_dist     s                   like(sadist)
     d skaklu_selg     s                   like(saselg)
     d skaklu_kkat     s                   like(sakkat)
     d skaklu_kund     s                   like(sakund)
     d skaklu_ogrp     s                   like(saogrp)
     d skaklu_hgrp     s                   like(sahgrp)
     d skaklu_ugrp     s                   like(saugrp)
     d skaklu_vare     s                   like(savare)
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * XINIT  Initisiering av utskriften                               *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
      *  Hopper til Multioppdateringsrutinen
      *
     c     wkkode        cabeq     *blank        xstart
      *
      * Sjekk, Skal denne typen oppdatere akk.register
      *
     c                   eval      w_kode = wkkode
     c     sknil1_key    chain     sknil1r                            10
      *
     c     *in10         cabeq     *on           xslutt
     c     snakkk        cabne     *blank        xslutt
      *
      *  Start oppdatering
      *
     c                   eval      w_kode = wkkode
     c                   exsr      oppakk
      *
     c                   goto      xslutt
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * XSTART Henter alle budsjett-koder for oppdatering               *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
     c     xstart        tag
      *
     c                   eval      w_kode = *blank
     c     sknil1_key    setll     sknil1
      *
     c     xneste        tag
     c                   read      sknil1                                 10
     c     *in10         cabeq     *on           xslutt
      *
      * Sjekk, Hopp ut dersom ikke riktig
      *
     c     snfirm        cabne     w_firm        xslutt
     c     snakkk        cabne     *blank        xneste
      *
      *  Start oppdatering
      *
     c                   eval      w_kode = snkode
     c                   exsr      oppakk
      *
      * Returner til nytt les
      *
     c                   goto      xneste
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      *
     c     xslutt        tag
      *
     c                   eval      *inlr = *on
      *
     c                   return
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * Oppdater akkumulerings-register                                 *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
     c     oppakk        begsr
      *
      * Sletter records i AKKUMULERINGS-REGISTER
      *
     c                   move      *zero         skaklu_avde
     c                   move      *zero         skaklu_lage
     c                   move      *blank        skaklu_otyp
     c                   move      *blank        skaklu_land
     c                   move      *zero         skaklu_dist
     c                   move      *zero         skaklu_selg
     c                   move      *zero         skaklu_kkat
     c                   move      *zero         skaklu_kund
     c                   move      *zero         skaklu_ogrp
     c                   move      *zero         skaklu_hgrp
     c                   move      *zero         skaklu_ugrp
     c                   move      *blank        skaklu_vare
     c     skakl1_key    setll     skakl1r
      *
     c     tag02         tag
     c                   setoff                                           12
     c                   read      skakl1r                                12
      *
     c     *in12         ifeq      *off
     c     w_firm        ifeq      safirm
     c     w_hhaa        ifeq      sahhaa
     c     w_kode        ifeq      sakode
      *
     c                   move      saavde        skaklu_avde
     c                   move      salage        skaklu_lage
     c                   move      saotyp        skaklu_otyp
     c                   move      saland        skaklu_land
     c                   move      sadist        skaklu_dist
     c                   move      saselg        skaklu_selg
     c                   move      sakkat        skaklu_kkat
     c                   move      sakund        skaklu_kund
     c                   move      saogrp        skaklu_ogrp
     c                   move      sahgrp        skaklu_hgrp
     c                   move      saugrp        skaklu_ugrp
     c                   move      savare        skaklu_vare
      *
     c     skakl1_key    chain     skaklur                            14
     c     *in14         ifeq      *off
     c                   delete    skaklur
     c                   endif
      *
     c                   goto      tag02
     c                   endif
     c                   endif
     c                   endif
     c                   endif
      *
     c                   endsr
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * Subrutine for initiering av program                             *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
     csr   *inzsr        begsr
      *
      * Key for oppdatering av KUNDE-NIVÅ-REGISTER
      *
     c     sknil1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    w_kode
      *
      * Key for lesing      av KUNDE-AKKUMULERINGS-REGISTER
      *
     c     skakl1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    w_hhaa
     c                   kfld                    w_kode
     c                   kfld                    skaklu_avde
     c                   kfld                    skaklu_lage
     c                   kfld                    skaklu_otyp
     c                   kfld                    skaklu_land
     c                   kfld                    skaklu_dist
     c                   kfld                    skaklu_selg
     c                   kfld                    skaklu_kkat
     c                   kfld                    skaklu_kund
     c                   kfld                    skaklu_ogrp
     c                   kfld                    skaklu_hgrp
     c                   kfld                    skaklu_ugrp
     c                   kfld                    skaklu_vare
      *
      * Key for oppdatering av KUNDE-AKKUMULERINGS-REGISTER
      *
     c     skaklu_key    klist
     c                   kfld                    w_firm
     c                   kfld                    w_hhaa
     c                   kfld                    w_kode
     c                   kfld                    skaklu_avde
     c                   kfld                    skaklu_lage
     c                   kfld                    skaklu_otyp
     c                   kfld                    skaklu_land
     c                   kfld                    skaklu_dist
     c                   kfld                    skaklu_selg
     c                   kfld                    skaklu_kkat
     c                   kfld                    skaklu_kund
     c                   kfld                    skaklu_ogrp
     c                   kfld                    skaklu_hgrp
     c                   kfld                    skaklu_ugrp
     c                   kfld                    skaklu_vare
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *  Tar inn parameter fra forrige program                          *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
     c     *entry        plist
     c                   parm                    dsparm          128
     c                   move      dsparm        wkparm
      *
     c                   eval      w_firm      = wkfirm
     c                   eval      w_hhaa      = wkhhaa
      *
     csr                 endsr
