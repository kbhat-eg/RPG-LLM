# Program Overview  
This IBM ILE RPG program (BU726R) exports a store’s item list. It reads header records from the VSHEL3 file, writes them to the BOLHSTR output file, and calls a subprogram to export the corresponding detail lines.

---

## H-Specification  
- `option(*nodebugio)`: Disable debug I/O statements.  
- `datedit(*dmy)`: Dates are in DD/MM/YYYY format.

---

## File Specifications  
1. **VSHEL3** (keyed input disk file)  
   - Renamed internally from `vshepfr` to `vshel3r`.  
2. **BOLHST** (output update file)  
   - Renamed internally from `bolhst` to `bolhstr`.  

---

## Data Definitions  
### Parameters  
- `p_firm`  
  - Passed into the program (via the *INZSR subroutine).  
  - Defined “like(vcfirm)” to match the firm‐ID field in the database.  

### Working‐Storage Variables  
- `vshel3_type` (like `vctype`)  
  - Used to filter header records by type.  
- `w_firm` (like `vcfirm`)  
  - Holds the firm ID for keying and output.

---

## Main Logic Flow  
1. **Initialization**  
   - `clear bolhstr`  
     • Ensures the output record buffer is empty.  
   - `eval firm = w_firm`  
     • Moves the firm ID into the record‐format variable.

2. **Process Header Records**  
   - Set the record type filter:  
     `eval vshel3_type = 'V'`  
   - Position and read first record:  
     ```
     vshel3_key setll vshel3
     vshel3_key reade vshel3
     ```
   - Loop until end-of-file (%EOF):
     ```
     dow %eof = *off
       // Map input fields to output fields
       eval list = vcvsor
       eval besk = vcbesk
       eval odat = vcodat
       eval edat = vcedat
       eval etim = vcetim
       eval eusr = vceusr

       // Write header to BOLHSTR
       write bolhstr

       // Call subprogram to handle detail lines
       call 'BU727C'
         parm w_firm
         parm vcvsor

       // Read next header
       vshel3_key reade vshel3
     enddo
     ```

3. **Program Termination**  
   - `eval *inlr = *on`  
   - `return`

---

## *INZSR Subroutine  
- Triggered automatically at program start.  
- **Purpose**:  
  - Capture the incoming `p_firm` parameter.  
  - Build the key list for reading VSHEL3 by firm and type.  
- **Key List Definition**:
  ```
  vshel3_key klist
    kfld w_firm
    kfld vshel3_type
  ```
- **Operations**:
  ```
  eval w_firm = p_firm
  ```

---

**Summary**  
- The program loops through VSHEL3 headers of type ‘V’ for the specified firm, writes each header to BOLHSTR, and delegates detail‐line processing to BU727C.  
- Initialization sets up the keying and firm context before any file operations.