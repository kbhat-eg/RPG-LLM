```markdown
## Overview

This RPG program, named **IG099R**, is used to update a status record in a file, marking whether the financial system "Navision" (NAV) is set for a particular company. It's designed as a simple maintenance interface for a value in a database file, using a display file for basic interaction and processing.

### High-Level Description

- **Reads a specific record** from a file using a key.
- **Displays information** to the user on a screen (workstation).
- Allows the user to **update a status code** indicating if the Navision financial system is set.
- Handles an **exit function** with the F3 key.

---

## File Declarations

```rpg
ffstsl1    uf   e           k disk    rename(fstspfr:fstspfr)
fig099d    cf   e             workstn
```
- `fstsl1` is a user-controlled file, externally described, keyed, disk file. It is renamed for internal use.
- `ig099d` is a display file (workstation).

---

## Data Definitions

### Input Fields from Local Data Area

```rpg
d                uds
d l_firm                944    946  0
d l_fnav                951    980
```
- `l_firm` and `l_fnav` are fields taken from the User Data Space (UDS), probably representing company number and some NAV-specific data, respectively.

### Working Variables

```rpg
d w_firm          s                   like(faafir)
```
- `w_firm`: working variable for the firm number, same type as the field `faafir` in the record format.

---

## Initialization Subroutine (`*INZSR`)

```rpg
c     *inzsr        begsr
c     stskey        klist
c                   kfld                    w_firm
c                   eval      w_firm = l_firm
c                   eval      a1fnav = l_fnav
c                   endsr
```
- Sets up the key list (`stskey`) using `w_firm`.
- Moves company and NAV info from the UDS area to working fields.

---

## Main Procedure Logic

### Initialization

```rpg
c                   eval      navoko = 0
c                   eval      nxtoko = 0
```
- Clears internal flags: `navoko` and `nxtoko`.

### Retrieve Record

```rpg
c     stskey        chain     fstsl1
```
- Looks up a record (using `stskey` as the key) in file `fstsl1`.

### If Record Found

```rpg
c                   if        %found
c                   if        faak03 = 5
c                   eval      navoko = 1
c                   endif
c                   eval      nxtoko = faak04
c                   exfmt     a1bld
```
- If found:
  - If `faak03 = 5`, set `navoko` to 1 (this code indicates NAV is set).
  - Load `faak04` into `nxtoko` (retain another status code).
  - Show the display format `a1bld` to the user.

### If Record Not Found

```rpg
c                   else
c                   goto      slutt
c                   endif
```
- If not found, exit the program.

---

### User Interaction

```rpg
c                   if        *inkc = *on
c                   goto      slutt
c                   endif
```
- If user presses F3 (function key C), end the program.

---

### Update Logic

```rpg
c                   if        navoko = 1
c                   eval      faak03 = 5
c                   else
c                   eval      faak03 = 0
c                   endif
c                   eval      faak04 = nxtoko
c                   update    fstspfr
```
- Based on the `navoko` flag set in the display, update `faak03` in the record to 5 (NAV set) or 0 (NAV not set).
- Update `faak04` with the preserved value.
- Write changes to the file (`update`).

---

## Program End

```rpg
c     slutt         tag
c                   seton                                        lr
c                   return
```
- `slutt` is the end label: set LR (last record) on (signals program end) and return.

---

## Comments and Features

- The program is **simple and targeted**: it only allows you to set or reset a single field (`faak03`) marking the status of the NAV system.
- Uses **data from the user data space** for keys and other parameters.
- **Display file** is used to interact with the user for confirmation.

---

## Key Variables and Fields

- **l_firm**: Company number from LDA (local data area).
- **w_firm**: Working variable for company number.
- **faak03**: Main status code field (0 = not set, 5 = NAV set).
- **faak04**: Another status code, preserved in the logic.
- **navoko, nxtoko**: Internal program flags for NAV status and next status code.
- **a1bld**: Screen format for user interface.

---

## Summary

This RPG program is part of a system administration tool, letting an operator flag or unflag a company as using the NAV (Navision) economic system, by updating a status code in a file. It provides a minimal screen-based interface, checks for existing data, and updates the record accordingly. Exit is provided via the F3 key.

---
```