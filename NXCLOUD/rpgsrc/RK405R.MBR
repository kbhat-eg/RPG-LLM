     h datedit(*dmy) option(*nodebugio)
      * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
      * System. . . . . : ASOKON                                              *
      * Program . . . . : RK405R                                        *
      * Beskrivelse . . : Oppdatering fra kundekategori                 *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * Spesialversjon. :                                               *
      * Tilpasset for . :                                               *
      *                                                                 *
      * Referanse  Dato   Endringsbeskrivelse                      Sign.*
      * --------- ------  ----------------------------------------------*
T5.00 * V5.40     110705  Nytt program                             KOB  *   L *
6.10  * V6.10     210909  Lagt inn sporingsfelter                  BSA
6.11  * V6.11     070510  Endret sporing                           BSA
      *                                                                 *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *                                                                 *
      *  BRUK AV INDIKATORER                                            *
      *                                                                 *
      *       KA = F1  = Valg av firma                                  *
      *       KC = F3  = Exit                                           *
      *                                                                 *
      *       LR = Avslutt program                                      *
      *       30 = Protect av felter ved vise                           *
      *    31-59 = Varsle m/feilmeldinger/skjermindikatorer             *
      *    60-69 = Fileindikatorer chain etc.                           *
      *    70-79 = Arbeidsindikatorer i sub-rutiner                     *
      *    80-89 = Arbeidsindikatorer ordinÃ¦re                          *
      *    90-99 = Benyttes ved std. sub-rutiner                        *
      *                                                                 *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
     frkunlu    uf   e           k disk    rename(rkunpfr:rkunlur)
     fra11l1    if   e           k disk    rename(ra11pfr:ra11l1r)
      *
      * Definering av variable i nÃ¸kler
      *
     d ra11l1_kkod     s                   like(rakkod)
      *
      * Definering av Local data area
      *
     d                uds
      *
T5.00d l_katf                300    303  0
T5.00d l_katt                304    307  0
T5.00d l_utfy                308    308
      *
     d l_wsid                901    910
     d l_user                911    920
     d l_firm                944    946  0
     d l_fnav                951    980
      *
     d w_firm          s                   like(l_firm)
     d w_kund          s                   like(rkkund)
      *
      * Les kunderegister
      *
     c     rkunlu_key    setll     rkunlu                                                    .
     c     rkunlu_key    reade     rkunlu                                 90
      *
     c                   dow       *in90 = *off
      *
     c                   if        rkkatg >= l_katf and
     c                             rkkatg <= l_katt
     c                   exsr      xsrkat
     c                   endif
      *
6.10 c*                  time                    rkedat
6.10 c*                  time                    rketim
6.10 c*                  eval      rkesig = l_user
6.11 c                   time                    rk2dpt
6.11 c                   eval      rkepgm = 'RK405R    '
     c                   update    rkunlur
      *
     c     rkunlu_key    reade     rkunlu                                 90
     c                   enddo
      *
     c     slutt         tag
      *
     c                   eval      *inlr = *on
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * XSRKAT Henter standardverdier fra kundekategori                 *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
     c     xsrkat        begsr
      *
     c                   eval      ra11l1_kkod = rkkatg
     c     ra11l1_key    chain     ra11l1
     c                   if        %found(ra11l1)
      *
     c                   if        l_utfy = 'J'
      *
     c                   if        rkbetb = 0
     c                   eval      rkbetb = rakbeb
     c                   endif
      *
     c                   if        rkbetm = 0
     c                   eval      rkbetm = rakbem
     c                   endif
      *
     c                   if        rkprpa = 0
     c                   eval      rkprpa = rakppa
     c                   endif
      *
     c                   if        rkneto = 0
     c                   eval      rkneto = raknto
     c                   endif
      *
     c                   if        rksamf = 0
     c                   eval      rksamf = raksam
     c                   endif
      *
     c                   if        rksekv = 0
     c                   eval      rksekv = raksek
     c                   endif
      *
     c                   if        rkpbok = 0
     c                   eval      rkpbok = rakbok
     c                   endif
      *
     c                   else
      *
     c                   eval      rkbetb = rakbeb
     c                   eval      rkbetm = rakbem
     c                   eval      rkprpa = rakppa
     c                   eval      rkneto = raknto
     c                   eval      rksamf = raksam
     c                   eval      rksekv = raksek
     c                   eval      rkpbok = rakbok
      *
     c                   endif
     c                   endif
      *
      *
     c                   endsr
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * Subrutine for initiering av program                             *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
     c     *inzsr        begsr
      *
      * Key for kunderegister
      *
     c     rkunlu_key    klist
     c                   kfld                    w_firm
      *
      * Key for kundekategori
      *
     c     ra11l1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    ra11l1_kkod
      *
     c                   endsr
      *
