# Explanation of RF825R (Generating Unique Filenames)

This program creates a unique filename incorporating:
• A fixed prefix ("BM")  
• The current date (YYMMDD)  
• The hour and minute (HHMM)  
• A dot (.) separator  
• A customer-specific identifier (p_bmid)  
• An “.XML” extension  

Below is a breakdown of the key parts and how everything comes together within this domain:

---

## Purpose

RF825R is used to generate unique filenames for the ASOKON system. The resulting filename follows a structured format that includes the current timestamp and a customer number (p_bmid).

---

## Data Structures and Variables

1. **d_fnav** – Main 28-character data structure for building the filename. It is overlaid into segments:
   - d_fnav01 ("BM"): Fixed 2-character prefix.  
   - d_fnav02 (6,0): Will hold the date in YYMMDD format.  
   - d_fnav03 (4,0): Will hold the time in HHMM format.  
   - d_fnav04 ("."): A literal dot.  
   - d_fnav05 (15): Space for the customer identifier.

2. **d_tid** – A 6-digit numeric time storage, overlaid so that d_tid01 is the first 4 digits (HHMM) and d_tid02 is the last 2 digits (unused in this logic).

3. **p_bmid (Input)** – The customer or user ID passed into the program. This will be placed in the d_fnav05 portion of the filename.

4. **p_fnav (Output)** – The final filename that will be returned to the calling program.

5. **w_dato & w_time** – Temporary date/time variables fetched using the TIME operation code (in *ISO format), then moved into six-digit numeric variables (w_dato_6 and w_time_6) for the concatenation steps.

---

## Main Program Flow

1. **Receive Parameters**  
   • The program receives p_bmid (customer ID) and p_fnav (the output variable for the file name) via the Program Parameter List (plist).  

2. **Fetch Current Date and Time**  
   • The TIME operation code captures the current system date (w_dato) and time (w_time).  
   • The date is moved to a 6-digit numeric (w_dato_6 = YYMMDD).  
   • The time is numeric, and the first 4 digits (HHMM) are placed into d_tid01.

3. **Build Filename Segments**  
   • d_fnav02 = w_dato_6 (stores YYMMDD next to the "BM" prefix).  
   • d_fnav03 = d_tid01 (stores HHMM after the date).  
   • d_fnav04 holds the separator dot.  
   • d_fnav05 = p_bmid (customer ID passed in).  

4. **Assemble Final Output**  
   • Combined into w_fnav as “BMYYMMDDHHMM.CUSTOMERID.XML”.  
   • Copied into p_fnav to be returned to the caller.

---

## Notable Points

• This program uses overlay data structures to avoid string concatenation in multiple steps. Each piece of the filename is placed at a specific offset, ensuring consistent formatting.  
• The prefix “BM” (d_fnav01) is a domain-specific requirement for these files.  
• The code uses numeric date and time snippets for YYMMDD and HHMM, preserving a shorter but unique format.  
• The “.XML” extension, appended at runtime, indicates the file’s usage or output type within the system.  

---

## Relationships to Other Modules or Data

Though the code does not explicitly call other modules, it expects that:
• p_bmid (the customer or user ID) is provided by a preceding process or program.  
• p_fnav will be passed back for eventual file creation or transfer in subsequent modules.  

---

By following these structures and overlays, RF825R ensures consistent, system-wide unique filenames for any tasks requiring date-, time-, and customer-based identification.