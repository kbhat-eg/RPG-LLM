      /TITLE  ASSTAT Vise detaljer kjøpt vare
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : ASSTAT
      * Program . . . . : SI510R
      * Beskrivelse . . : Vise detaljer kjøpt vare
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       210898 HKO  Nytt program
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fsistl1    if   e           k disk    rename(sistpfr:sistl1r)
     frlevl1    if   e           k disk    rename(rlevpfr:rlevl1r)
     f*klal1    if   e           k disk    rename(lklapfr:lklal1r)
      *
     fSI510d    cf   e             workstn
      *
      * Definering av parametre
      *
     d p_firm          s                   like(sifirm)
     d p_paar          s                   like(sipaar)
     d p_binr          s                   like(sibinr)
     d p_line          s                   like(siline)
     d p_bida          s                   like(sibida)
      *
      * Definering av Local data area
      *
     d                uds
     d l_user                911    920
     d l_firm                944    946  0
     d l_fnav                951    980
      *
      * Definering av variabler i nøkler
      *
     d sistl1_paar     s                   like(sipaar)
     d sistl1_binr     s                   like(sibinr)
     d sistl1_line     s                   like(siline)
     d sistl1_bida     s                   like(sibida)
     d rlevl1_levr     s                   like(rllevr)
     d*lklal1_levr     s                   like(llldor)
     d*lklal1_kode     s                   like(llkode)
      *
      * Definering av variable
      *
     d w_firm          s                   like(sifirm)
      *
      /EJECT
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * B1 Behandle bildet
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Initierer skjermbildet
      *
     c                   eval      sistl1_paar = p_paar
     c                   eval      sistl1_binr = p_binr
     c                   eval      sistl1_line = p_line
     c                   eval      sistl1_bida = p_bida
     c     sistl1_key    chain     sistl1                             60
     c                   if        *in60 = *on
     c                   goto      avslutt
     c                   endif
      *
     c                   eval      b1valn = sivaln
     c***                eval      b1ladr = siladr
     c                   eval      b1binr = sibinr
     c                   eval      b1ornr = siornr
     c                   eval      b1otyp = siotyp
     c                   eval      b1otyp = siotyp
     c                   eval      b1wsid = siwsid
     c                   eval      b1vare = sivare
     c                   eval      b1tek1 = sitek1
     c                   eval      b1anta = sianta
     c                   eval      b1oenh = sioenh
     c                   eval      b1pkod = sipkod
     c                   eval      b1sumk = sisumk
     c                   eval      b1sumb = sisumb
     c                   eval      b1rab1 = sirab1
     c                   eval      b1rab2 = sirab2
     c                   eval      b1rabo = sirabo
      *
     c                   if        sibida <> *loval
     c     *dmy          move      sibida        b1bida
     c                   endif
      *
     c                   if        siorda <> *loval
     c     *dmy          move      siorda        b1orda
     c                   endif
      *
     c     *hms          move      sitime        b1time
      *
     c                   eval      b1sumn = sisumb - sirab1 - sirab2 -
     c                                      sirabo
      *
     c                   if        sivaln <> 0
     c                   eval      rlevl1_levr = sivaln
     c     rlevl1_key    chain     rlevl1                             60
     c                   if        *in60 = *off
     c                   eval      b1navn = rlnavn
     c                   endif
     c                   endif
      *
     c***                if        siladr <> 0
     c***                eval      lklal1_levr = sivaln
     c***                eval      lklal1_kode = siladr
     c***  lklal1_key    chain     lklal1                             60
     c***                if        *in60 = *off
     c***                eval      b1lnav = llnavn
     c***                endif
     c***                endif
      *
      * Behandler bildet
      *
     c     b1taga        tag
     c                   exfmt     b1bld
      *
      * Behandling av standard funksjonstaster
      *
     c                   select
     c                   when      *inkc or *inkl
     c                   goto      avslutt
     c                   endsl
      *
      /EJECT
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     avslutt       tag
      *
     c                   eval      *inlr = *on
     c                   return
      *
      /EJECT
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Parametre
      *
     c     *entry        plist
     c                   parm                    p_firm
     c                   parm                    p_paar
     c                   parm                    p_binr
     c                   parm                    p_line
     c                   parm                    p_bida
      *
      * Key for oppslag på statistikk-register
      *
     c     sistl1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    sistl1_paar
     c                   kfld                    sistl1_binr
     c                   kfld                    sistl1_line
     c                   kfld                    sistl1_bida
      *
      * Key for oppslag på leverandørregister
      *
     c     rlevl1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    rlevl1_levr
      *
      * Key for oppslag på leveringsadresse
      *
     c***  lklal1_key    klist
     c***                kfld                    w_firm
     c***                kfld                    lklal1_levr
     c***                kfld                    lklal1_kode
      *
      *
      * Henter firmakode fra parameter
      *
     c                   eval      w_firm = p_firm
      *
     c                   endsr
