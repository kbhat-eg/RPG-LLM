      /TITLE  ASSTAT Utvalg til parameterfil, fra/til faktura/kr.nota
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : ASSTAT
      * Program . . . . : SR142R
      * Beskrivelse . . : Utvalg til parameterfil, fra/til fakt.Kred.no
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
6.nu  * 6.30  090615 bsa  Utvidet faktura/kreditnota nummer
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fSR142d    cf   e             workstn
      *
     fslpml1    if   e           k disk    rename(slpmpfr:slpml1r)
     fslpmlu    uf a e           k disk    rename(slpmpfr:slpmlur)
      *
      *---------------------------------------------------------------------
      *
     d wptype          s                   like(srtype)
     d wptext          s             30
      *
     d wwfirm          s                   like(srfirm)
     d wwtype          s                   like(srtype)
     d wwkode          s                   like(srkode)
      *
     dwwrest           ds           330
     d wwtext                  1     30
6.nu d wwffak                 31     38  0
6.nu d wwtfak                 39     46  0
6.nu d wwfkre                 47     54  0
6.nu d wwtkre                 55     62  0
      *
     d wwvalg          ds
     d  wwfyll                 1     15
      *
     d                uds
     d dsuser                911    920
     d dsfirm                944    946  0
     d l_fnav                951    980
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * B2BLD Behandle åpningsbildet                                    *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
     c     b2tagb        tag
      *
      * slå opp
      * i filen
      *
     c     key01         chain     slpml1                             60
      *
      * post finnes
      * fra før
      *
     c                   if        *in60 = *off                                          .....
     c                   movel     srrest        wwrest                                      .
     c                   movel     wwffak        b2ffak                                      .
     c                   movel     wwtfak        b2tfak                                      .
     c                   movel     wwfkre        b2fkre                                      .
     c                   movel     wwtkre        b2tkre                                      .
      *                                                                                      .
     c                   endif                                                           .....
      *
      * post finnes
      * ikke
      *
     c                   if        *in60 = *on                                           .....
     c                   eval      b2ffak = *zero                                            .
     c                   eval      b2tfak = *zero                                            .
     c                   eval      b2fkre = *zero                                            .
     c                   eval      b2tkre = *zero                                            .
     c                   endif                                                           .....
      *
     c     b2taga        tag
      *
     c                   exfmt     b2bld
      *
      * Avslutt program
      *
     c     *inkc         cabeq     *on           xslutt
     c     *inkl         cabeq     *on           xslutt
      *
      * Sjekk om fra er større enn til
      *
     c                   if        b2ffak > b2tfak
     c                   goto      b2taga
     c                   endif
     c                   if        b2fkre > b2tkre
     c                   goto      b2taga
     c                   endif
      *
      *
      *
      *
     c     key01         chain     slpmlu                             60
      *
     c                   eval      wwffak = b2ffak                                           .
     c                   eval      wwtfak = b2tfak                                           .
     c                   eval      wwfkre = b2fkre                                           .
     c                   eval      wwtkre = b2tkre                                           .
     c                   eval      wwtext = 'Faktura fra/til'
     c                   eval      srrest = wwrest
     c                   eval      srsyst = 'L'
      *
      * posten finnes
      * fra før
      *
     c                   if        *in60 = *off                                          .....
     c                   if        b2ffak = 0 and b2tfak = 0                             .....
     c                             and b2fkre = 0 and b2tkre = 0                         .....
     c                   delete    slpmlur                                                   .
     c                   else                                                                .
     c                   update    slpmlur                                                   .
     c                   endif
      *
     c                   endif
      *
      * posten finnes
      * ikke fra før
      *
     c                   if        *in60 = *on                                           .....
     c                   eval      srfirm = wwfirm
     c                   eval      srtype = wwtype
     c                   eval      srkode = wwkode
     c                   write     slpmlur                                                   .
     c                   endif
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * Avslutt program                                                 *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
     c     xslutt        tag
      *
     c                   eval      *inlr = *on
     c                   return
      *
      /eject
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      * Subrutine for initiering av program                             *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - *
      *
      *
     c     *inzsr        begsr
      *
      * Key for file
      *
     c     key01         klist
     c                   kfld                    wwfirm
     c                   kfld                    wwtype
     c                   kfld                    wwkode
     c                   kfld                    wwvalg
      *
      * Tar inn parameter fra forrige program
      *
     c     *entry        plist
     c                   parm                    wptype
     c                   parm                    wptext
      *
      * Legger inn verdier i feltene
      *
     c                   eval      wwfirm = dsfirm
     c                   eval      wwtype = wptype
     c                   eval      wwkode = 42
     c                   eval      wwvalg = *blank
      *
     c                   eval      srfirm = wwfirm
      *
     c                   eval      b2type = wptype
     c                   eval      b2text = wptext
      *
     c                   endsr
