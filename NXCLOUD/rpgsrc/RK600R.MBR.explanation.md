# Explanation of RPG Program: RK600R

This document provides an overview and explanation of the provided ILE RPG (Report Program Generator) source code for program `RK600R`, designed for the IBM i (AS/400) platform.

---

## 1. **Header Specifications**

```rpg
h datedit(*dmy) option(*nodebugio)
```

- `datedit(*dmy)`: Dates defaults to day/month/year format.
- `option(*nodebugio)`: Disables full I/O debug support in the program.

---

## 2. **Documentation Block**

A comment block describing the system, program, purpose, and change history.  
Key points:
- **Program Name:** RK600R
- **Description:** Printout of duplicates, with parameters
- **Remarks:** Explanation of indicator usage (see below).

---

## 3. **Indicator References**

The comments detail how indicators (flags) are used in this program:
- `KA = F1` (Function key 1): Company selection
- `KC = F3` (Function key 3): Exit
- `LR`: End-of-program indicator
- `30, 31-59, 60-69, 70-79, 80-89, 90-99`: Ranges reserved for various purposes (field protection, errors, file indicators, subroutine work indicators, general work indicators, std. subroutines, etc.)

---

## 4. **File Declarations**

```rpg
frk600d    cf   e             workstn
```

- `frk600d`: Refers to a display file, likely presenting screens to the user.
- `cf   e`: `cf` = Disk file, `e` = externally-described.

---

## 5. **Data Definitions**

### Local Data Area (LDA)

```rpg
d                uds
d l_navn                300    300
d l_gate                301    301
d l_ponr                302    302
d l_tlfn                303    303
d l_mobn                304    304
d l_user                911    920
d l_firm                944    946  0
d l_fnav                951    980
```

- `uds`: User Data Space, mapping fields to specific positions in the LDA.
- This is a way of extracting or updating specific fixed positions in the LDA.

**Fields include:**
- `l_navn` (Name)
- `l_gate` (Street)
- `l_ponr` (Postal number)
- `l_tlfn` (Phone number)
- `l_mobn` (Mobile number)
- `l_user` (User ID)
- `l_firm` (Company number)
- `l_fnav` (Company name)

### Standalone Variables

```rpg
d s               s              1  0
d w_firm          s              3  0
d w_in03          s              1
```

- Various work fields used in the program logic.

---

## 6. **Mainline Processing**

### Entry Point

```rpg
c     dummy         tag
```

A tag for reference; not functionally relevant directly.

---

### Primary Screen Handling

```rpg
c     a2taga        tag
c                   exfmt     a2bld
c                   eval      *in31 = *off
c                   eval      *in32 = *off
```

- Presents screen format `a2bld` to the user.
- Resets indicators 31 and 32 (typically used for screen feedback/errors).

---

### Function Key Handling (F3 = Exit)

```rpg
c                   if        *inkc = *on
c                   move      '1'           w_in03
c                   goto      xslutt
c                   endif
```

- If F3 (indicator KC) is pressed:
    - Sets `w_in03` to '1' (signals exit)
    - Jumps to end of program (`xslutt`)

---

### Storing Screen Data

```rpg
c                   eval      l_navn = a2navn
c                   eval      l_gate = a2gate
c                   eval      l_ponr = a2ponr
c                   eval      l_tlfn = a2tlfn
c                   eval      l_mobn = a2mobn
```

- Transfers data from screen fields (`a2navn`, etc.) to the Local Data Area fields.  
  This likely updates the LDA for passing data between programs.

---

## 7. **Program Termination**

```rpg
c     xslutt        tag
c                   eval      *inlr = *on
c                   return
```

- `*inlr = *on`: Signals last record/close files and end program.
- `return`: Exits the program.

---

## 8. **Initialization Subroutine**

```rpg
c     *inzsr        begsr
c     *entry        plist
c                   parm                    w_in03
c                   move      l_firm        w_firm
c                   move      ' '           a2navn
c                   move      ' '           a2gate
c                   move      ' '           a2ponr
c                   move      ' '           a2tlfn
c                   move      ' '           a2mobn
E5.00c              eval      w_in03 = '0'
c                   endsr
```

- Initialization subroutine, executed at program start.
- Accepts a parameter (`w_in03`).
- Copies the company number from LDA to work variable (`w_firm`).
- Clears screen fields (`a2navn`, etc.).
- Resets `w_in03` to '0'.

---

# **Summary for Onboarding**

- This RPG program is a simple parameter entry and exit routine, interfacing with a workstation display file.
- It allows the user to fill out several fields (name, address, etc.), which are then stored in the Local Data Area for access by other programs.
- Program handles F3 (Exit), storing an exit flag (`w_in03`).
- There is basic field initialization and LDA handling.
- The program heavily uses indicators for flow and screen management, a typical pattern in traditional RPG.

**Onboarding advice:**  
Familiarize yourself with how indicators are used for screen logic, how the Local Data Area (LDA) is mapped and referenced, and the general flow of display I/O in OPM/ILE RPG. The program serves as a simple front-end, likely called in a parameter chain by other jobs/programs.