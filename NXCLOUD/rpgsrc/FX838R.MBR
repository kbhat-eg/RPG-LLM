     h datedit(*dmy) option(*nodebugio)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System. . . . . : ASOFAK
      * Program . . . . : FX838R
      * Beskrivelse . . : FIX: Legger inn aveling/lager i salgsstatistikk
      *
      *                   Leser gjennom salgsstatistikk, og legger
      *                   inn avdeling og lager fra fakturaregister
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       161110 ASK  Nytt program
6.nu  * R6.30 040614 bsa  Programmet gjennomgått mtp nummerutvidelser.
8.01  *PRG2   220622 BOF  Utvidet prisgruppe fra 1 til 2 posisjoner - COMP
      *
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fsstal1    uf a e           k disk    rename(sstapfr:sstal1r)
     fsodtl1    if   e           k disk    rename(sodtpfr:sodtl1r)
     fsohel1    if   e           k disk    rename(sohepfr:sohel1r)
      *
      * Definering av LDA
      *
     d                uds
     d l_firm                944    946  0
      *
      * Definering av variable i nøkler
      *
     d w_firm          s                   like(sdfirm)
     d sstal1_paar     s                   like(sfpaar)
     d sodtl1_aarr     s                   like(sdaarr)
     d sodtl1_binr     s                   like(sdbinr)
     d sodtl1_numm     s                   like(sdnumm)
     d sodtl1_suff     s                   like(sdsuff)
     d sodtl1_ktxt     s                   like(sdktxt)
     d sodtl1_line     s                   like(sdline)
     d sohel1_aarr     s                   like(soaarr)
     d sohel1_binr     s                   like(sobinr)
     d sohel1_numm     s                   like(sonumm)
     d sohel1_suff     s                   like(sosuff)
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Hovedprogram
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Leser hele salgsstatistikken i 2010
      *
     c                   eval      sstal1_paar = 2010
     c     sstal1_key    setll     sstal1r
      *
     c                   read      sstal1r
     c                   dow       not %eof
      *
     c                   eval      sodtl1_aarr = sfpaar
     c                   eval      sodtl1_binr = sfbinr
     c                   eval      sodtl1_numm = sfornr
     c                   eval      sodtl1_suff = sforsu
     c                   eval      sodtl1_ktxt = 3
     c                   eval      sodtl1_line = sforli
      *
     c     sodtl1_key    chain     sodtl1
     c                   if        %found and
     c                             sdavde <> 0
6.18 c                   eval      sflage = sdlage
6.18 c                   eval      sfsavd = sdavde
      *
     c                   update    sstal1r
     c                   endif
      *
     c                   read      sstal1r
     c                   enddo
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     avslutt       tag
      *
     c                   eval      *inlr = *on
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Key for les av statistikk
      *
     c     sstal1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    sstal1_paar
      *
      * Key for oppslag på fakturaregister linje
      *
     c     sodtl1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    sodtl1_aarr
     c                   kfld                    sodtl1_binr
     c                   kfld                    sodtl1_numm
     c                   kfld                    sodtl1_suff
     c                   kfld                    sodtl1_ktxt
     c                   kfld                    sodtl1_line
      *
      * Key for oppslag på fakturaregister hode
      *
     c     sohel1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    sohel1_aarr
     c                   kfld                    sohel1_binr
     c                   kfld                    sohel1_numm
     c                   kfld                    sohel1_suff
      *
     c                   eval      w_firm  = l_firm
      *
     c                   endsr
