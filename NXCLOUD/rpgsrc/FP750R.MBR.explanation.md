# Overview
This program, named FP750R, facilitates the input and processing of special pricing information within a pricing system. It works with multiple related files and calls external programs to validate and enrich user input, ultimately chaining to other modules (FP751R, FP752R, FP753R, FP754R, FP755R, and FP762R) that handle different pricing formats or conditions.

FP750R functions as a controller for various pricing definitions. It displays an initial screen for data entry, checks that the user’s input is consistent, calls a core data-import routine (FP750C), and then routes processing to specific handling programs based on the selected format.

## Key Responsibilities
1. Accept and validate user input for:
   - Pricing group
   - Discount category
   - Customer identifiers
   - Customer project identifiers
   - Delivery types
   - Input file and folder references

2. Invoke the appropriate specialized program (e.g., FP751R, FP752R, etc.) according to the selected format (b1form).

3. Enforce business rules ensuring that certain combinations (e.g., discount category vs. customer number) are valid or exclusive.

4. Perform lookups to confirm that user-supplied keys (discount categories, price groups, customers, projects, delivery types) exist in the relevant master files.

5. Optionally use CO402R to determine if certain enhanced behaviors apply (u_631, u_701). These switches control conditional logic within the program.

## File Interactions
Several files are declared and renamed to reflect their usage:
- RA06L1 → RA06L1R (discount category–related data)  
- RA30L1 → RA30L1R (price group codes)  
- RKUNL1 → RKUNL1R (customer master)  
- FKPRL1 → FKPRL1R (customer project associations)  
- VLTPL1 → VLTPL1R (delivery type codes)  

These files are used primarily for validation. The program checks if the user-provided codes exist and then either accepts the data or flags an error.

## External Program Calls
- **FP750C** – Loads data from the “parameter file,” presumably some input source. If it signals an error, FP750R stops further processing.  
- **FP751R / FP752R / FP753R / FP754R / FP755R / FP762R** – Specialized handlers for different pricing formats or output structures. Each call is guarded by conditions on the user’s chosen format (b1form).  
- **RA530R, RA506R, RK500R, FL500R, VY500R** – Inquiry programs. They are used when the user requests lookups for fields such as price group, discount category, customer, customer project, or delivery type.  
- **CO402R** – Checks if certain system enhancements (versions 6.31 or 7.01) are active. It populates indicators (u_631, u_701), which drive additional or alternate behaviors.

## Structure and Flow
1. **Initialization Phase**  
   - The program fetches the firm identifier from the Local Data Area (LDA).  
   - It sets up key lists for quick validation of incoming user data against master files.  
   - It calls CO402R to check if 6.31 or 7.01 enhancements should be enabled.

2. **Screen Display and Input**  
   - An initial interactive screen (b1bld) is displayed.  
   - The user can exit, request lookups, or proceed to input validation.  
   - If a lookup is requested, the program calls the relevant external inquiry program (RA530R, RA506R, etc.) so the user can search for valid codes.

3. **Validation**  
   - The subroutine sjekk_input enforces key domain rules:
     - Either discount category or customer must be specified, but not both (unless certain enhancements override this).  
     - Each code (price group, discount category, customer, etc.) must exist in its respective master file.  
     - The specified input file (b1file) must be non-blank.  
     - Delivery-type codes (b1let1 through b1let4) must be valid in the VLTPL1 file.  
   - Errors turn on indicators (*IN31, *IN32, etc.) and set b_feil, which halts further processing until they are resolved.

4. **Data Import**  
   - The program then calls FP750C, the specialized import routine, specifying parameters like the data file (b1file), data folder (b1fldr), and a flag (b_feil) to check for issues.

5. **Routing to Format-Specific Programs**  
   - According to the chosen format (b1form), the code calls one of the FP75xR modules (or FP762R when b1form=6 and u_631 is on).  
   - Each format program receives the firm, price group, discount category, customer, project, “delete” indicator (b1slet), and any applicable delivery/paslag parameters.

6. **Completion**  
   - If everything proceeds correctly, the program sets *INLR on and exits. 

## Notable Business Logic
- The combination of discount category (b1rkat) and customer (b1kund) is carefully restricted. The user can specify one or the other, but if neither or both are specified, the program signals an error—unless certain code versions (checked via CO402R) allow exceptions.  
- Delivery surcharges (paslag) for up to four delivery types (b1let1 – b1let4) are optionally included in format 3.  
- The program’s revision comments (heading lines) show ongoing updates to handle new pricing formats (CSV, hierarchy, etc.) and additional fields (e.g., expanding price group from one position to two).

## Design Notes
- This program follows a typical “controller” pattern in the application, ensuring that all relevant validations are done before dispatching specialized tasks to other modules.  
- The repeated use of external programs for field lookups is consistent with the modular approach in this codebase: each master data entity (e.g., discount category, customer) has its own inquiry program.  
- Version checks (6.31, 7.01) are done through a centralized configuration or parameter system (CO402R), an example of how variants in business rules or logic are toggled without rewriting the main program.

Overall, FP750R acts as a gatekeeper and initializer for special pricing operations, ensuring that inputs are valid and that the correct specialized routine is called for the pricing format selected by the user. This structure allows easier maintenance and expansion when future pricing formats or new business rules are introduced.