     h option(*nodebugio) datedit(*dmy)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : ASOFAK
      * Program . . . . : FU900R
      * Beskrivelse . . : Oppdatering av loggfil for ordreforløp
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       090307 AMD  Nytt program
5.60  *       070108 bof  Utvidet nøkkel med år
5.61  *       060309 bof  tar firm fra paramter istdf. l_firm
      * 6.10  230609 BSA  Oppdatert med sporingsinformasjon
6.NU  * R6.30 260514 bsa  Programmet gjennomgått mtp nummerutvidelser.
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
3.32 ffloglu    uf a e           k disk    rename(flogpfr:floglur)
      *
      * Definering av parametre
      *
6.NU d p_urec          s             80
     d p_stat          s              1
      *
      * Definering av Local data area (LDA)
      *
     d                uds
     d l_wsid                901    910
     d l_user                911    920
     d l_firm                944    946  0
      *
      * Datastruktur
      *
     d                 ds
     d d_urec                        80
     d  d_firm                        3  0 overlay(d_urec)
5.60 d  d_aarr                        4  0 overlay(d_urec:4)
6.NU d  d_numm                        8  0 overlay(d_urec:8)
6.NU d  d_suff                        2  0 overlay(d_urec:16)
6.NU d  d_kode                        1    overlay(d_urec:18)
6.NU d  d_date                         d   overlay(d_urec:19) datfmt(*iso)
6.NU d  d_time                         t   overlay(d_urec:29) timfmt(*iso)
6.NU d  d_user                       10    overlay(d_urec:37)
6.NU d  d_wsid                       10    overlay(d_urec:47)
      *
      * Definering av variable i nøkler
      *
      *
      * Definering av variable
      *
     d w_firm          s                   like(fufirm)
      *
      * --------------------------------------------------------------------
      * Henter og initierer parametre
      * --------------------------------------------------------------------
      *
     c                   eval      d_urec = p_urec
     c                   eval      p_stat = *on
      *
      * Henter firma fra LDA
      *
5.61 c                   eval      w_firm = d_firm
      *
      * Sjekker om transdato og klokkeslett følger transaksjonen
      * - legger inn systemdato og klokke hvis ikke utfylt.
      *
     c                   if        d_date = *loval
     c                   time                    d_date
     c                   endif
      *
     c                   if        d_time = *loval
     c                   time                    d_time
     c                   endif
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Oppdatering av logg - fil
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c                   exsr      oppr_logg
     c                   goto      avslutt
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     avslutt       tag
     c                   eval      *inlr = *on
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for oppretting av transakajon i logg - file
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     oppr_logg     begsr
      *
      * Redigerer data og skriver transaksjon til logg - filen
      *
     c                   eval      fufirm = w_firm
     c                   eval      fuaarr = d_aarr
     c                   eval      funumm = d_numm
     c                   eval      fusuff = d_suff
     c                   eval      fukode = d_kode
     c                   eval      fudate = d_date
     c                   eval      futime = d_time
     c                   eval      fuuser = l_user
     c                   eval      fuwsid = l_wsid
6.10 c                   time                    fuodat
6.10 c                   time                    fuotim
6.10 c                   eval      fuousr = l_user
6.10 c                   time                    fuedat
6.10 c                   time                    fuetim
6.10 c                   eval      fueusr = l_user
      *
     c                   write     floglur
      *
     c                   endsr
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Parametre
      *
     c     *entry        plist
     c                   parm                    p_stat
6.NU c                   parm                    p_urec
      *
5.61 c*                  eval      w_firm = l_firm
      *
     c                   endsr
