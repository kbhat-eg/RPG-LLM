## Program Overview

**Program Name:** VD750R  
**System:** ASOFAK  
**Description:**  
This program is responsible for initiating the creation of a "vare-query-fil" (item query file) through user interaction and subsequent batch processing. It is designed to be run interactively, presenting a screen to the user, handling function key processing, and triggering a batch job for the actual file creation.

---

## Structure & Flow

### 1. File Declarations

```rpg
fjv950d    cf   e             workstn
```
- **fjv950d** is a display file used for interactive workstation I/O. The naming convention (`fjv950d`) suggests this is the display file for the JD950 series of programs, likely shared with the called batch program.

---

### 2. Main Program Logic

The mainline code is straightforward and follows a linear user-driven flow:

#### a. Initial Screen Display

```rpg
exfmt     b1bld
```
- Presents the initial screen (`b1bld` record format) to the user. This is typically a data entry or options selection screen for initiating the vare-query-fil creation.

#### b. Function Key Handling

```rpg
if        *inkc or *inkl
goto      avslutt
endif
```
- If the user presses F3 (Exit) or F12 (Cancel), the program branches to the `avslutt` (exit) routine. The use of indicators `*INKC` and `*INKL` follows standard IBM display file conventions for function key trapping.

#### c. Batch Program Call

```rpg
call      'JV950C'
```
- Calls the batch program `JV950C`, which is responsible for the actual creation or update of the vare-query-fil. This is a key business process handoff: the interactive program collects parameters and then delegates the work to a batch job for processing.
- **Note:** No parameters are passed in this call, suggesting that any required data is likely stored in a work file, data area, or via global state accessible to both the interactive and batch program.

#### d. Batch Job Notification

```rpg
exfmt     b1sbm
```
- Displays a secondary screen (`b1sbm` record format), likely used to inform the user that the batch job has been submitted and possibly to provide further instructions or confirmation.

#### e. Program Exit

```rpg
avslutt       tag
eval      *inlr = *on
return
```
- Standard RPG program termination: sets the last record indicator to ensure cleanup and then returns control.

---

### 3. Initialization Subroutine

```rpg
*inzsr        begsr
endsr
```
- The initialization subroutine is present but currently empty. This is a placeholder for any future startup logic (e.g., variable initialization, environment setup) and follows the standard convention for RPG programs in this codebase.

---

## Business & Domain-Specific Logic

- **Vare-query-fil**: The term "vare" refers to "item" or "product." This program is part of a process for creating or updating a query file related to items/products, likely for reporting or downstream processing.
- **Parameter Handling**: The program appears to act as a parameter collector and job submitter, not performing the actual business logic itself but orchestrating the handoff to a batch process.
- **User Interaction**: The flow is designed to be user-friendly, with clear exit/cancel options and confirmation after batch job submission.

---

## Design Decisions & Conventions

- **Separation of Interactive and Batch Logic**: Interactive parameter collection and batch processing are decoupled. This is a common pattern in this environment, allowing for improved performance and user experience.
- **Minimal In-Program Logic**: The program is intentionally minimal, serving as a UI and job submission wrapper. All heavy lifting is delegated to the batch program (`JV950C`).
- **Display File Naming**: The use of `fjv950d` as the display file is consistent with a modular naming convention, aligning display files and programs by functional area.
- **Function Key Handling**: Standard IBM i function key indicators are used. Only F3/F12 are handled; all other keys proceed with job submission.

---

## Relationships & Dependencies

- **Display File (`fjv950d`)**: Required for all user interaction. Record formats `b1bld` and `b1sbm` must be defined in this display file.
- **Batch Program (`JV950C`)**: This is a required companion program. Any changes to the interface or data exchange mechanism between the interactive and batch program must be coordinated.
- **Data Exchange**: No explicit parameter passingâ€”implies use of shared resources (work files, data areas, etc.).

---

## Summary

This program is a user-facing entry point for initiating the creation of an item (vare) query file. It presents an input screen, handles exit/cancel keys, calls a batch program to perform the processing, and then notifies the user. Its design follows established patterns in the system for separating interactive and batch processing, with strong adherence to codebase conventions for file naming, function key handling, and program structure. 

For onboarding developers:  
- Focus on the interaction with the display file and the handoff to the batch program.
- Review the display file layouts (`b1bld`, `b1sbm`) and the implementation of `JV950C` for end-to-end understanding.
- Be aware of the likely use of shared data areas or files for passing parameters between the interactive and batch components.