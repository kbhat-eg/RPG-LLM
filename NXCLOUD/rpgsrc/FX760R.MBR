     h option(*nodebugio) datedit(*dmy)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System. . . . . : ASOFAK
      * Program . . . . : FX760R
      * Beskrivelse . . : Konvertering, konvertering av enheter -OFAK
      *
      *                   Gjør oppslag i enhets-konverteringstabell, og
      *                   konverterer enheter i alle tabeller -OFAK
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       090699 HKO  Nytt program
      * 6.10  240609 BSA  Oppdatert med sporingsinformasjon
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     ffenkl1    if   e           k disk    rename(fenkpfr:fenkl1r)
     fvvarlu    uf   e           k disk    rename(vvarpfr:vvarlur)
     fvvaslu    uf   e           k disk    rename(vvaspfr:vvaslur)
     fvvprlu    uf   e           k disk    rename(vvprpfr:vvprlur)
     fvvenlu    uf   e           k disk    rename(vvenpfr:vvenlur)
     fvtillu    uf   e           k disk    rename(vtilpfr:vtillur)
     fvhgrlu    uf   e           k disk    rename(vhgrpfr:vhgrlur)
     fvugrlu    uf   e           k disk    rename(vugrpfr:vugrlur)
     ffrablu    uf   e           k disk    rename(frabpfr:frablur)
     ffprilu    uf   e           k disk    rename(fpripfr:fprilur)
     ffodtpf    uf   e           k disk    rename(fodtpfr:fodtpfr)
     fsodtlu    uf   e           k disk    rename(sodtpfr:sodtlur)
      *
6.10  * Local data area
6.10  *
6.10 d                uds
6.10 d l_user                911    920
      *
      * Definering av variable i nøkler
      *
     d fenkl1_firm     s                   like(fefirm)
     d fenkl1_enhf     s                   like(feenhf)
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Hovedprogram
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Avbryter dersom det ikke finnes enheter i konverteringstabell
      *
     c                   read      fenkl1                                 90
     c                   if        *in90 = *on
     c                   goto      avslutt
     c                   endif
      *
      * Behandler vare
      *
     c                   read      vvarlur                                90
     c                   dow       *in90 = *off
      *
     c                   if        vvenhe <> *blank
     c                   eval      fenkl1_firm = vvfirm
     c                   eval      fenkl1_enhf = vvenhe
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vvenhe = feenht
     c                   endif
     c                   endif
      *
     c                   if        vvenhl <> *blank
     c                   eval      fenkl1_firm = vvfirm
     c                   eval      fenkl1_enhf = vvenhl
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vvenhl = feenht
     c                   endif
     c                   endif
      *
     c                   if        vvenhs <> *blank
     c                   eval      fenkl1_firm = vvfirm
     c                   eval      fenkl1_enhf = vvenhs
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vvenhs = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    vvedat
6.10 c                   time                    vvetim
6.10 c                   eval      vveusr = l_user
     c                   update    vvarlur
      *
     c                   read      vvarlur                                90
     c                   enddo
      *
      * Behandler slettet vare
      *
     c                   read      vvaslur                                90
     c                   dow       *in90 = *off
      *
     c                   if        vvenhe <> *blank
     c                   eval      fenkl1_firm = vvfirm
     c                   eval      fenkl1_enhf = vvenhe
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vvenhe = feenht
     c                   endif
     c                   endif
      *
     c                   if        vvenhl <> *blank
     c                   eval      fenkl1_firm = vvfirm
     c                   eval      fenkl1_enhf = vvenhl
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vvenhl = feenht
     c                   endif
     c                   endif
      *
     c                   if        vvenhs <> *blank
     c                   eval      fenkl1_firm = vvfirm
     c                   eval      fenkl1_enhf = vvenhs
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vvenhs = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    vvedat
6.10 c                   time                    vvetim
6.10 c                   eval      vveusr = l_user
     c                   update    vvaslur
      *
     c                   read      vvaslur                                90
     c                   enddo
      *
      * Behandler vare-pris
      *
     c                   read      vvprlur                                90
     c                   dow       *in90 = *off
      *
     c                   if        vpenhe <> *blank
     c                   eval      fenkl1_firm = vpfirm
     c                   eval      fenkl1_enhf = vpenhe
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vpenhe = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    vpedat
6.10 c                   time                    vpetim
6.10 c                   eval      vpeusr = l_user
     c                   update    vvprlur
      *
     c                   read      vvprlur                                90
     c                   enddo
      *
      * Behandler vare-enhet
      *
     c                   read      vvenlur                                90
     c                   dow       *in90 = *off
      *
     c                   if        veenhe <> *blank
     c                   eval      fenkl1_firm = vefirm
     c                   eval      fenkl1_enhf = veenhe
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      veenhe = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    veedat
6.10 c                   time                    veetim
6.10 c                   eval      veeusr = l_user
     c                   update    vvenlur
      *
     c                   read      vvenlur                                90
     c                   enddo
      *
      * Behandler tilbud
      *
     c                   read      vtillur                                90
     c                   dow       *in90 = *off
      *
     c                   if        vtenh1 <> *blank
     c                   eval      fenkl1_firm = vtfirm
     c                   eval      fenkl1_enhf = vtenh1
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vtenh1 = feenht
     c                   endif
     c                   endif
      *
     c                   if        vtenh2 <> *blank
     c                   eval      fenkl1_firm = vtfirm
     c                   eval      fenkl1_enhf = vtenh2
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vtenh2 = feenht
     c                   endif
     c                   endif
      *
     c                   if        vtenh3 <> *blank
     c                   eval      fenkl1_firm = vtfirm
     c                   eval      fenkl1_enhf = vtenh3
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vtenh3 = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    vtedat
6.10 c                   time                    vtetim
6.10 c                   eval      vteusr = l_user
     c                   update    vtillur
      *
     c                   read      vtillur                                90
     c                   enddo
      *
      * Behandler hovedgruppe
      *
     c                   read      vhgrlur                                90
     c                   dow       *in90 = *off
      *
     c                   if        vghens <> *blank
     c                   eval      fenkl1_firm = vghfir
     c                   eval      fenkl1_enhf = vghens
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vghens = feenht
     c                   endif
     c                   endif
      *
     c                   if        vghenl <> *blank
     c                   eval      fenkl1_firm = vghfir
     c                   eval      fenkl1_enhf = vghenl
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vghenl = feenht
     c                   endif
     c                   endif
      *
     c                   if        vghenp <> *blank
     c                   eval      fenkl1_firm = vghfir
     c                   eval      fenkl1_enhf = vghenp
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vghenp = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    vgheda
6.10 c                   time                    vgheti
6.10 c                   eval      vgheus = l_user
     c                   update    vhgrlur
      *
     c                   read      vhgrlur                                90
     c                   enddo
      *
      * Behandler undergruppe
      *
     c                   read      vugrlur                                90
     c                   dow       *in90 = *off
      *
     c                   if        vguens <> *blank
     c                   eval      fenkl1_firm = vgufir
     c                   eval      fenkl1_enhf = vguens
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vguens = feenht
     c                   endif
     c                   endif
      *
     c                   if        vguenl <> *blank
     c                   eval      fenkl1_firm = vgufir
     c                   eval      fenkl1_enhf = vguenl
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vguenl = feenht
     c                   endif
     c                   endif
      *
     c                   if        vguenp <> *blank
     c                   eval      fenkl1_firm = vgufir
     c                   eval      fenkl1_enhf = vguenp
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      vguenp = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    vgueda
6.10 c                   time                    vgueti
6.10 c                   eval      vgueus = l_user
     c                   update    vugrlur
      *
     c                   read      vugrlur                                90
     c                   enddo
      *
      * Behandler rabattmatrise
      *
     c                   read      frablur                                90
     c                   dow       *in90 = *off
      *
     c                   if        frenhe <> *blank
     c                   eval      fenkl1_firm = frfirm
     c                   eval      fenkl1_enhf = frenhe
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      frenhe = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    fredat
6.10 c                   time                    fretim
6.10 c                   eval      freusr = l_user
     c                   update    frablur
      *
     c                   read      frablur                                90
     c                   enddo
      *
      * Behandler spesialpriser
      *
     c                   read      fprilur                                90
     c                   dow       *in90 = *off
      *
     c                   if        fpenhe <> *blank
     c                   eval      fenkl1_firm = fpfirm
     c                   eval      fenkl1_enhf = fpenhe
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      fpenhe = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    fpedat
6.10 c                   time                    fpetim
6.10 c                   eval      fpeusr = l_user
     c                   update    fprilur
      *
     c                   read      fprilur                                90
     c                   enddo
      *
      * Behandler ordre-linje
      *
     c                   read      fodtpfr                                90
     c                   dow       *in90 = *off
      *
     c                   if        fdenh1 <> *blank
     c                   eval      fenkl1_firm = fdfirm
     c                   eval      fenkl1_enhf = fdenh1
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      fdenh1 = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    fdedat
6.10 c                   time                    fdetim
6.10 c                   eval      fdeusr = l_user
     c                   update    fodtpfr
      *
     c                   read      fodtpfr                                90
     c                   enddo
      *
      * Behandler faktura-linje
      *
     c                   read      sodtlur                                90
     c                   dow       *in90 = *off
      *
     c                   if        sdenh1 <> *blank
     c                   eval      fenkl1_firm = sdfirm
     c                   eval      fenkl1_enhf = sdenh1
     c     fenkl1_key    chain     fenkl1                             91
     c                   if        *in91 = *off
     c                   eval      sdenh1 = feenht
     c                   endif
     c                   endif
      *
6.10 c                   time                    sdedat
6.10 c                   time                    sdetim
6.10 c                   eval      sdeusr = l_user
     c                   update    sodtlur
      *
     c                   read      sodtlur                                90
     c                   enddo
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     avslutt       tag
      *
     c                   eval      *inlr = *on
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Key for oppslag på enhets-konvertering
      *
     c     fenkl1_key    klist
     c                   kfld                    fenkl1_firm
     c                   kfld                    fenkl1_enhf
      *
     c                   endsr
