      /TITLE  ASSHOP Vise bong-/butikkfaktura-linje
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : ASSHOP
      * Program . . . . : BO311R
      * Beskrivelse . . : Vise bong-/butikkfaktura-linje
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       260698 HKO  Nytt program
5.30  * R5.30 131004 HFL  I bonghode og linje er bongnr. 12A.
6.30  * R5.30 251016 bof  Legger ut ordre-rabatt
6.31  * R5.30 150317 bof  feilretting salgspris (netto)
8.01  *       100823 bof  Takle CK med rabatter
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fbohel1    if   e           k disk    rename(bohepfr:bohel1r)
     fbodtl1    if   e           k disk    rename(bodtpfr:bodtl1r)
8.01 fvotyl1    if   e           k disk    rename(votypfr:votyl1r)
      *
     fbo311d    cf   e             workstn
      *
      * Definering av parametre
      *
     d p_firm          s                   like(bdfirm)
     d p_aarr          s                   like(bdaarr)
     d p_wsid          s                   like(bdwsid)
5.30 d p_numm          s                   like(bdbong)
     d p_line          s                   like(bdline)
      *
      * Definering av variabler i nøkler
      *
     d bohel1_aarr     s                   like(boaarr)
     d bohel1_wsid     s                   like(bowsid)
5.30 d bohel1_numm     s                   like(bobong)
     d bodtl1_aarr     s                   like(bdaarr)
     d bodtl1_wsid     s                   like(bdwsid)
5.30 d bodtl1_numm     s                   like(bdbong)
     d bodtl1_line     s                   like(bdline)
8.01 d votyl1_otyp     s                   like(vaotyp)
      *
      * Definering av variable
      *
     d w_firm          s                   like(bdfirm)
      *
      /EJECT
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * B1 Behandle bildet
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Initierer skjermbildet
      *
     c                   eval      bohel1_aarr = p_aarr
     c                   eval      bohel1_wsid = p_wsid
     c                   eval      bohel1_numm = p_numm
     c     bohel1_key    chain     bohel1                             60
     c                   if        *in60 = *on
     c                   goto      avslutt
     c                   endif
      *
8.01 c                   eval      votyl1_otyp = bootyp
8.01 c     votyl1_key    chain     votyl1r                            90
8.01 c                   if        vaokre = '-'
8.01 c                   mult      -1            bdsums
8.01 c                   endif
      *
     c                   eval      bodtl1_aarr = p_aarr
     c                   eval      bodtl1_wsid = p_wsid
     c                   eval      bodtl1_numm = p_numm
     c                   eval      bodtl1_line = p_line
     c     bodtl1_key    chain     bodtl1                             60
     c                   if        *in60 = *on
     c                   goto      avslutt
     c                   endif
      *
     c                   if        bobinr <> 0
     c     *dmy          move      bofkda        b1bdat
     c                   else
     c     *dmy          move      bobdat        b1bdat
     c                   endif
      *
5.30 c                   eval      b1numm = bobong
     c                   eval      b1binr = bobinr
     c                   eval      b1otyp = bootyp
     c                   eval      b1vare = bdvare
     c                   eval      b1tek1 = bdtek1
     c                   eval      b1tek2 = bdtek2
     c                   eval      b1anta = bdanta
     c                   eval      b1enh1 = bdenh1
     c                   eval      b1kpri = bdkpri
     c                   eval      b1kopr = bdkopr
     c                   eval      b1sapr = bdsapr
     c                   eval      b1kopr = bdkopr
     c                   eval      b1rab1 = bdrab1
     c                   eval      b1rab2 = bdrab2
6.30 c                   eval      b1orab = bdorab
      *
8.01 c                   if        vaokre = '-'
8.01 c                   mult      -1            bdsums
8.01 c                   endif
      *
6.31 c                   eval      b1sums = bdsums - bdrbe1
6.31 c                                             - bdrbe2
6.31 c                                             - bdorbe
6.31 c*                  if        bdsums <> 0
6.31 c*                  eval(h)   b1sums = bdsums
6.31 c*                  endif
      *
      * Behandler bildet
      *
     c     b1taga        tag
     c                   exfmt     b1bld
      *
      * Behandling av standard funksjonstaster
      *
     c                   select
     c                   when      *inkc or *inkl
     c                   goto      avslutt
     c                   endsl
      *
      /EJECT
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     avslutt       tag
      *
     c                   eval      *inlr = *on
     c                   return
      *
      /EJECT
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Parametre
      *
     c     *entry        plist
     c                   parm                    p_firm
     c                   parm                    p_aarr
     c                   parm                    p_wsid
     c                   parm                    p_numm
     c                   parm                    p_line
      *
      * Key for oppslag på bong-hode-register
      *
     c     bohel1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    bohel1_aarr
     c                   kfld                    bohel1_wsid
     c                   kfld                    bohel1_numm
      *
      * Key for oppslag på bong-detalj-register
      *
     c     bodtl1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    bodtl1_aarr
     c                   kfld                    bodtl1_wsid
     c                   kfld                    bodtl1_numm
     c                   kfld                    bodtl1_line
      *
8.01  *
8.01  * Key for file : ORDRETYPE-REGISTER
8.01  *
8.01 c     votyl1_key    klist
8.01 c                   kfld                    w_firm
8.01 c                   kfld                    votyl1_otyp
      *
      * Henter firmakode fra parameter
      *
     c                   eval      w_firm = p_firm
      *
     c                   endsr
