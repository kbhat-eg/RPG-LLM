# ND110R Program Documentation

## Overview

**Program:** ND110R  
**System:** ASOFAK  
**Description:** External order line, status codes

This program is part of the order management system and is responsible for handling and displaying status codes related to external order lines. It primarily interacts with a workstation display file, allowing users to view and exit the status code screen. The program has evolved to include new status codes and extended screen functionality, as indicated by the change history.

---

## Change History

- **081002 HKO** – Initial version.
- **050716 HKO** – Extended screen to handle status code 8 (8 = Not a stock item).
- **250614 bsa** – Added new status code.
- **120719 bsa** – Added another new status code.

---

## File Declarations

```rpg
fnd110d    cf   e             workstn
```
- **nd110d**: Workstation (display) file used for user interaction. This is the primary interface for the user to view and interact with the status codes.

---

## Main Program Flow

### 1. Initialization

- The program uses a special value section for initialization (`*inzsr`), but currently, it contains no logic. This is a placeholder for potential future startup routines.

### 2. Display Handling

#### Entry Tag

```rpg
c     b1taga        tag
```
- **b1taga**: Entry point for the main display handling logic.

#### Display Screen

```rpg
c                   exfmt     b1bld
```
- **exfmt b1bld**: Formats and displays the screen format `b1bld` from the display file `nd110d`. This is the main screen where status codes are shown to the user.

#### Exit Handling

```rpg
B001 c                   if        *inkc or *inkl
 001 c                   goto      avslutt
E001 c                   endif
```
- Checks if the user pressed function key F3 (end/exit), which typically sets indicator `*INKC` or `*INKL`.
- If either indicator is on, the program branches to the `avslutt` (exit) routine.

---

## Program Termination

```rpg
c     avslutt       tag
c                   move      *on           *inlr
c                   return
```
- **avslutt**: Exit tag.
- Sets LR (`*INLR`) to `*ON`, signaling program end and releasing resources.
- Returns control to the caller or system.

---

## Initialization Subroutine

```rpg
c     *inzsr        begsr
c                   endsr
```
- **\*inzsr**: Standard RPG initialization subroutine, currently empty.
- This is a convention in this codebase, providing a hook for future initialization logic without affecting the main program flow.

---

## Business/Domain-Specific Notes

- **Status Codes:** The program is closely tied to business logic around order line status codes. These codes may be extended or changed as business requirements evolve (as seen in the change history).
- **Screen Handling:** The display file (`nd110d`) and format (`b1bld`) are central. Any changes to how status codes are presented or interacted with will require updates to both this RPG program and the associated display file.
- **Exit Logic:** Only F3 (and possibly other mapped keys via indicators) are used for program termination, which is typical for simple inquiry or status screens in this application domain.
- **Program Structure:** The code is intentionally simple and modular, with clear separation for future enhancements (e.g., the empty initialization subroutine).

---

## Design Conventions & Patterns

- **Tag and GOTO Usage:** The program uses labeled tags (`b1taga`, `avslutt`) and `GOTO` for flow control. This is a legacy convention, typical in older RPG codebases, especially for simple screen-handling programs.
- **Indicator-Based Key Handling:** Uses standard display indicators (e.g., `*INKC`, `*INKL`) for function key detection, which is consistent with the rest of the system’s user interface logic.
- **Change Log in Source:** All business-driven changes are documented in the source header, which is a required practice for traceability in this codebase.

---

## External Dependencies

- **Display File (`nd110d`):** All user interaction is via this file. Any changes to the user interface require coordination with the display file definition.
- **No External APIs or Data Access:** This program is self-contained and does not directly interact with database files or external APIs. Its sole purpose is to display status codes and handle user exit.

---

## Summary

ND110R is a focused, user-interactive RPG program for displaying and managing external order line status codes. Its design is intentionally simple, with clear entry, display, and exit routines, and follows established conventions for screen-based RPG applications in this system. All business logic related to status codes is reflected in the display and change history; there is minimal processing within the program itself. Any enhancements typically involve extending the display logic or adding new status code handling as business needs evolve.