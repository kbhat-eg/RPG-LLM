```markdown
## Overview

This ILE RPG (RPG/400) program, named `LO526R`, is designed for the IBM AS/400 platform. Its main function is to display supplier (leverandør) information. The code includes screen interaction, file access, and communication with subprograms for further detail or queries.

---

## Header and Documentation

- **H-Spec:**  
  `H DATEDIT(*DMY)`  
  Sets the date format to Day/Month/Year for this program.

- **Comments:**  
  The initial comments describe system info, program name, description ("Display supplier information"), and a changelog (e.g., "K00 220420 Extended screen image").

---

## File Declarations

- **Display File:**  
  `FLO526D CF E WORKSTN`  
  The display file (`WORKSTN`) is used for user interaction.

- **Supplier master file:**  
  ```
  Frlevl1 IF E K DISK
   RENAME(RLEVPFR:rlevl1R)
  ```
  This defines a keyed physical file for supplier data, renaming the record format to `rlevl1R`.

---

## Data Declarations

- **UDS:**  
  `D UDS` introduces a user data structure.  
  - `l_firm` (944–946): Likely holds a firm/company number.
  - `l_fnav` (951–980): Probably contains a firm name.

---

## Main Logic Flow

### Initialization

- **Initialization routine (`*INZSR`):**
  - Resets key fields and internal variables.
  - Sets up field equivalence using `DEFINE`/`LIKE` compiler directives for clarity and maintenance.
  - Sets up a key list (`LEVKEY`) for the supplier register file.
  - Handles entry parameters from a calling program (`PLIST`).

### Main Entry Loop

The heart of the program is a tag loop (`B1TAG` and related tags) to process user requests.

1. **Reset/clear fields** such as B1LDOR, WWLDOR, B2NAVN, B2GATE, etc.
2. **Display the main screen** (`EXFMT B1BLD`), then process function key input:
   - **F3 (`*INKC`)**: Exit program, jump to `XSLUTT`.
   - **F4 (`*INKD`)**: Call subprogram `RL500R` to search the supplier register, pass back results. If not found, loop back for new input.
   
3. **Validation:**
   - If a new supplier number is entered, checks if it exists in the supplier register (`CHAIN rlevl1R...`).
   - If supplier not found (`*IN90=ON`): Set error indicator and return to data entry.
   - If found: Loads supplier data into screen fields.

### Decision Processing

Depending on user choices:

- **If B1VALG = 01:**  
  Calls subprograms (`VA556R` and `LO510R`) to display order/line information for the supplier.
- **If B1VALG = 02:**  
  Calls the same subprograms but (likely) to display product information for the supplier.
- After each action, the user is returned to the main screen for further input or exit.

### Exit

- **XSLUTT:**  
  Sets the last record indicator (`LR`) to end the program and returns.

---

## Subroutine Highlights

- **Initialization (`*INZSR`):**  
  Handles field resets and key/linkage setup.
- **Parameter List (`*ENTRY PLIST`):**  
  Receives fields from calling programs; populates the firm number in local keys.

---

## RPG Language Features Used

- **Tags (`TAG`):** Mark positions for GOTO-based control flow.
- **Indicators (`*INxx`):** Old-style RPG way to handle field/record/status flags.
- **`CHAIN`:** Reads a record by key from a disk file.
- **`MOVE`, `MOVEL`:** Old-style field assignment.
- **`CALL`, `PARM`:** Calls to external programs with parameter passing.
- **Screen Handling:** Classic EXFMT to format/display the screen and accept user input.

---

## Business Logic Summary

- **User enters supplier number or searches for one.**
- **If found**, supplier information is displayed.
- **User can select further actions** (viewing orders, products, etc.), which invoke subprograms.
- **Errors or exits** are handled with indicators and GOTO tags.
- **Interaction is looped** until the user exits (F3).

---

## Key Variables and Structures

- **B1LDOR, WWLDOR:** Likely represent (entered and working) supplier/order numbers.
- **LEVFIR, LEVNUM:** Firm number and supplier number used as keys.
- **B2NAVN, B2GATE, B2ADR2, B2STED:** Supplier name, address, and locality fields for display.
- ***INxx indicators:** Control program flow and error handling.

---

## What a Developer Needs to Understand

- **Structure:** The program uses tag-and-GOTO flow typical of old RPG code.
- **Files and Data:** Requires `WORKSTN` display file and `RLEVPFR` supplier file.
- **Subprogram Calls:** Understand what `RL500R`, `VA556R`, and `LO510R` do.
- **Indicators:** How *INxx are set and used for logic branches.
- **Screen Formats:** Device file fields such as `B1BLD` need to be understood for UI changes.
- **Initialization and Field Mapping:** Carefully resets and remaps fields at start and between requests.

---

## Modernization Opportunities

- **Free format RPG:** Consider restructuring to free format for readability.
- **Subprocedures:** Replace GOTO with structured code/subroutines.
- **Field assignments:** Use EVAL instead of MOVE/MOVEL.

---
```