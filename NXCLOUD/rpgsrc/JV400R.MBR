     h option(*nodebugio) datedit(*dmy)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : ASVADM
      * Program . . . . : JV400R
      * Beskrivelse . . : Sletter vare med relasjoner
      *
      *                   LR-flagg må være lik '1' for at *inLR ikke skal
      *                   settes
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       060498 HKO  Nytt program
      *       170698 HKO  Sletter rabattelement
      *       141003 HKO  Lagt inn parameter for å styre *inlr
      *       140905 HKO  Lagt inn sletting av vare-søktekst
      *       290208 bof  Utvidet forpakning med modulnr.
6.10  *       121212 bof  Lagt på sletting av jvpppf
6.30  *       240314 bof  Fjernet sletting av jvpppf
6.31  *       150616 bof  Flere tabeller som er relatert.
      *
6.31  * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fjvarlu    uf   e           k disk    rename(jvarpfr:jvarlur)
     fjvdtlu    uf   e           k disk    rename(jvdtpfr:jvdtlur)
     fjwprlu    uf   e           k disk    rename(jwprpfr:jwprlur)
     fjsoklu    uf   e           k disk    rename(jsokpfr:jsoklur)
     fjvprlu    uf   e           k disk    rename(jvprpfr:jvprlur)
     fjvpklu    uf   e           k disk    rename(jvpkpfr:jvpklur)
     fjbetl9    uf   e           k disk    rename(jbetpfr:jbetl9r)
     fjrael3    uf   e           k disk    rename(jraepfr:jrael3r)
     fjforl5    uf   e           k disk    rename(jforpfr:jforl5r)
     fjpfal6    uf   e           k disk    rename(jpfapfr:jpfal6r)
     fjmatl7    uf   e           k disk    rename(jmatpfr:jmatl7r)
6.31  *
6.31 fjvbelu    uf   e           k disk    rename(jvbepfr:jvbelur)
6.31 fjvlelu    uf   e           k disk    rename(jvlepfr:jvlelur)
6.31 fjvlmlu    uf   e           k disk    rename(jvlmpfr:jvlmlur)
6.31 fjvpglu    uf   e           k disk    rename(jvpgpfr:jvpglur)
6.31 fjvtxlu    uf   e           k disk    rename(jvtxpfr:jvtxlur)
6.31 fjfbel9    uf   e           k disk    rename(jfbepfr:jfbel9r)
6.31  * med nobbnr
6.31 fjvallu    uf   e           k disk    rename(jvalpfr:jvallur)
6.31 fjvnrlu    uf   e           k disk    rename(jvnrpfr:jvnrlur)
6.31  *
6.31 fjvavlu    uf   e           k disk    rename(jvavpfr:jvavlur)
6.31 fjvomlu    uf   e           k disk    rename(jvompfr:jvomlur)
      *
     fjvsoiu    uf   e           k disk    rename(jvsost:jvsoiur)
      *
      * Definering av parametre
      *
     d p_firm          s              3  0
     d p_vare          s                   like(jvvare)
6.31 d w_nobb          s                   like(jvnobb)
     d p_inlr          s              1
      *
      * Definering av variable
      *
     d w_firm          s              3  0
      *
     d w_vare          s                   like(jvvare)
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Hovedprogram
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Initierer key fra paremeter
      *
     c                   eval      w_firm = p_firm
     c                   eval      w_vare = p_vare
      *
      * Sletter vare
      *
     c     key01         chain     jvarlur                            90
6.31 c                   eval      w_nobb = jvnobb
     c                   delete    jvarlur
      *
      * Sletter vare-detalj
      *
     c     key02         chain     jvdtlur                            90
6.31 c                   if        *in90 = *off
6.31 c                   delete    jvdtlur
     c                   endif
      *
      * Sletter vare-søketekst
      *
     c     key01         chain     jvsoiur
     c                   if        %found
     c                   delete    jvsoiur
     c                   endif
      *
      * Sletter fra midlertidig-pris
      *
     c     key02         chain     jwprlur                            90
     c                   if        *in90 = *off
     c                   delete    jwprlur
     c                   endif
      *
      * Sletter tilhørende søketekster
      *
     c     key01         setll     jsoklu
     c     key01         reade     jsoklur                                90
     c                   dow       *in90 = *off
     c                   delete    jsoklur
     c     key01         reade     jsoklur                                90
     c                   enddo
      *
      * Sletter tilhørende vare-pakninger
      *
     c     key01         setll     jvpklu
     c     key01         reade     jvpklur                                90
     c                   dow       *in90 = *off
     c                   delete    jvpklur
     c     key01         reade     jvpklur                                90
     c                   enddo
      *
      * Sletter tilhørende vare-priser
      *
     c     key01         setll     jvprlu
     c     key01         reade     jvprlur                                90
     c                   dow       *in90 = *off
     c                   delete    jvprlur
     c     key01         reade     jvprlur                                90
     c                   enddo
      *
      * Sletter tilhørende betingelser
      *
     c     key02         setll     jbetl9
     c     key02         reade     jbetl9r                                90
     c                   dow       *in90 = *off
     c                   delete    jbetl9r
     c     key02         reade     jbetl9r                                90
     c                   enddo
      *
      * Sletter tilhørende rabattelement
      *
     c     key02         setll     jrael3
     c     key02         reade     jrael3r                                90
     c                   dow       *in90 = *off
     c                   delete    jrael3r
     c     key02         reade     jrael3r                                90
     c                   enddo
      *
      * Sletter tilhørende forpakninger
      *
     c     key02         setll     jforl5
     c     key02         reade     jforl5r                                90
     c                   dow       *in90 = *off
     c                   delete    jforl5r
     c     key02         reade     jforl5r                                90
     c                   enddo
      *
      * Sletter tilhørende påslag
      *
     c     key02         setll     jpfal6
     c     key02         reade     jpfal6r                                90
     c                   dow       *in90 = *off
     c                   delete    jpfal6r
     c     key02         reade     jpfal6r                                90
     c                   enddo
      *
      * Fjerner match mot slettet vare
      *
     c     key02         setll     jmatl7
     c     key02         reade     jmatl7r                                90
     c                   dow       *in90 = *off
     c                   eval      jovar2 = *blank
     c                   eval      joldo2 = 0
     c                   eval      jokode = 0
     c                   update    jmatl7r
     c     key02         reade     jmatl7r                                90
     c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-består av
6.31  *
6.31 c     key01         setll     jvbelu
6.31 c     key01         reade     jvbelur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvbelur
6.31 c     key01         reade     jvbelur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-prisgiver
6.31  *
6.31 c     key01         setll     jvlelu
6.31 c     key01         reade     jvlelur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvlelur
6.31 c     key01         reade     jvlelur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-prisgiver-media
6.31  *
6.31 c     key01         setll     jvlmlu
6.31 c     key01         reade     jvlmlur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvlmlur
6.31 c     key01         reade     jvlmlur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-prisgiver-gml pakn
6.31  *
6.31 c     key01         setll     jvpglu
6.31 c     key01         reade     jvpglur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvpglur
6.31 c     key01         reade     jvpglur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-beksrivelse
6.31  *
6.31 c     key01         setll     jvtxlu
6.31 c     key01         reade     jvtxlur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvtxlur
6.31 c     key01         reade     jvtxlur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende frakt-betingelser
6.31  *
6.31 c     key02         setll     jfbel9
6.31 c     key02         reade     jfbel9r                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jfbel9r
6.31 c     key02         reade     jfbel9r                                90
6.31 c                   enddo
6.31
6.31  *
6.31  * de med nobbnr i nøkkel
6.31  *
6.31  * Sletter tilhørende vare-alternative varenr
6.31  *
6.31 c     key03         setll     jvallu
6.31 c     key03         reade     jvallur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvallur
6.31 c     key03         reade     jvallur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-alternative varenr
6.31  *
6.31 c     key03         setll     jvavlu
6.31 c     key03         reade     jvavlur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvavlur
6.31 c     key03         reade     jvavlur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-nrf data
6.31  *
6.31 c     key03         setll     jvnrlu
6.31 c     key03         reade     jvnrlur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvnrlur
6.31 c     key03         reade     jvnrlur                                90
6.31 c                   enddo
6.31  *
6.31  * Sletter tilhørende vare-oppsalg /mersalg
6.31  *
6.31 c     key03         setll     jvomlu
6.31 c     key03         reade     jvomlur                                90
6.31 c                   dow       *in90 = *off
6.31 c                   delete    jvomlur
6.31 c     key03         reade     jvomlur                                90
6.31 c                   enddo

      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     avslutt       tag
      *
     c                   if        p_inlr <> *on
     c                   eval      *inlr = *on
     c                   endif
      *
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Parametre
      *
     c     *entry        plist
     c                   parm                    p_firm
     c                   parm                    p_vare
     c                   parm                    p_inlr
      *
      * Felles-key for sletting av vare
      *
     c     key01         klist
     c                   kfld                    w_vare
      *
     c     key02         klist
     c                   kfld                    w_firm
     c                   kfld                    w_vare
6.31  *
6.31  * Felles-key for sletting av nobb
6.31  *
6.31 c     key03         klist
6.31 c                   kfld                    w_nobb

      *
     c                   endsr
