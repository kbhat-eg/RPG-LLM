     h option(*nodebugio) datedit(*dmy)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : ASVADM
      * Program . . . . : JP711R
      * Beskrivelse . . : Finn neste linjenummer - rabattelement
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       080798 HKO  Nytt program
      *       130605 HKO  Utvidet nivå med varetype og leveringstype
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     fjrael1    if   e           k disk    rename(jraepfr:jrael1r)
      *
      * Definering av parametre
      *
     d p_firm          s                   like(jpefir)
     d p_eldo          s                   like(jpeldo)
6.3x d p_eprg          s                   like(jpeprg)
     d p_eogr          s                   like(jpeogr)
     d p_ehgr          s                   like(jpehgr)
     d p_eugr          s                   like(jpeugr)
     d p_emod          s                   like(jpemod)
     d p_evar          s                   like(jpevar)
     d p_evty          s                   like(jpevty)
     d p_elet          s                   like(jpelet)
     d p_ebrs          s                   like(jpebrs)
     d p_ebli          s                   like(jpebli)
     d p_erst          s                   like(jperst)
     d p_elin          s                   like(jpelin)
      *
      * Definering av variabler i nøkler
      *
     d jrael1_eldo     s                   like(jpeldo)
6.3x d jrael1_eprg     s                   like(jpeprg)
     d jrael1_eogr     s                   like(jpeogr)
     d jrael1_ehgr     s                   like(jpehgr)
     d jrael1_eugr     s                   like(jpeugr)
     d jrael1_emod     s                   like(jpemod)
     d jrael1_evar     s                   like(jpevar)
     d jrael1_evty     s                   like(jpevty)
     d jrael1_elet     s                   like(jpelet)
     d jrael1_ebrs     s                   like(jpebrs)
     d jrael1_ebli     s                   like(jpebli)
     d jrael1_erst     s                   like(jperst)
      *
      * Definering av variabler
      *
     d w_firm          s                   like(jpefir)
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Hovedprogram
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Finner neste ledige linjenummer
      *
     c                   eval      jpelin = 0
      *
     c                   eval      jrael1_eldo = p_eldo
6.3x c                   eval      jrael1_eprg = p_eprg
     c                   eval      jrael1_eogr = p_eogr
     c                   eval      jrael1_ehgr = p_ehgr
     c                   eval      jrael1_eugr = p_eugr
     c                   eval      jrael1_emod = p_emod
     c                   eval      jrael1_evar = p_evar
     c                   eval      jrael1_evty = p_evty
     c                   eval      jrael1_elet = p_elet
     c                   eval      jrael1_ebrs = p_ebrs
     c                   eval      jrael1_ebli = p_ebli
     c                   eval      jrael1_erst = p_erst
     c     jrael1_key    setll     jrael1
     c     jrael1_key    reade     jrael1
     c                   dow       not %eof
     c     jrael1_key    reade     jrael1
     c                   enddo
      *
     c                   eval      p_elin = jpelin + 1
      *
      * Avslutt program
      *
     c     avslutt       tag
      *
     c                   eval      *inlr = *on
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Parametre
      *
     c     *entry        plist
     c                   parm                    p_firm
     c                   parm                    p_eldo
6.3x c                   parm                    p_eprg
     c                   parm                    p_eogr
     c                   parm                    p_ehgr
     c                   parm                    p_eugr
     c                   parm                    p_emod
     c                   parm                    p_evar
     c                   parm                    p_evty
     c                   parm                    p_elet
     c                   parm                    p_ebrs
     c                   parm                    p_ebli
     c                   parm                    p_erst
     c                   parm                    p_elin
      *
      * Key for oppslag på betingelse
      *
     c     jrael1_key    klist
     c                   kfld                    w_firm
     c                   kfld                    jrael1_eldo
6.3x c                   kfld                    jrael1_eprg
     c                   kfld                    jrael1_eogr
     c                   kfld                    jrael1_ehgr
     c                   kfld                    jrael1_eugr
     c                   kfld                    jrael1_emod
     c                   kfld                    jrael1_evar
     c                   kfld                    jrael1_evty
     c                   kfld                    jrael1_elet
     c                   kfld                    jrael1_ebrs
     c                   kfld                    jrael1_ebli
     c                   kfld                    jrael1_erst
      *
      * Kopierer firma til variabel
      *
     c                   eval      w_firm = p_firm
      *
     c                   endsr
