**Overview**  
This program, named **RK978R**, runs in the ASOKON system and updates a “rent date” (interest date) or related “rentekode” based on user input. It is an interactive program—implemented as a Work Station (WORKSTN) RPG program—that displays a screen format (A2BLD) for collecting date parameters. The user-provided date is validated before it is moved into program fields that downstream processes (or other modules) might consume.  

---

## Purpose and Flow

1. **Initialization**  
   - Uses `*INZSR` to set up initial conditions. Notably, it initializes the parameter `p_in03` to a blank value.  
   - A parameter list (`*ENTRY PLIST`) includes `p_in03` for receiving an external value if the program is called from another module.

2. **Display Interaction**  
   - The display file is `rk978d`, with the main screen format referenced as `a2bld`.  
   - After clearing indicator `*IN31` (often used to flag invalid inputs), the program executes `EXFMT a2bld` to present the parameter-entry screen.  
   - The user may press F3 (mapped to indicator `*INKC`) to exit immediately. On detecting F3, the program sets `p_in03` to '1' (as a return code) and branches to the **xslutt** tag to end execution.

3. **Date Validation**  
   - The program checks whether the entered date (`a2pdat`) is valid using `TEST(D)`. If invalid, the indicator `*IN31` is turned on, and control returns to the tag `a2taga`, redisplaying the screen for correction.  
   - If valid, the date is moved into `rppdat` in ISO format, and `rpfirm` is set from the global field `L_firm`.

4. **Completion**  
   - Once inputs have been validated and stored, the program jumps to the **xslutt** label.  
   - The `*INLR` indicator is set to `*ON`, ending the program (i.e., no further processing or return to the interactive cycle).

---

## Notable Details and Conventions

1. **Indicator Usage**  
   - `*INKC` is used for the F3 key as an exit/escape route.  
   - `*IN31` is used specifically to show invalid date errors.  
   - Additional ranges (30, 31–59, 60–69, etc.) are reserved for other screen updates, warning messages, or file operations, though they are not all used here.

2. **Navigation via Tags**  
   - Rather than using subroutines for all branching, the code uses `TAG` labels (`dummy`, `a2taga`, `a2tagb`, and `xslutt`) and `GOTO`. This is a legacy technique but remains consistent within certain codebases for clarity or to align with established standards.

3. **Workstation File**  
   - `frk978d    CF   E             WORKSTN` references the display file that includes the screen (A2BLD) for user input.  
   - The exact layout of that display file (fields, headings, etc.) is implied but not shown in this source.

4. **Date Field Handling**  
   - `a2pdat` is a display input field.  
   - `rppdat` is the internal program field (in ISO format).  
   - The code uses `MOVE` and `TEST(D)` to validate and transfer date information.

5. **Standalone Mode or Called Program**  
   - Because there is a `PLIST` for `p_in03`, it suggests this module can be invoked by another program, passing in or receiving an exit code. If used in standalone mode, it initializes `p_in03` to a blank, but if called externally, it might receive a preset value.

---

**Summary**  
RK978R is a straightforward interactive RPG program designed to capture and validate a “rent date,” storing it in internal fields for subsequent processes. The code relies on standard indicator-driven logic for field protection and error states, while also offering a single-character parameter interface (`p_in03`) for external calls or return codes. The major steps revolve around displaying a prompt (A2BLD), validating the date input, then exiting gracefully once data is confirmed or if the user presses F3.