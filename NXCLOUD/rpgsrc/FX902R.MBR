      /TITLE  Spesial program - lageroppdatering
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      *  System  . . . . : lager
      *  Program . . . . : fx902r
      *  Beskrivelse . . :1 Leser alle forekomster på mpsppf - disse data
      *                    skal ligge på vlagpf nå.
      *                   2 Leser alle varer
      *                      - hvis utg.dato <> 0, så legges denne på alle
      *                        lager
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      *  Spesialversjon. :
      *
      *  Referanse  Dato   Endringsbeskrivelse                     Sign.
      * --------- ------  --------------------------------------------------
      *           101111  Nytt program                             bof
      *
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
6.23 fmpsplr    if   e           k disk    rename(mpsppfr:mpsplrr)
     fvvarl1    if   e           k disk    rename(vvarpfr:vvarl1r)
6.20 fvlaglu    uf a e           k disk    rename(vlagpfr:vlaglur)
      *
      *
      *  UDS Local Data Area
      *
     d                uds
     d l_user                911    920
     d l_firm                944    946  0
      *
      *  Definering av variable i nøkler
      *
6.20 d vlaglu_firm     s                   like(vlfirm)
6.20 d vlaglu_vare     s                   like(vlvare)
6.20 d vlaglu_lage     s                   like(vllage)
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *  Lese MPSPPF og legger data fra denne tabellen først til lager
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c                   read      mpsplr
     c                   dow       not %eof(mpsplr)
      *
     c                   eval      vlaglu_firm = mosfrm
     c                   eval      vlaglu_vare = mosvar
     c                   eval      vlaglu_lage = moslag
     c     vlaglu_key2   chain     vlaglu
     c                   if        %found(vlaglu)
6.18 c                   eval      vlstda = mostda
6.18 c                   eval      vludat = mosuda
6.18 c                   eval      vlbldo = mosldo
     c                   time                    vledat
     c                   time                    vletim
6.20 c                   update    vlaglur
     c                   endif
      *
     c                   read      mpsplr
     c                   enddo
      *
      *  Lese VVARPF og legger utg.dato fra varen til alle lager
      *
     c                   read      vvarl1
     c                   dow       not %eof(vvarl1)
      *
     c                   if        vvudat <> *loval
     c                   eval      vlaglu_firm = vvfirm
     c                   eval      vlaglu_vare = vvvare
     c     vlaglu_key    setll     vlaglu
     c     vlaglu_key    reade     vlaglu
     c                   dow       not %eof(vlaglu)
6.20 c                   eval      vludat = vvudat
6.20 c                   update    vlaglur
     c                   time                    vledat
     c                   time                    vletim
     c     vlaglu_key    reade     vlaglu
     c                   enddo
      *
     c                   endif
      *
     c                   read      vvarl1
     c                   enddo
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * Avslutt program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     xslutt        tag
      *
     c                   eval      *inlr = *on
     c                   return
      *
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *  Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      *
6.20 c     vlaglu_key    klist
6.20 c                   kfld                    vlaglu_firm
6.20 c                   kfld                    vlaglu_vare
      *
6.20 c     vlaglu_key2   klist
6.20 c                   kfld                    vlaglu_firm
6.20 c                   kfld                    vlaglu_vare
6.20 c                   kfld                    vlaglu_lage
      *
      *
     c                   endsr
