# RPG Program Explanation

This RPG (Report Program Generator) source code is for an IBM i (AS/400) system, written in Fixed Format ILE RPG. The program appears to handle user input related to deleted orders and calls a print program with provided parameters. The comments are mostly in Norwegian.

---

## Header Specification

```rpg
h datedit(*dmy) option(*nodebugio)
```

- `datedit(*dmy)`: Dates will be displayed and edited in the day/month/year format.
- `option(*nodebugio)`: Debugging input/output operations are disabled.

---

## File Specification

```rpg
flo645d    cf   e             workstn
```

- Defines a *workstation display file* named `lo645d` (used for displaying and extracting input from screens).

---

## Data Definitions

### Local Data Area

```rpg
d                uds
d  l_firm               944    946  0
d  l_fnav               951    980
```

- `uds` identifies the *User Data Space* (Local Data Area).
- `l_firm`, `l_fnav`: Variables mapped to specific positions in the LDA for retrieving or storing values (e.g., company id, user name).

### Parameter Data Structure

```rpg
d                 ds
d d_prec                        64
d  d_val1                        1  0 overlay(d_prec)
```

- Data structure for parameters (for passing to another program).
- `d_prec` is a 64-byte field.
- `d_val1` is a 1-digit zoned decimal field (overlayed on the start of `d_prec`). This is a convenient way to pack parameters for CALL/PARM operations.

---

## Main Logic

### Label and Initialization

```rpg
c     c1tag         tag

c                   eval      c1val1 = 0
```

- `c1tag`: Label for branching (using `goto`).
- Resets the `c1val1` variable (screen input field) to 0 before displaying the screen.

### Screen Interaction

```rpg
c     c1taga        tag

c     c1tagb        tag
c                   exfmt     c1bld
```

- `exfmt c1bld`: Displays the screen format `c1bld` (defined in the `lo645d` display file), and waits for user input.

### Function Key Handling

```rpg
c                   if        *inkc = *on
c                   goto      end_pgm
c                   endif
```

- Checks if function key F3 (Escape/Exit) was pressed (`*INKC` is on); if so, jumps to the program end.

### Parameter Assignment and Program Call

```rpg
c                   eval      d_val1 = c1val1

c                   call      'LO646C'
c                   parm                    d_prec
```

- Assigns the user-entered value (`c1val1`) to `d_val1` in the parameter structure.
- Calls program `LO646C`, passing `d_prec` as a parameter (packed data structure).

---

## Program End

```rpg
c     end_pgm       tag

c                   eval      *inlr = *on
c                   return
```

- `end_pgm`: Label for ending the program.
- Sets the LR (Last Record) flag to on, indicating the program is ending and resources can be cleaned up.
- Returns from the program.

---

## Subroutine: Initialization

```rpg
c     *inzsr        begsr

c                   endsr
```

- *Initialization Subroutine* (`*inzsr`), called automatically before main logic (when the program starts). Currently, it does not perform any tasks.

---

## Summary

- **Purpose:** Display a screen to enter information about a deleted order, collect user input, and pass it as a parameter to another program (`LO646C`) for further processing (likely printing).
- **Structure:** Uses labels, simple variable initialization, screen display and input handling, parameter passing, and a clean program exit.
- **Special Features:** 
    - Uses LDA (Local Data Area) for user/session information.
    - Parameter passing to external programs using overlays in a data structure.
    - Handles function keys to allow user to exit the program cleanly.

This code is typical for screen-handling RPG programs where input is validated and passed to another program for batch/output processing.