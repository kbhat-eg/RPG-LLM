## Program Overview

This program, `LO575` in the ASLAGR system, is designed to display supplier (leverand√∏r) information, including details from related files such as order parameters and distribution data. The screen interface is used to present supplier data and calculated values (like weight and amount limits) based on input parameters and associated records.

### Purpose

- **Display detailed supplier information** based on a supplied supplier number (`p_levr`), company (`p_firm`), and warehouse (`p_lage`).
- **Retrieve and show related parameters** (e.g., weight and amount limits) from the order parameter file for the supplier and warehouse.
- **Indicate if the supplier uses internal EDI order processing** by checking distribution records.
- **Support standard exit and function key handling**.

---

## File Declarations and Relationships

- **rlevl1**: Main supplier master file (renamed from `rlevpfr`). Used to fetch core supplier data.
- **apospf**: Purchase order file (not directly used in main logic, but declared).
- **mppalr**: Order parameter file (renamed from `mppapfr`). Used to fetch weight and amount constraints per supplier/warehouse.
- **lldilr**: Supplier distribution file (renamed from `lldipfr`). Used to check for internal EDI order types.

---

## Key Variables and Data Flow

- **Input Parameters**: `p_firm`, `p_levr`, `p_lage` (company, supplier, warehouse).
- **Key Variables**: Used to build keys for file access (e.g., `rlevl1_levr`, `mppalr_ldor`, `lldilr_ldor`).
- **Screen Fields**: Prefixed with `b1` (e.g., `b1levr`, `b1navn`, etc.), these are fields displayed/used in the workstation display.

---

## Main Processing Flow

### 1. Initialization

- **Entry Parameters**: The program receives company, supplier, and warehouse as parameters.
- **Key List Setup**: Key lists (`klist`) are defined for supplier, order parameter, and distribution file access, always including the company code for multi-company support.

### 2. Supplier Lookup

- The supplier number is moved into the key variable and a `CHAIN` operation attempts to retrieve the supplier record.
- If not found (`*IN90`), the program skips to the screen display, showing empty/default values.

### 3. Data Population

- If the supplier is found, all relevant fields from the supplier master are moved to the corresponding display variables (`b1xxx`).
- This includes contact info, address, payment, and other business-specific fields.

### 4. Parameter Lookup (Weight and Amount Limits)

- The program initializes the screen fields for weight (`b1gvek`) and amount (`b1gbel`) to zero.
- It then reads the order parameter file (`mppalr`) for the current supplier, looping through records until it finds one matching the input warehouse (`p_lage`).
- If found, it updates the screen fields with the retrieved limits and exits the loop.

### 5. EDI Order Type Check

- Default is set to "Nei" (No) for EDI.
- The distribution file (`lldilr`) is checked for a record matching the supplier and an empty warehouse.
- If found and the form type (`lpform`) is "EDI", the screen field is set to "Ja" (Yes).

### 6. Screen Display

- The screen (`b1bld`) is displayed (`EXFMT`).
- Standard function key handling is performed:
    - Exit on `*INKC` or `*INKL`.
    - (Commented out) Bonus agreement display on `*INKP`.

### 7. Program Termination

- On exit, the LR indicator is set, and the program returns.

---

## Design Decisions & Conventions

- **Multi-company Support**: All key lists include the company (`w_firm`), allowing the same program to operate across multiple companies.
- **Parameterization**: The program is designed to be called with parameters, making it a generic supplier display utility.
- **Screen Field Prefix (`b1`)**: All screen variables use a consistent prefix, making it easy to distinguish UI fields from internal variables.
- **Graceful Handling of Missing Data**: If a supplier is not found, the screen is still shown, but with empty/default values.
- **Modular Key Lists**: Keys for all file accesses are defined in the initialization subroutine, centralizing key structure and making maintenance easier.

---

## Business/Domain Specifics

- **Supplier Details**: The program expects a rich supplier master, including contact, payment, and EDI information.
- **Order Parameter Logic**: Each supplier can have multiple order parameter records (e.g., by warehouse), and the program selects the relevant one for the current warehouse.
- **EDI Distribution**: Internal EDI handling is determined by the presence and content of a record in the distribution file.

---

## Interactions with Other Modules

- **Potential Integration**: The commented-out call to `EK501R` suggests integration with a bonus agreement module, likely triggered by a function key.
- **Data Dependency**: Relies on data integrity and structure in the supplier, order parameter, and distribution files.

---

## Summary

This program is a supplier inquiry utility designed for interactive use, providing users with a consolidated view of supplier information, order parameters, and EDI status. It is parameter-driven, modular, and adheres to conventions that support multi-company operations and easy extensibility. Understanding the relationships between the supplier, order parameter, and distribution files is key to maintaining and extending this program.