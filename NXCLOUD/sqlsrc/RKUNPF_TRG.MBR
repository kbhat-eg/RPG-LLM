--
CREATE OR REPLACE PROCEDURE SP_NEXSTEP_CREATE_TRG (IN P_LIB
       VARCHAR(10), IN P_TABLE VARCHAR(10))

  IF  (SELECT COUNT(*) FROM QSYS2.SYSTABLES WHERE SYSTEM_TABLE_SCHEMA =
       P_LIB AND TABLE_NAME='SLOGPF') = 1  THEN

-- RKUNPF

  IF  (UPPER(TRIM(P_TABLE)) = 'RKUNPF'  OR  UPPER(TRIM(P_TABLE)) =
      '*ALL')  THEN

SET STMT = '
CREATE OR REPLACE TRIGGER RKUN_SQL_TRG_ELOG_U AFTER UPDATE ON RKUNPF
      REFERENCING OLD AS O NEW AS N
      FOR EACH ROW BEGIN ATOMIC

-- RKNAVN

IF (O.RKNAVN <> N.RKNAVN) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKNAVN'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKNAVN),RTRIM(N.RKNAVN),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKGATE

IF (O.RKGATE <> N.RKGATE) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKGATE'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKGATE),RTRIM(N.RKGATE),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKADR2

IF (O.RKADR2 <> N.RKADR2) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKADR2'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKADR2),RTRIM(N.RKADR2),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKSTED

IF (O.RKSTED <> N.RKSTED) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKSTED'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKSTED),RTRIM(N.RKSTED),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKBGIR

IF (O.RKBGIR <> N.RKBGIR) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKBGIR'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKBGIR),RTRIM(N.RKBGIR),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKBETB

IF (O.RKBETB <> N.RKBETB) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKBETB'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKBETB),RTRIM(N.RKBETB),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKBETM

IF (O.RKBETM <> N.RKBETM) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKBETM'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKBETM),RTRIM(N.RKBETM),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKSPRK

IF (O.RKSPRK <> N.RKSPRK) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKSPRK'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKSPRK),RTRIM(N.RKSPRK),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKPASS

IF (O.RKPASS <> N.RKPASS) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKPASS'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKPASS),RTRIM(N.RKPASS),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKRABK

IF (O.RKRABK <> N.RKRABK) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKRABK'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKRABK),RTRIM(N.RKRABK),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKKRES

IF (O.RKKRES <> N.RKKRES) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKKRES'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKKRES),RTRIM(N.RKKRES),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKGRNS

IF (O.RKGRNS <> N.RKGRNS) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKGRNS'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKGRNS),RTRIM(N.RKGRNS),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKKGRK

IF (O.RKKGRK <> N.RKKGRK) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKKGRK'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKKGRK),RTRIM(N.RKKGRK),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;

-- RKFRIE

IF (O.RKFRIE <> N.RKFRIE) THEN
        INSERT INTO SLOGPF(ELFIRM,ELREGI,ELFORE,ELFORT,
        ELFELT,ELUSER,ELDATO,ELFRAV,ELTILV,ELRDAT,ELRTIM,ELRUSR)
        VALUES(
        O.RKFIRM,''KUNDE'',O.RKKUND,'''',''RKFRIE'',SESSION_USER,
        CURRENT_DATE,RTRIM(O.RKFRIE),RTRIM(N.RKFRIE),CURRENT_DATE,
        CURRENT_TIME,SESSION_USER);
 END IF;




















