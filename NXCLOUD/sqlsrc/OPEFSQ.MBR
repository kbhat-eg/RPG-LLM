
CREATE OR REPLACE PROCEDURE SP_OPEFST()
LANGUAGE SQL
BEGIN
 DECLARE ERROR_VERDI INT DEFAULT 0;
 DECLARE CONTINUE HANDLER FOR SQLEXCEPTION
  BEGIN
    SET ERROR_VERDI = 1;
  END;

  DROP ALIAS NBUOPENEDFILEGROUPS;

END;

CALL SP_OPEFST();

DROP PROCEDURE SP_OPEFST();

CREATE OR REPLACE TABLE OPEFST(
  UID              NUMERIC(18, 0) NOT NULL GENERATED ALWAYS AS IDENTITY
                   (START WITH 1 INCREMENT BY 1 CYCLE),
  Kundeorgnummer   FOR COLUMN OPFTNR NUMERIC(18, 0) NOT NULL,
  Kontaktperson    FOR COLUMN OPKPNR DEC(18, 0) NOT NULL,
  OpprettetDato    FOR COLUMN OPODAT DATE NOT NULL DEFAULT CURRENT_DATE,
  OpprettetTid     FOR COLUMN OPOTIM TIME NOT NULL DEFAULT CURRENT_TIME,
  OpprettetAv      FOR COLUMN OPOUSR CHAR(10) NOT NULL DEFAULT ' ',
  EndretDato       FOR COLUMN OPEDAT DATE NOT NULL DEFAULT CURRENT_DATE,
  EndretTid        FOR COLUMN OPETIM TIME NOT NULL DEFAULT CURRENT_TIME,
  EndretAv         FOR COLUMN OPEUSR CHAR(10) NOT NULL DEFAULT ' ')
ON REPLACE PRESERVE ALL ROWS;

CREATE UNIQUE INDEX OPEFIU ON OPEFST(OPFTNR);

LABEL ON TABLE OPEFST IS 'Keystore file';

CREATE ALIAS nbuOpenedFilegroups FOR OPEFST;
