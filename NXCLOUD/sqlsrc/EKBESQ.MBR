-- Kunde bonuselement

CREATE OR REPLACE TABLE EKBEST( 
 Firma               FOR COLUMN EKEFIR NUMERIC(3, 0) NOT NULL,
 Bonuskunde          FOR COLUMN EKEBKU NUMERIC(6, 0) NOT NULL,
 Rabattkategori      FOR COLUMN EKERKA NUMERIC(3, 0) DEFAULT 0,
 Kunde               FOR COLUMN EKEKUN NUMERIC(6, 0) DEFAULT 0,
 Kundeprosjekt       FOR COLUMN EKEKPR NUMERIC(6, 0) DEFAULT 0,
 Overgruppe          FOR COLUMN EKEOGR NUMERIC(2, 0) DEFAULT 0,
 Hovedgruppe         FOR COLUMN EKEHGR NUMERIC(2, 0) DEFAULT 0,
 Undergruppe         FOR COLUMN EKEUGR NUMERIC(3, 0) DEFAULT 0,
 Leverandor          FOR COLUMN EKELDO NUMERIC(6, 0) DEFAULT 0,
 Modulnr             FOR COLUMN EKEMOD NUMERIC(8, 0) DEFAULT 0,
 Varenr              FOR COLUMN EKEVAR CHAR(15) DEFAULT ' ',
 Enhet               FOR COLUMN EKEENH CHAR(3) DEFAULT ' ',
 Leveringstype       FOR COLUMN EKELET NUMERIC(1, 0) DEFAULT 0,
 Bonustype           FOR COLUMN EKEBOT CHAR(2) DEFAULT ' ',
 FraDato             FOR COLUMN EKEFDA DATE DEFAULT '0001-01-01',
 TilDato             FOR COLUMN EKETDA DATE DEFAULT '0001-01-01',
 BelopsgrenseFra     FOR COLUMN EKEBGF NUMERIC(9, 0) DEFAULT 0,
 BelopsgrenseTil     FOR COLUMN EKEBGT NUMERIC(9, 0) DEFAULT 0,
 Bonusprosent        FOR COLUMN EKEBPR NUMERIC(5, 2) DEFAULT 0,
 KalkulerTilbake     FOR COLUMN EKEKTB NUMERIC(1, 0) DEFAULT 0,
 Merknad             FOR COLUMN EKEMRK CHAR(50) DEFAULT ' ',
 SumBonus            FOR COLUMN EKESBO NUMERIC(9, 0) DEFAULT 0,
 BeregnetDato        FOR COLUMN EKEBDA DATE NOT NULL DEFAULT '0001-01-01',
 BeregnetTid         FOR COLUMN EKEBTI TIME NOT NULL DEFAULT '00:00:00',
 OpprettetDato       FOR COLUMN EKEODA DATE NOT NULL DEFAULT CURRENT_DATE,
 OpprettetTid        FOR COLUMN EKEOTI TIME NOT NULL DEFAULT CURRENT_TIME,
 OpprettetAv         FOR COLUMN EKEOUS CHAR(10) NOT NULL DEFAULT ' ',
 EndretDato          FOR COLUMN EKEEDA DATE NOT NULL DEFAULT CURRENT_DATE,
 EndretTid           FOR COLUMN EKEETI TIME NOT NULL DEFAULT CURRENT_TIME,
 EndretAv            FOR COLUMN EKEEUS CHAR(10) NOT NULL DEFAULT ' ')
ON REPLACE PRESERVE ALL ROWS;

CREATE UNIQUE INDEX EKBEIU
	ON EKBEST (EKEFIR, EKEBKU, EKERKA, EKEKUN, EKEKPR, EKEOGR, EKEHGR,
	           EKEUGR, EKELDO, EKEMOD, EKEVAR, EKEENH, EKELET, EKEBOT,
	           EKEFDA, EKETDA, EKEBGF, EKEBGT);

CREATE UNIQUE INDEX EKBEIR
	ON EKBEST (EKEFIR, EKEBKU, EKERKA, EKEKUN, EKEKPR, EKEOGR, EKEHGR,
	           EKEUGR, EKELDO, EKEMOD, EKEVAR, EKEENH, EKELET, EKEBOT,
	           EKEFDA, EKETDA, EKEBGF, EKEBGT);

CREATE UNIQUE INDEX EKBEI1
	ON EKBEST (EKEFIR, EKEBKU, EKERKA, EKEKUN, EKEKPR, EKEOGR, EKEHGR,
	           EKEUGR, EKELDO, EKEMOD, EKEVAR, EKEENH, EKELET, EKEBOT,
	           EKEFDA, EKETDA, EKEBGF, EKEBGT);

CREATE INDEX EKBEI2
	ON EKBEST (EKEFIR, EKEBKU, EKERKA, EKEKUN, EKEKPR, EKEOGR, EKEHGR,
	           EKEUGR, EKELDO, EKEMOD, EKEVAR, EKEENH, EKELET, EKEBOT,
	           EKEFDA, EKETDA, EKEBGT DESC, EKEBGF DESC);

LABEL ON TABLE EKBEST
	IS 'Kunde bonuselement';
