
CREATE OR REPLACE PROCEDURE SP_LKEYST()
LANGUAGE SQL
BEGIN
 DECLARE ERROR_VERDI INT DEFAULT 0;
 DECLARE CONTINUE HANDLER FOR SQLEXCEPTION
  BEGIN
    SET ERROR_VERDI = 1;
  END;

  DROP ALIAS NBUKEYSTOREFILG;

END;

CALL SP_LKEYST();

DROP PROCEDURE SP_LKEYST();

CREATE OR REPLACE TABLE LKEYST(
  UID              NUMERIC(18, 0) NOT NULL GENERATED ALWAYS AS IDENTITY
                   (START WITH 1 INCREMENT BY 1 CYCLE),
  Firmanummer      FOR COLUMN LKYFIR NUMERIC(3, 0) NOT NULL,
  Kundenummer      FOR COLUMN LKYKNR NUMERIC(6, 0) NOT NULL,
  Kundeorgnummer   FOR COLUMN LKYFTN NUMERIC(18, 0) NOT NULL,
  Secret           FOR COLUMN LKYSEC VARCHAR(256) NOT NULL DEFAULT ' ',
  Passiv           FOR COLUMN LKYPAS VARCHAR(1) NOT NULL DEFAULT ' ',
  OpprettetDato    FOR COLUMN LKYODA DATE NOT NULL DEFAULT CURRENT_DATE,
  OpprettetTid     FOR COLUMN LKYOTI TIME NOT NULL DEFAULT CURRENT_TIME,
  OpprettetAv      FOR COLUMN LKYOUS CHAR(10) NOT NULL DEFAULT ' ',
  EndretDato       FOR COLUMN LKYEDA DATE NOT NULL DEFAULT CURRENT_DATE,
  EndretTid        FOR COLUMN LKYETI TIME NOT NULL DEFAULT CURRENT_TIME,
  EndretAv         FOR COLUMN LKYEUS CHAR(10) NOT NULL DEFAULT ' ');

CREATE UNIQUE INDEX LKEYIU ON LKEYST(LKYFIR, LKYKNR);

LABEL ON TABLE LKEYST IS 'Keystore file pr filgruppe';

CREATE ALIAS nbukeystorefilg FOR LKEYST;
