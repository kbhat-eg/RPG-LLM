             PGM        parm(&type)

             DCL        VAR(&nbr)      TYPE(*CHAR) LEN(6)
             DCL        VAR(&usr)      TYPE(*CHAR) LEN(10)
             DCL        VAR(&JOB)      TYPE(*CHAR) LEN(10)
             DCL        VAR(&type)     TYPE(*CHAR) LEN(1)
             DCLF       FILE(*LIBL/ROM00PF)

/*   Finner hvilken rutine som jobben kjøres i fra      */

/*           crtpf      file(*curlib/rom00pf) rcdlen(200)        */
/*           monmsg     msgid(cpf7302)  exec(do)                 */
/*           GRTOBJAUT  OBJ(*CURLIB/ROM00PF) OBJTYPE(*FILE) +    */
/*                        USER(*PUBLIC) AUT(*ALL)                */
/*           enddo                                               */

             chgvar     var(&type)     value(' ')
             RTVJOBA    JOB(&JOB) NBR(&NBR)
             RTVJOBA    JOB(&JOB) USER(&usr)
             dspjob     OUTPUT(*PRINT) OPTION(*PGMSTK)
             CPYSPLF    FILE(QPDSPJOB) TOFILE(*LIBL/Rom00PF) +
                          JOB(&NBR/&USR/&JOB) SPLNBR(*LAST)
             DLTSPLF    FILE(QPDSPJOB) JOB(&NBR/&USR/&JOB) +
                          SPLNBR(*LAST)

/*   Sjekker om det er omkjøring fra RLOG               */

loop:        rcvf
             monmsg     msgid(cpf0864) exec(goto cmdlbl(end))
             if         cond(%sst(&rom00pf 7 10) *eq 'RF500R') then(do)
                chgvar     var(&type)     value('B')
                goto       cmdlbl(end)
             enddo
             if         cond(%sst(&rom00pf 7 10) *eq 'RF501R') then(do)
                chgvar     var(&type)     value('B')
                goto       cmdlbl(end)
             enddo
             goto       cmdlbl(loop)

 END:        ENDPGM
