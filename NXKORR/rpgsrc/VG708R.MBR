     h option(*nodebugio) datedit(*dmy)
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * System  . . . . : NXCLOUD
      * Program . . . . : VG708R
      * Beskrivelse . . : Beregner kostprisfaktor på frakt basert på
      *                   differanse mellom innkjøpspris 1 og 2 i VVPRPF
      *
      * Spesialversjon. :
      * Tilpasset for . :
      *
      * Ref.   Dato  Sign Endringsbeskrivelse
      * ----- ------ ---- -------------------------------------------------
      *       181124 ASK  Nytt program
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      *  Bruk av indikatorer:
      *
      *       LR = Avslutt program
      *    80-99 = Arbeidsindikatorer
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
      * Definering av parametre
      *
     d p_vare          s             15
     d p_lage          s              2  0
     d p_ldor          s              6  0
     d p_fakt          s              8  6
      *
      * Definering av Local data area
      *
     d                uds
     d l_firm                944    946  0
      *
      * Definering av variable
      *
     d w_firm          s              3  0
     d w_prgr          s              2
     d w_innp1         s              9  2
     d w_innp2         s              9  2

      // Hovedrutine - finne fraktpåslag

      //  Finne prisgruppe fra lager

       exec SQL
         select vpgprg into :w_prgr
            from vpgrpf
            where vpglag = :p_lage;

      // Finn nyeste pris på prisgruppe

       exec SQL
         select vpinpr, vpinp2
           into :w_innp1, :w_innp2
            from vvprpf
            where vpvare = :p_vare and
                  vpldor = :p_ldor and
                  vpprgr = :w_prgr
               order by vppdat desc
               fetch first 1 rows only;

      // Bereegn fraktpåslag faktor

       p_fakt = ((w_innp2 - w_innp1) * 100) / w_innp1;

      //
      // Avslutt program
      //
     c     avslutt       tag
     c                   eval      *inlr = *on
     c                   return
      *
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      * ERROR-rutine  - Brukes ved mislykket datafeil
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *pssr         begsr
      *
     c                   eval      p_fakt = 0
     c                   goto      avslutt
      *
     c                   endsr
      * Subrutine for initiering av program
      * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
      *
     c     *inzsr        begsr
      *
      * Parametre
      *
     c     *entry        plist
     c                   parm                    p_vare
     c                   parm                    p_lage
     c                   parm                    p_ldor
     c                   parm                    p_fakt
      *
     c                   eval      w_firm = l_firm
      *
     c                   endsr
